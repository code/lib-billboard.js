/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 *
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 *
 * @version 3.11.3-nightly-20240320004559
 */(function(ot,Wt){if(typeof exports=="object"&&typeof module=="object")module.exports=Wt(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom"));else if(typeof define=="function"&&define.amd)define(["d3-axis","d3-brush","d3-drag","d3-dsv","d3-ease","d3-hierarchy","d3-interpolate","d3-scale","d3-selection","d3-shape","d3-time-format","d3-transition","d3-zoom"],Wt);else{var ce=typeof exports=="object"?Wt(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom")):Wt(ot.d3,ot.d3,ot.d3,ot.d3,ot.d3,ot.d3,ot.d3,ot.d3,ot.d3,ot.d3,ot.d3,ot.d3,ot.d3);for(var de in ce)(typeof exports=="object"?exports:ot)[de]=ce[de]}})(this,function(je,ot,Wt,ce,de,vi,Ti,Ai,wi,Si,Ri,Ci,ki){return function(){"use strict";var Ei=[,,function(P){P.exports=Ri},function(P){P.exports=wi},function(P){P.exports=ot},function(P){P.exports=ce},function(P){P.exports=Wt},function(P){P.exports=Ai},function(P){P.exports=Ci},function(P){P.exports=Si},function(P){P.exports=je},function(P){P.exports=de},function(P){P.exports=Ti},function(P){P.exports=vi},function(P){P.exports=ki}],We={};function Y(P){var ft=We[P];if(ft!==void 0)return ft.exports;var pt=We[P]={exports:{}};return Ei[P](pt,pt.exports,Y),pt.exports}(function(){Y.d=function(P,ft){for(var pt in ft)Y.o(ft,pt)&&!Y.o(P,pt)&&Object.defineProperty(P,pt,{enumerable:!0,get:ft[pt]})}})(),function(){Y.o=function(P,ft){return Object.prototype.hasOwnProperty.call(P,ft)}}(),function(){Y.r=function(P){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})}}();var Te={};return function(){Y.r(Te),Y.d(Te,{bb:function(){return yi},default:function(){return yi}});var P={};Y.r(P),Y.d(P,{area:function(){return Us},areaLineRange:function(){return Zs},areaSpline:function(){return qs},areaSplineRange:function(){return Ks},areaStep:function(){return Js},bar:function(){return ri},bubble:function(){return li},candlestick:function(){return ci},donut:function(){return si},gauge:function(){return ii},line:function(){return Qs},pie:function(){return ai},polar:function(){return ni},radar:function(){return oi},scatter:function(){return di},spline:function(){return ti},step:function(){return ei},treemap:function(){return ui}});var ft={};Y.r(ft),Y.d(ft,{selection:function(){return _i},subchart:function(){return mi},zoom:function(){return $i}});var pt=Y(2),S=Y(3);function Li(){return typeof globalThis=="object"&&globalThis!==null&&globalThis.Object===Object&&globalThis||typeof global=="object"&&global!==null&&global.Object===Object&&global||typeof self=="object"&&self!==null&&self.Object===Object&&self||Function("return this")()}function Pi(e){const t=typeof(e==null?void 0:e.requestAnimationFrame)=="function"&&typeof(e==null?void 0:e.cancelAnimationFrame)=="function",s=typeof(e==null?void 0:e.requestIdleCallback)=="function"&&typeof(e==null?void 0:e.cancelIdleCallback)=="function",i=n=>setTimeout(n,1),a=n=>clearTimeout(n);return[t?e.requestAnimationFrame:i,t?e.cancelAnimationFrame:a,s?e.requestIdleCallback:i,s?e.cancelIdleCallback:a]}const j=Li(),it=j==null?void 0:j.document,[Oi,Jo,He,Qo]=Pi(j),k={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",POLAR:"polar",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step",TREEMAP:"treemap"},Ae={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",POLAR:"initPolar",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine",TREEMAP:"initTreemap"},Et={Area:[k.AREA,k.AREA_SPLINE,k.AREA_SPLINE_RANGE,k.AREA_LINE_RANGE,k.AREA_STEP],AreaRange:[k.AREA_SPLINE_RANGE,k.AREA_LINE_RANGE],Arc:[k.PIE,k.DONUT,k.GAUGE,k.POLAR,k.RADAR],Line:[k.LINE,k.SPLINE,k.AREA,k.AREA_SPLINE,k.AREA_SPLINE_RANGE,k.AREA_LINE_RANGE,k.STEP,k.AREA_STEP],Step:[k.STEP,k.AREA_STEP],Spline:[k.SPLINE,k.AREA_SPLINE,k.AREA_SPLINE_RANGE]};var ue=Y(4),Ii=Object.defineProperty,Ue=Object.getOwnPropertySymbols,Di=Object.prototype.hasOwnProperty,zi=Object.prototype.propertyIsEnumerable,Ze=(e,t,s)=>t in e?Ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,qe=(e,t)=>{for(var s in t||(t={}))Di.call(t,s)&&Ze(e,s,t[s]);if(Ue)for(var s of Ue(t))zi.call(t,s)&&Ze(e,s,t[s]);return e};const D=e=>e||e===0,E=e=>typeof e=="function",N=e=>typeof e=="string",C=e=>typeof e=="number",J=e=>typeof e=="undefined",G=e=>typeof e!="undefined",Ke=e=>typeof e=="boolean",Mi=e=>Math.ceil(e/10)*10,he=e=>Math.ceil(e)+.5,Mt=e=>e[1]-e[0],Tt=e=>typeof e=="object",mt=e=>J(e)||e===null||N(e)&&e.length===0||Tt(e)&&!(e instanceof Date)&&Object.keys(e).length===0||C(e)&&isNaN(e),Q=e=>!mt(e),M=e=>Array.isArray(e),F=e=>e&&!(e!=null&&e.nodeType)&&Tt(e)&&!M(e);function Lt(e,t,s){return G(e[t])?e[t]:s}function Fi(e,t){let s=!1;return Object.keys(e).forEach(i=>e[i]===t&&(s=!0)),s}function W(e,t,...s){const i=E(e);return i&&e.call(t,...s),i}function ge(e,t){let s=0;const i=function(...a){!--s&&t.apply(this,...a)};"duration"in e?e.each(()=>++s).on("end",i):(++s,e.call(i))}function we(e){return N(e)?e.replace(/<(script|img)?/ig,"&lt;").replace(/(script)?>/ig,"&gt;"):e}function ee(e,t,s=[-1,1],i=!1){if(!(!e||!N(t)))if(t.indexOf(`
`)===-1)e.text(t);else{const a=[e.text(),t].map(n=>n.replace(/[\s\n]/g,""));if(a[0]!==a[1]){const n=t.split(`
`),o=i?n.length-1:1;e.html(""),n.forEach((r,l)=>{e.append("tspan").attr("x",0).attr("dy",`${l===0?s[0]*o:s[1]}em`).text(r)})}}}function Je(e){const{x:t,y:s,width:i,height:a}=e.getBBox();return[{x:t,y:s+a},{x:t,y:s},{x:t+i,y:s},{x:t+i,y:s+a}]}function Qe(e){const{width:t,height:s}=e.getBoundingClientRect(),i=Je(e),a=i[0].x,n=Math.min(i[0].y,i[1].y);return{x:a,y:n,width:t,height:s}}function $t(e,t){var s;const i=e&&((s=e.touches||e.sourceEvent&&e.sourceEvent.touches)==null?void 0:s[0]);let a=[0,0];try{a=(0,S.pointer)(i||e,t)}catch(n){}return a.map(n=>isNaN(n)?0:n)}function ts(e){const{event:t,$el:s}=e,i=s.subchart.main||s.main;let a;return t&&t.type==="brush"?a=t.selection:i&&(a=i.select(".bb-brush").node())&&(a=(0,ue.brushSelection)(a)),a}function fe(e){return!("rect"in e)||"rect"in e&&e.hasAttribute("width")&&e.rect.width!==+e.getAttribute("width")?e.rect=e.getBoundingClientRect():e.rect}function wt(e=!0,t=0,s=1e4){const i=j.crypto||j.msCrypto,a=i?t+i.getRandomValues(new Uint32Array(1))[0]%(s-t+1):Math.floor(Math.random()*(s-t)+t);return e?String(a):a}function Se(e,t,s,i,a){if(s>i)return-1;const n=Math.floor((s+i)/2);let{x:o,w:r=0}=e[n];return a&&(o=e[n].y,r=e[n].h),t>=o&&t<=o+r?n:t<o?Se(e,t,s,n-1,a):Se(e,t,n+1,i,a)}function es(e){const t=ts(e);return t?t[0]===t[1]:!0}function Xi(...e){const t=s=>{if(F(s)&&s.constructor){const i=new s.constructor;for(const a in s)i[a]=t(s[a]);return i}return s};return e.map(s=>t(s)).reduce((s,i)=>qe(qe({},s),i))}function at(e={},t){M(t)&&t.forEach(s=>at(e,s));for(const s in t)/^\d+$/.test(s)||s in e||(e[s]=t[s]);return e}const ht=e=>e.charAt(0).toUpperCase()+e.slice(1);function Bi(e,t="-"){return e.split(t).map((s,i)=>i?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():s.toLowerCase()).join("")}const Ft=e=>[].slice.call(e);function Ni(e,t,s){const{rootSelector:i="",sheet:a}=e,o=`${i} ${(r=>r.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,"."))(t)} {${s.join(";")}}`;return a[a.insertRule?"insertRule":"addRule"](o,a.cssRules.length)}function Vi(e){let t=[];return e.forEach(s=>{var i;try{s.cssRules&&s.cssRules.length&&(t=t.concat(Ft(s.cssRules)))}catch(a){(i=j.console)==null||i.warn(`Error while reading rules from ${s.href}: ${a.toString()}`)}}),t}function ss(e){var t,s,i,a;return{x:((s=(t=j.pageXOffset)!=null?t:j.scrollX)!=null?s:0)+e.scrollLeft,y:((a=(i=j.pageYOffset)!=null?i:j.scrollY)!=null?a:0)+e.scrollTop}}function is(e){const t=e?e.transform:null,s=t&&t.baseVal;return s&&s.numberOfItems?s.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function Re(e){const t=e[0]instanceof Date,s=(t?e.map(Number):e).filter((i,a,n)=>n.indexOf(i)===a);return t?s.map(i=>new Date(i)):s}function Ce(e){return e&&e.length?e.reduce((t,s)=>t.concat(s)):[]}function Ht(e,...t){if(!t.length||t.length===1&&!t[0])return e;const s=t.shift();return F(e)&&F(s)&&Object.keys(s).forEach(i=>{const a=s[i];F(a)?(!e[i]&&(e[i]={}),e[i]=Ht(e[i],a)):e[i]=M(a)?a.concat():a}),Ht(e,...t)}function Ut(e,t=!0){let s;return e[0]instanceof Date?s=t?(i,a)=>i-a:(i,a)=>a-i:t&&!e.every(isNaN)?s=(i,a)=>i-a:t||(s=(i,a)=>i>a&&-1||i<a&&1||i===a&&0),e.concat().sort(s)}function yt(e,t){let s=t.filter(i=>Q(i));return s.length?C(s[0])?s=Math[e](...s):s[0]instanceof Date&&(s=Ut(s,e==="min")[0]):s=void 0,s}const pe=(e,t,s=1)=>{const i=[],a=Math.max(0,Math.ceil((t-e)/s))|0;for(let n=e;n<a;n++)i.push(e+n*s);return i},Gi={mouse:(()=>{const e=()=>({bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0});try{return new MouseEvent("t"),(t,s,i=e())=>{t.dispatchEvent(new MouseEvent(s,i))}}catch(t){return(s,i,a=e())=>{const n=it.createEvent("MouseEvent");n.initMouseEvent(i,a.bubbles,a.cancelable,j,0,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),s.dispatchEvent(n)}}})(),touch:(e,t,s)=>{const i=new Touch(Ht({identifier:Date.now(),target:e,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},s));e.dispatchEvent(new TouchEvent(t,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[i],targetTouches:[],changedTouches:[i]}))}};function xe(e,t){let s=e;for(const i in t)s=s.replace(new RegExp(`{=${i}}`,"g"),t[i]);return s}function xt(e){var t;let s;if(e instanceof Date)s=e;else if(N(e)){const{config:i,format:a}=this;s=(t=a.dataTime(i.data_xFormat)(e))!=null?t:new Date(e)}else C(e)&&!isNaN(e)&&(s=new Date(+e));return(!s||isNaN(+s))&&console&&console.error&&console.error(`Failed to parse x '${e}' to Date object`),s}function se(){var e,t;return((e=it)==null?void 0:e.hidden)===!1||((t=it)==null?void 0:t.visibilityState)==="visible"}function Yi(e,t){const{DocumentTouch:s,matchMedia:i,navigator:a}=j;let n=!1;if(t)if(a&&"maxTouchPoints"in a)n=a.maxTouchPoints>0;else if("ontouchmove"in j||s&&it instanceof s)n=!0;else if(i!=null&&i("(pointer:coarse)").matches)n=!0;else{const r=a.userAgent;n=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(r)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(r)}return e&&["any-hover:hover","any-pointer:fine"].some(r=>i==null?void 0:i(`(${r})`).matches)&&"mouse"||n&&"touch"||"mouse"}function as(e,t){t()===!1?Oi(()=>as(e,t)):e()}function ji(e){const t=e,{config:s}=t;let i="";if(mt(s.data_type||s.data_types)&&!t[Ae.LINE])i="line";else for(const a in Ae){const n=k[a];if(t.hasType(n)&&!t[Ae[a]]){i=n;break}}i&&Wi(`Please, make sure if %c${Bi(i)}`,"module has been imported and specified correctly.")}function Wi(e,t){var s;const i="[billboard.js]";throw((s=j.console)==null?void 0:s.error)&&(console.error(`\u274C ${i} ${e}`,"background:red;color:white;display:block;font-size:15px",t),console.info("%c\u2139\uFE0F","font-size:15px","https://github.com/naver/billboard.js/wiki/CHANGELOG-v2#modularization-by-its-functionality")),Error(`${i} ${e.replace(/\%c([a-z-]+)/i,"'$1' ")} ${t}`)}var Hi=Object.defineProperty,ns=Object.getOwnPropertySymbols,Ui=Object.prototype.hasOwnProperty,Zi=Object.prototype.propertyIsEnumerable,os=(e,t,s)=>t in e?Hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,U=(e,t)=>{for(var s in t||(t={}))Ui.call(t,s)&&os(e,s,t[s]);if(ns)for(var s of ns(t))Zi.call(t,s)&&os(e,s,t[s]);return e};const I={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"},B={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcRange:"bb-arc-range",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title",needle:"bb-needle"},_e={area:"bb-area",areas:"bb-areas"},et={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label"},bt={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"},St={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},rt={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},ke={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},Xt={dragarea:"bb-dragarea",INCLUDED:"_included_"},_t={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},V={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},Rt={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},vt={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},H={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},tt={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},Pt={level:"bb-level",levels:"bb-levels"},rs={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},ie={region:"bb-region",regions:"bb-regions"},Z={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},st={shape:"bb-shape",shapes:"bb-shapes"},ls={brush:"bb-brush",subchart:"bb-subchart"},ut={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"},me={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},Ee={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},Le={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"};var X=U(U(U(U(U(U(U(U(U(U(U(U(U(U(U(U(U(U(U(U(U(U(U(U({},I),B),_e),et),bt),St),rt),ke),Xt),_t),V),Rt),vt),H),tt),rs),ie),Z),st),ls),ut),me),Ee),Le);class qi{constructor(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null}}}class Ki{constructor(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,hasTreemap:!1,cssRule:{},current:{domain:void 0,width:0,height:0,dataMax:0,maxTickSize:{x:{width:0,height:0,ticks:[],clipPath:0,domain:""},y:{width:0,height:0,domain:""},y2:{width:0,height:0,domain:""}},types:[],needle:void 0},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",orgConfig:{},hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}}const cs={element:qi,state:Ki};class Ji{constructor(){Object.keys(cs).forEach(t=>{this[t]=new cs[t]})}getStore(t){return this[t]}}var Qi={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_mode:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,resize_timer:!0,onclick:void 0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},ta={boost_useCssRule:!1,boost_useWorker:!1},ea={data_x:void 0,data_idConverter:e=>e,data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_groupsZeroAs:"positive",data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:()=>{},data_onover:()=>{},data_onout:()=>{},data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},sa={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},ia={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},aa={legend_contents_bindto:void 0,legend_contents_template:"<span style='color:#fff;padding:5px;background-color:{=COLOR}'>{=TITLE}</span>",legend_equally:!1,legend_hide:!1,legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_interaction:!0,legend_item_dblclick:!1,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_item_tile_width:10,legend_item_tile_height:10,legend_item_tile_r:5,legend_item_tile_type:"rectangle",legend_format:void 0,legend_padding:0,legend_position:"bottom",legend_show:!0,legend_tooltip:!1,legend_usePoint:!1},na={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},oa={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:void 0,tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:()=>{},tooltip_onhide:()=>{},tooltip_onshown:()=>{},tooltip_onhidden:()=>{},tooltip_order:null},ra=Object.defineProperty,ds=Object.getOwnPropertySymbols,la=Object.prototype.hasOwnProperty,ca=Object.prototype.propertyIsEnumerable,Pe=(e,t,s)=>t in e?ra(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,us=(e,t)=>{for(var s in t||(t={}))la.call(t,s)&&Pe(e,s,t[s]);if(ds)for(var s of ds(t))ca.call(t,s)&&Pe(e,s,t[s]);return e},da=(e,t,s)=>(Pe(e,typeof t!="symbol"?t+"":t,s),s);const hs=class bi{static setOptions(t){this.data=t.reduce((s,i)=>us(us({},s),i),this.data)}constructor(){return Xi(Qi,ta,ea,sa,ia,aa,na,oa,bi.data)}};da(hs,"data",{});let Bt=hs;var ua=Object.defineProperty,ha=(e,t,s)=>t in e?ua(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ga=(e,t,s)=>(ha(e,typeof t!="symbol"?t+"":t,s),s);const gt={bubbleBaseLength:"$baseLength",colorPattern:"__colorPattern__",dataMinMax:"$dataMinMax",dataTotalSum:"$dataTotalSum",dataTotalPerIndex:"$totalPerIndex",legendItemTextBox:"legendItemTextBox",radarPoints:"$radarPoints",radarTextWidth:"$radarTextWidth",setOverOut:"setOverOut",callOverOutForTouch:"callOverOutForTouch",textRect:"textRect"};class fa{constructor(){ga(this,"cache",{})}add(t,s,i=!1){return this.cache[t]=i?this.cloneTarget(s):s,this.cache[t]}remove(t){(N(t)?[t]:t).forEach(s=>delete this.cache[s])}get(t,s=!1){if(s&&Array.isArray(t)){const i=[];for(let a=0,n;n=t[a];a++)n in this.cache&&i.push(this.cloneTarget(this.cache[n]));return i}else{const i=this.cache[t];return D(i)?i:null}}reset(t){const s=this;for(const i in s.cache)(t||/^\$/.test(i))&&(s.cache[i]=null)}cloneTarget(t){return{id:t.id,id_org:t.id_org,values:t.values.map(s=>({x:s.x,value:s.value,id:s.id}))}}}const{setTimeout:pa,clearTimeout:xa}=j;function _a(e){const t=[];let s;const i=function(){i.clear(),e===!1?He(()=>{t.forEach(a=>a())},{timeout:200}):s=pa(()=>{t.forEach(a=>a())},C(e)?e:200)};return i.clear=()=>{s&&(xa(s),s=null)},i.add=a=>t.push(a),i.remove=a=>t.splice(t.indexOf(a),1),i}function gs(){let e=[];const t=function(s,i){function a(){var n;let o=0;for(let r=0,l;l=e[r];r++){if(l===!0||(n=l.empty)!=null&&n.call(l)){o++;continue}if(se()===!1){o=e.length;break}try{l.transition()}catch(c){o++}}return o===e.length}as(()=>{i==null||i()},a)};return t.add=function(s){M(s)?e=e.concat(s):e.push(s)},t}const Oe={};function ma(e,t){var s;const i=e.toString(),a=i.replace(/(function|[\s\W\n])/g,"").substring(0,15);return a in Oe||(Oe[a]=new j.Blob([`${(s=t==null?void 0:t.map(String).join(";"))!=null?s:""}

			self.onmessage=function({data}) {
				const result = (${i}).apply(null, data);
				self.postMessage(result);
			};`],{type:"text/javascript"})),j.URL.createObjectURL(Oe[a])}function $a(e){const t=new j.Worker(e);return t.onerror=function(s){console.error?console.error(s):console.log(s)},t}function Ie(e=!0,t,s,i){let a=function(...n){const o=t(...n);s(o)};if(j.Worker&&e){const n=ma(t,i),o=$a(n);a=function(...r){o.postMessage(r),o.onmessage=function(l){return j.URL.revokeObjectURL(n),s(l.data)}}}return a}var $e=Y(5);function De(e){const t=[];return e.forEach(function(s,i){const a=s[0];s.forEach(function(n,o){if(o>0){if(typeof t[o-1]=="undefined"&&(t[o-1]={}),typeof n=="undefined")throw new Error(`Source data is missing a component at (${i}, ${o})!`);t[o-1][a]=n}})}),t}function ze(e){const t=e[0],s=[];return e.forEach(function(i,a){if(a>0){const n={};i.forEach(function(o,r){if(typeof o=="undefined")throw new Error(`Source data is missing a component at (${a}, ${r})!`);n[t[r]]=o}),s.push(n)}}),s}function fs(e,t){const s=[];let i,a;if(Array.isArray(e)){const n=function(o,r){if(o[r]!==void 0)return o[r];const c=r.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".");let u=o;return c.some(function(d){return!(u=u&&d in u?u[d]:void 0)}),u};t.x?i=t.value.concat(t.x):i=t.value,s.push(i),e.forEach(function(o){const r=i.map(function(l){let c=n(o,l);return typeof c=="undefined"&&(c=null),c});s.push(r)}),a=ze(s)}else Object.keys(e).forEach(function(n){var o;const r=e[n].concat();(o=r.unshift)==null||o.call(r,n),s.push(r)}),a=De(s);return a}function ya(e,t="csv",s,i,a){const n=new XMLHttpRequest,o={csv:ba,tsv:va,json:fs};n.open("GET",e),s&&Object.keys(s).forEach(function(r){n.setRequestHeader(r,s[r])}),n.onreadystatechange=function(){if(n.readyState===4)if(n.status===200){const r=n.responseText;r&&a.call(this,o[t](t==="json"?JSON.parse(r):r,i))}else throw new Error(`${e}: Something went wrong loading!`)},n.send()}function ps(e,t){const s=e.rows(t);let i;return s.length===1?(i=[{}],s[0].forEach(a=>{i[0][a]=null})):i=e.parse(t),i}function ba(e){return ps({rows:$e.csvParseRows,parse:$e.csvParse},e)}function va(e){return ps({rows:$e.tsvParseRows,parse:$e.tsvParse},e)}function xs(e,t){const s=e||(t==null?void 0:t.data_keys);return s!=null&&s.x&&(t.data_x=s.x),s}var Ta={convertData(e,t){const{config:s}=this,i=s.boost_useWorker;let a=e;if(e.bindto&&(a={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(n=>{const o=`data_${n}`;o in e&&(a[n]=e[o])})),a.url&&t)ya(a.url,a.mimeType,a.headers,xs(a.keys,s),t);else if(a.json)Ie(i,fs,t,[De,ze])(a.json,xs(a.keys,s));else if(a.rows)Ie(i,ze,t)(a.rows);else if(a.columns)Ie(i,De,t)(a.columns);else if(e.bindto)throw Error("url or json or rows or columns is required.")},convertDataToTargets(e,t){const s=this,{axis:i,config:a,state:n}=s,o=a.data_type;let r=!1,l=!1,c=!1;i&&(r=i.isCategorized(),l=i.isTimeSeries(),c=i.isCustomX());const u=Object.keys(e[0]||{}),d=u.length?u.filter(s.isNotX,s):[],h=u.length?u.filter(s.isX,s):[];let g;d.forEach(p=>{const _=this.getXKey(p);c||l?h.indexOf(_)>=0?g=(t&&s.data.xs[p]||[]).concat(e.map(x=>x[_]).filter(D).map((x,m)=>s.generateTargetX(x,p,m))):a.data_x?g=this.getOtherTargetXs():Q(a.data_xs)&&(g=s.getXValuesOfXKey(_,s.data.targets)):g=e.map((x,m)=>m),g&&(this.data.xs[p]=g)}),d.forEach(p=>{if(!this.data.xs[p])throw new Error(`x is not defined for id = "${p}".`)});const f=d.map((p,_)=>{const x=a.data_idConverter.bind(s.api)(p),m=s.getXKey(p),b=c&&r,y=b&&e.map(v=>v.x).every(v=>a.axis_x_categories.indexOf(v)>-1),T=e.__append__,$=m===null&&T?s.api.data.values(p).length:0;return{id:x,id_org:p,values:e.map((v,A)=>{const L=v[m];let w=v[p],z;return w=w!==null&&!isNaN(w)&&!F(w)?+w:M(w)||F(w)?w:null,(b||n.hasRadar)&&_===0&&!J(L)?(!y&&_===0&&A===0&&!T&&(a.axis_x_categories=[]),z=a.axis_x_categories.indexOf(L),z===-1&&(z=a.axis_x_categories.length,a.axis_x_categories.push(L))):z=s.generateTargetX(L,p,$+A),(J(w)||s.data.xs[p].length<=A)&&(z=void 0),{x:z,value:w,id:x,index:-1}}).filter(v=>G(v.x))}});if(f.forEach(p=>{var _;a.data_xSort&&(p.values=p.values.sort((x,m)=>{const b=x.x||x.x===0?x.x:1/0,y=m.x||m.x===0?m.x:1/0;return b-y})),p.values.forEach((x,m)=>x.index=m),(_=s.data.xs[p.id])==null||_.sort((x,m)=>x-m)}),n.hasNegativeValue=s.hasNegativeValueInTargets(f),n.hasPositiveValue=s.hasPositiveValueInTargets(f),o&&s.isValidChartType(o)){const p=s.mapToIds(f).filter(_=>!(_ in a.data_types)||!s.isValidChartType(a.data_types[_]));s.setTargetType(p,o)}return f.forEach(p=>s.cache.add(p.id_org,p,!0)),f}},Aa={isX(e){const t=this,{config:s}=t,i=s.data_x&&e===s.data_x,a=Q(s.data_xs)&&Fi(s.data_xs,e);return i||a},isNotX(e){return!this.isX(e)},isStackNormalized(){const{config:e}=this;return!!(e.data_stack_normalize&&e.data_groups.length)},isGrouped(e){const t=this.config.data_groups;return e?t.some(s=>s.indexOf(e)>=0&&s.length>1):t.length>0},getXKey(e){const t=this,{config:s}=t;return s.data_x?s.data_x:Q(s.data_xs)?s.data_xs[e]:null},getXValuesOfXKey(e,t){const s=this,i=t&&Q(t)?s.mapToIds(t):[];let a;return i.forEach(n=>{s.getXKey(n)===e&&(a=s.data.xs[n])}),a},getIndexByX(e,t){const s=this;return t?t.indexOf(N(e)?e:+e):(s.filterByX(s.data.targets,e)[0]||{index:null}).index},getXValue(e,t){const s=this;return e in s.data.xs&&s.data.xs[e]&&D(s.data.xs[e][t])?s.data.xs[e][t]:t},getOtherTargetXs(){const e=this,t=Object.keys(e.data.xs);return t.length?e.data.xs[t[0]]:null},getOtherTargetX(e){const t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null},addXs(e){const t=this,{config:s}=t;Object.keys(e).forEach(i=>{s.data_xs[i]=e[i]})},isMultipleX(){return Q(this.config.data_xs)||this.hasType("bubble")||this.hasType("scatter")},addName(e){const t=this,{config:s}=t;let i;return e&&(i=s.data_names[e.id],e.name=i!==void 0?i:e.id),e},getAllValuesOnIndex(e,t=!1){const s=this;let i=s.filterTargetsToShow(s.data.targets).map(a=>s.addName(s.getValueOnIndex(a.values,e)));return t&&(i=i.filter(a=>a&&"value"in a&&D(a.value))),i},getValueOnIndex(e,t){const s=e.filter(i=>i.index===t);return s.length?s[0]:null},updateTargetX(e,t){const s=this;e.forEach(i=>{i.values.forEach((a,n)=>{a.x=s.generateTargetX(t[n],i.id,n)}),s.data.xs[i.id]=t})},updateTargetXs(e,t){const s=this;e.forEach(i=>{t[i.id]&&s.updateTargetX([i],t[i.id])})},generateTargetX(e,t,s){const i=this,{axis:a}=i;let n=a!=null&&a.isCategorized()?s:e||s;if(a!=null&&a.isTimeSeries()){const o=xt.bind(i);n=o(e||i.getXValue(t,s))}else a!=null&&a.isCustomX()&&!(a!=null&&a.isCategorized())&&(n=D(e)?+e:i.getXValue(t,s));return n},updateXs(e){e.length&&(this.axis.xs=e.map(t=>t.x))},getPrevX(e){const t=this.axis.xs[e-1];return G(t)?t:null},getNextX(e){const t=this.axis.xs[e+1];return G(t)?t:null},getBaseValue(e){const t=this,{hasAxis:s}=t.state;let{value:i}=e;return i&&s&&(t.isAreaRangeType(e)?i=t.getRangedData(e,"mid"):t.isBubbleZType(e)&&(i=t.getBubbleZData(i,"y"))),i},getMinMaxValue(e){const t=this.getBaseValue.bind(this);let s,i;return(e||this.data.targets.map(a=>a.values)).forEach((a,n)=>{const o=a.map(t).filter(C);s=Math.min(n?s:1/0,...o),i=Math.max(n?i:-1/0,...o)}),{min:s,max:i}},getMinMaxData(){const e=this,t=gt.dataMinMax;let s=e.cache.get(t);if(!s){const i=e.data.targets.map(r=>r.values),a=e.getMinMaxValue(i);let n=[],o=[];i.forEach(r=>{const l=e.getFilteredDataByValue(r,a.min),c=e.getFilteredDataByValue(r,a.max);l.length&&(n=n.concat(l)),c.length&&(o=o.concat(c))}),e.cache.add(t,s={min:n,max:o})}return s},getTotalPerIndex(){const e=this,t=gt.dataTotalPerIndex;let s=e.cache.get(t);return(e.config.data_groups.length||e.isStackNormalized())&&!s&&(s=[],e.data.targets.forEach(i=>{i.values.forEach((a,n)=>{s[n]||(s[n]=0),s[n]+=C(a.value)?a.value:0})})),s},getTotalDataSum(e){const t=this,s=gt.dataTotalSum;let i=t.cache.get(s);if(!C(i)){const a=Ce(t.data.targets.map(n=>n.values)).map(n=>n.value);i=a.length?a.reduce((n,o)=>n+o):0,t.cache.add(s,i)}return e&&(i-=t.getHiddenTotalDataSum()),i},getHiddenTotalDataSum(){const e=this,{api:t,state:{hiddenTargetIds:s}}=e;let i=0;return s.length&&(i=t.data.values.bind(t)(s).reduce((a,n)=>a+n)),i},getFilteredDataByValue(e,t){return e.filter(s=>this.getBaseValue(s)===t)},getMaxDataCount(){return Math.max(...this.data.targets.map(e=>e.values.length),0)},getMaxDataCountTarget(){let e=this.filterTargetsToShow()||[];const t=e.length,s=this.config.axis_x_inverted;return t>1?(e=e.map(i=>i.values).reduce((i,a)=>i.concat(a)).map(i=>i.x),e=Ut(Re(e)).map((i,a,n)=>({x:i,index:s?n.length-a-1:a}))):t&&(e=e[0].values.concat()),e},mapToIds(e){return e.map(t=>t.id)},mapToTargetIds(e){const t=this;return e?M(e)?e.concat():[e]:t.mapToIds(t.data.targets)},hasTarget(e,t){const s=this.mapToIds(e);for(let i=0,a;a=s[i];i++)if(a===t)return!0;return!1},isTargetToShow(e){return this.state.hiddenTargetIds.indexOf(e)<0},isLegendToShow(e){return this.state.hiddenLegendIds.indexOf(e)<0},filterTargetsToShow(e){const t=this;return(e||t.data.targets).filter(s=>t.isTargetToShow(s.id))},mapTargetsToUniqueXs(e){const t=this,{axis:s}=t;let i=[];return e!=null&&e.length&&(i=Re(Ce(e.map(a=>a.values.map(n=>+n.x)))),i=s!=null&&s.isTimeSeries()?i.map(a=>new Date(+a)):i.map(Number)),Ut(i)},addTargetIds(e,t){const{state:s}=this;(M(t)?t:[t]).forEach(a=>{s[e].indexOf(a)<0&&s[e].push(a)})},removeTargetIds(e,t){const{state:s}=this;(M(t)?t:[t]).forEach(a=>{const n=s[e].indexOf(a);n>=0&&s[e].splice(n,1)})},addHiddenTargetIds(e){this.addTargetIds("hiddenTargetIds",e)},removeHiddenTargetIds(e){this.removeTargetIds("hiddenTargetIds",e)},addHiddenLegendIds(e){this.addTargetIds("hiddenLegendIds",e)},removeHiddenLegendIds(e){this.removeTargetIds("hiddenLegendIds",e)},getValuesAsIdKeyed(e){const t=this,{hasAxis:s}=t.state,i={},a=t.isMultipleX(),n=a?t.mapTargetsToUniqueXs(e).map(o=>N(o)?o:+o):null;return e.forEach(o=>{const r=[];o.values.filter(({value:l})=>D(l)||l===null).forEach(l=>{let{value:c}=l;c!==null&&t.isCandlestickType(l)&&(c=M(c)?c.slice(0,4):[c.open,c.high,c.low,c.close]),M(c)?r.push(...c):F(c)&&"high"in c?r.push(...Object.values(c)):t.isBubbleZType(l)?r.push(s&&t.getBubbleZData(c,"y")):a?r[t.getIndexByX(l.x,n)]=c:r.push(c)}),i[o.id]=r}),i},checkValueInTargets(e,t){const s=Object.keys(e);let i;for(let a=0;a<s.length;a++){i=e[s[a]].values;for(let n=0;n<i.length;n++)if(t(i[n].value))return!0}return!1},hasMultiTargets(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets(e){return this.checkValueInTargets(e,t=>t<0)},hasPositiveValueInTargets(e){return this.checkValueInTargets(e,t=>t>0)},orderTargets(e){const t=this,s=[...e],i=t.getSortCompareFn();return i&&s.sort(i),s},getSortCompareFn(e=!1){const t=this,{config:s}=t,i=s.data_order,a=/asc/i.test(i),n=/desc/i.test(i);let o;if(a||n){const r=(c,u)=>c+Math.abs(u.value),l=c=>C(c)?c:"values"in c?c.values.reduce(r,0):c.value;o=(c,u)=>{const d=l(c),h=l(u);return e?a?d-h:h-d:a?h-d:d-h}}else E(i)&&(o=i.bind(t.api));return o||null},filterByX(e,t){return Ce(e.map(s=>s.values)).filter(s=>s.x-t===0)},filterRemoveNull(e){return e.filter(t=>D(this.getBaseValue(t)))},filterByXDomain(e,t){return e.map(s=>({id:s.id,id_org:s.id_org,values:s.values.filter(i=>t[0]<=i.x&&i.x<=t[1])}))},hasDataLabel(){const e=this.config.data_labels;return Ke(e)&&e||Tt(e)&&Q(e)},getDataIndexFromEvent(e){const t=this,{$el:s,config:i,state:{hasRadar:a,inputType:n,eventReceiver:{coords:o,rect:r}}}=t;let l;if(a){let c=e.target;/tspan/i.test(c.tagName)&&(c=c.parentNode);const u=(0,S.select)(c).datum();l=u&&Object.keys(u).length===1?u.index:void 0}else{const c=i.axis_rotated,u=ss(s.chart.node()),d=n==="touch"&&e.changedTouches?e.changedTouches[0]:e;l=Se(o,c?d.clientY+u.y-r.top:d.clientX+u.x-r.left,0,o.length-1,c)}return l},getDataLabelLength(e,t,s){const i=this,a=[0,0],n=1.3;return i.$el.chart.select("svg").selectAll(".dummy").data([e,t]).enter().append("text").text(o=>i.dataLabelFormat(o.id)(o)).each(function(o,r){a[r]=this.getBoundingClientRect()[s]*n}).remove(),a},isNoneArc(e){return this.hasTarget(this.data.targets,e.id)},isArc(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},findSameXOfValues(e,t){const s=e[t].x,i=[];let a;for(a=t-1;a>=0&&s===e[a].x;a--)i.push(e[a]);for(a=t;a<e.length&&s===e[a].x;a++)i.push(e[a]);return i},findClosestFromTargets(e,t){const s=this,i=e.map(a=>s.findClosest(a.values,t));return s.findClosest(i,t)},findClosest(e,t){const s=this,{$el:{main:i}}=s,a=e.filter(r=>r&&D(r.value));let n,o;return a.filter(r=>s.isBarType(r.id)||s.isCandlestickType(r.id)).forEach(r=>{const l=s.isBarType(r.id)?`.${bt.chartBar}.${I.target}${s.getTargetSelectorSuffix(r.id)} .${bt.bar}-${r.index}`:`.${St.chartCandlestick}.${I.target}${s.getTargetSelectorSuffix(r.id)} .${St.candlestick}-${r.index} path`;!o&&s.isWithinBar(i.select(l).node())&&(o=r)}),a.filter(r=>!s.isBarType(r.id)&&!s.isCandlestickType(r.id)).forEach(r=>{const l=s.dist(r,t);n=s.getPointSensitivity(r),l<n&&(n=l,o=r)}),o},dist(e,t){const s=this,{config:{axis_rotated:i},scale:a}=s,n=+i,o=+!i,r=s.circleY(e,e.index),l=(a.zoom||a.x)(e.x);return Math.sqrt(Math.pow(l-t[n],2)+Math.pow(r-t[o],2))},convertValuesToStep(e){const t=this,{axis:s,config:i}=t,a=i.line_step_type,n=s?s.isCategorized():!1,o=M(e)?e.concat():[e];if(!(n||/step\-(after|before)/.test(a)))return e;if(o.length){const r=o[0],l=o[o.length-1],{id:c}=r;let{x:u}=r;o.unshift({x:--u,value:r.value,id:c}),n&&a==="step-after"&&o.unshift({x:--u,value:r.value,id:c}),u=l.x,o.push({x:++u,value:l.value,id:c}),n&&a==="step-before"&&o.push({x:++u,value:l.value,id:c})}return o},convertValuesToRange(e){const t=M(e)?e.concat():[e],s=[];return t.forEach(i=>{const{x:a,id:n}=i;s.push({x:a,id:n,value:i.value[0]}),s.push({x:a,id:n,value:i.value[2]})}),s},updateDataAttributes(e,t){const s=this,{config:i}=s,a=i[`data_${e}`];return J(t)||(Object.keys(t).forEach(n=>{a[n]=t[n]}),s.redraw({withLegend:!0})),a},getRangedData(e,t="",s="areaRange"){const i=e==null?void 0:e.value;if(M(i)){if(s==="bar")return i.reduce((a,n)=>n-a);{const a={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[s].indexOf(t);return a>=0&&i?i[a]:void 0}}else if(i&&t)return i[t];return i},setRatioForGroupedData(e){const t=this,{config:s}=t;if(s.data_groups.length&&e.some(i=>t.isGrouped(i.id))){const i=a=>t.getRatio("index",a,!0);e.forEach(a=>{"values"in a?a.values.forEach(i):i(a)})}},getRatio(e,t,s=!1){const i=this,{config:a,state:n}=i,o=i.api;let r=0;if(t&&o.data.shown().length)if(r=t.ratio||t.value,e==="arc")if(i.pie.padAngle()())r=t.value/i.getTotalDataSum(!0);else{const l=a.gauge_fullCircle?i.getArcLength():i.getStartingAngle()*-2,c=i.hasType("gauge")?l:Math.PI*2;r=(t.endAngle-t.startAngle)/c}else if(e==="index"){const l=o.data.values.bind(o);let c=this.getTotalPerIndex();if(n.hiddenTargetIds.length){let d=l(n.hiddenTargetIds,!1);d.length&&(d=d.reduce((h,g)=>h.map((f,p)=>(C(f)?f:0)+g[p])),c=c.map((h,g)=>h-d[g]))}const u=c[t.index];t.ratio=C(t.value)&&c&&u?t.value/u:0,r=t.ratio}else if(e==="radar")r=parseFloat(String(Math.max(t.value,0)))/n.current.dataMax*a.radar_size_ratio;else if(e==="bar"){const c=i.getYScaleById.bind(i)(t.id).domain().reduce((u,d)=>d-u);r=c===0?0:Math.abs(i.getRangedData(t,null,e)/c)}else e==="treemap"&&(r/=i.getTotalDataSum(!0));return s&&r?r*100:r},updateDataIndexByX(e){const t=this,s=e.reduce((i,a,n)=>(i[Number(a.x)]=n,i),{});t.data.targets.forEach(i=>{i.values.forEach((a,n)=>{let o=s[Number(a.x)];o===void 0&&(o=n),a.index=o})})},isBubbleZType(e){return this.isBubbleType(e)&&(F(e.value)&&("z"in e.value||"y"in e.value)||M(e.value)&&e.value.length>=2)},isBarRangeType(e){const t=this,{value:s}=e;return t.isBarType(e)&&M(s)&&s.length>=2&&s.every(i=>C(i))},getDataById(e){var t;const s=this.cache.get(e)||this.api.data(e);return(t=s==null?void 0:s[0])!=null?t:s}};function _s(e,t=!1){const s=this,{api:i}=s;t&&s.api.flush(!0),e==null||e.call(i)}var wa={load(e,t){const s=this,{axis:i,data:a,org:n,scale:o}=s,{append:r}=t,l={domain:null,currentDomain:null,x:null};let c=e;c&&(t.filter&&(c=c.filter(t.filter)),(t.type||t.types)&&c.forEach(u=>{var d;const h=((d=t.types)==null?void 0:d[u.id])||t.type;s.setTargetType(u.id,h)}),a.targets.forEach(u=>{for(let d=0;d<c.length;d++)if(u.id===c[d].id){u.values=r?u.values.concat(c[d].values):c[d].values,c.splice(d,1);break}}),a.targets=a.targets.concat(c)),s.updateTargets(a.targets),o.zoom&&(l.x=i.isCategorized()?o.x.orgScale():(n.xScale||o.x).copy(),l.domain=s.getXDomain(a.targets),l.x.domain(l.domain),l.currentDomain=s.zoom.getDomain(),s.withinRange(l.currentDomain,void 0,l.domain)||(o.x.domain(l.domain),o.zoom=null,s.$el.eventRect.property("__zoom",null))),s.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),o.zoom&&(n.xDomain=l.domain,n.xScale=l.x,i.isCategorized()&&(l.currentDomain=s.getZoomDomainValue(l.currentDomain),n.xDomain=s.getZoomDomainValue(n.xDomain),n.xScale=l.x.domain(n.xDomain)),s.updateCurrentZoomTransform(l.x,l.currentDomain)),s.updateTypesElements(),_s.call(s,t.done,t.resizeAfter)},loadFromArgs(e){const t=this;t.config&&(t.cache.reset(),t.convertData(e,s=>{const i=e.data||s;e.append&&(i.__append__=!0),i&&t.load(t.convertDataToTargets(i),e)}))},unload(e,t){var s;const i=this,{state:a,$el:n,$T:o}=i,r=!!((s=i.hasLegendDefsPoint)!=null&&s.call(i));let l=t,c=e;if(i.cache.reset(),l||(l=()=>{}),c=c.filter(d=>i.hasTarget(i.data.targets,d)),!c||c.length===0){l();return}const u=n.svg.selectAll(c.map(d=>i.selectorTarget(d)));o(u).style("opacity","0").remove().call(ge,l),c.forEach(d=>{var h;const g=i.getTargetSelectorSuffix(d);a.withoutFadeIn[d]=!1,n.legend&&n.legend.selectAll(`.${V.legendItem}${g}`).remove(),i.data.targets=i.data.targets.filter(f=>f.id!==d),r&&((h=n.defs)==null||h.select(`#${i.getDefsPointId(g)}`).remove())}),a.hasTreemap&&i.updateTargetsForTreemap(i.data.targets),i.updateTypesElements()}},ms=Y(6),Sa={setExpand(e,t,s){const i=this,{config:a,$el:{circle:n}}=i;n&&a.point_focus_expand_enabled&&i.expandCircles(e,t,s),i.expandBarTypeShapes(!0,e,t,s)},expandBarTypeShapes(e=!0,t,s,i){const a=this;["bar","candlestick"].filter(n=>a.$el[n]).forEach(n=>{i&&a.$el[n].classed(I.EXPANDED,!1),a.getShapeByIndex(n,t,s).classed(I.EXPANDED,e)})},setOverOut(e,t){const s=this,{config:i,state:{hasRadar:a,hasTreemap:n},$el:{main:o}}=s,r=F(t);if(r||t!==-1){const l=i[e?"data_onover":"data_onout"].bind(s.api);if(i.color_onover&&s.setOverColor(e,t,r),r){const c=n?Ee.treemap:B.arc;l(t,o.select(`.${c}${s.getTargetSelectorSuffix(t.id)}`).node())}else if(i.tooltip_grouped)e&&(a&&s.isPointFocusOnly()?s.showCircleFocus(s.getAllValuesOnIndex(t,!0)):s.setExpand(t,null,!0)),!s.isMultipleX()&&o.selectAll(`.${st.shape}-${t}`).each(function(c){l(c,this)});else{const c=s.cache.get(gt.setOverOut)||[],u=o.selectAll(`.${st.shape}-${t}`).filter(function(h){return s.isWithinShape(this,h)}),d=u.filter(function(){return c.every(h=>h!==this)});if(!e||u.empty()||c.length===d.size()&&d.nodes().every((h,g)=>h!==c[g]))for(;c.length;){const h=c.pop();i.data_onout.bind(s.api)((0,S.select)(h).datum(),h)}d.each(function(){e&&(l((0,S.select)(this).datum(),this),c.push(this))}),s.cache.add(gt.setOverOut,c)}}},callOverOutForTouch(e){const t=this,s=t.cache.get(gt.callOverOutForTouch);(F(e)&&s?e.id!==s.id:e!==s)&&((s||C(s))&&t.setOverOut(!1,s),(e||C(e))&&t.setOverOut(!0,e),t.cache.add(gt.callOverOutForTouch,e))},getDraggableSelection(){const e=this,{config:t,state:s}=e;return t.interaction_enabled&&t.data_selection_draggable&&e.drag?(0,ms.drag)().on("drag",function(i){s.event=i,e.drag($t(i,this))}).on("start",function(i){s.event=i,e.dragstart($t(i,this))}).on("end",i=>{s.event=i,e.dragend()}):()=>{}},dispatchEvent(e,t,s){var i,a;const n=this,{config:o,state:{eventReceiver:r,hasAxis:l,hasRadar:c,hasTreemap:u},$el:{eventRect:d,radar:h,treemap:g}}=n,f=(a=u&&r.rect||c&&h.axes.select(`.${et.axis}-${t} text`)||d||((i=n.getArcElementByIdOrIndex)==null?void 0:i.call(n,t)))==null?void 0:a.node();if(f){const p=n.isMultipleX(),_=o.axis_rotated;let{width:x,left:m,top:b}=f.getBoundingClientRect();if(l&&!c&&!p){const v=r.coords[t];v?(x=v.w,m+=v.x,b+=v.y):(x=0,m=0,b=0)}const y=m+(s?s[0]:0)+(p||_?0:x/2),T=b+(s?s[1]:0)+(_?4:0),$={screenX:y,screenY:T,clientX:y,clientY:T,bubbles:c};Gi[/^(mouse|click)/.test(e)?"mouse":"touch"](u?g.node():f,e,$)}},setDragStatus(e){this.state.dragging=e},unbindZoomEvent(){const e=this,{$el:{eventRect:t,zoomResetBtn:s}}=e;t==null||t.on(".zoom wheel.zoom .drag",null),s==null||s.on("click",null).style("display","none")},unbindAllEvents(){var e;const t=this,{$el:{arcs:s,eventRect:i,legend:a,region:n,svg:o,treemap:r},brush:l}=t,c=["wheel","click","mouseover","mousemove","mouseout","touchstart","touchmove","touchend","touchstart.eventRect","touchmove.eventRect","touchend.eventRect",".brush",".drag",".zoom","wheel.zoom","dblclick.zoom"].join(" ");[o,i,n==null?void 0:n.list,l==null?void 0:l.getSelection(),s==null?void 0:s.selectAll("path"),a==null?void 0:a.selectAll("g"),r].forEach(u=>u==null?void 0:u.on(c,null)),(e=t.unbindZoomEvent)==null||e.call(t)}},Ra={generateClass(e,t){return` ${e} ${e+this.getTargetSelectorSuffix(t)}`},getClass(e,t){const s=/s$/.test(e),i=/^(area|arc|line|treemap)s?$/.test(e),a=s?"id":"index";return n=>{const o=n.data||n;return((t?this.generateClass(X[s?"shapes":"shape"],o[a]):"")+this.generateClass(X[e],o[i?"id":a])).trim()}},getChartClass(e){return t=>X[`chart${e}`]+this.classTarget((t.data?t.data:t).id)},generateExtraLineClass(){const t=this.config.line_classes||[],s=[];return function(i){var a;const n=i.id||((a=i.data)==null?void 0:a.id)||i;return s.indexOf(n)<0&&s.push(n),t[s.indexOf(n)%t.length]}},classRegion(e,t){return`${this.generateClass(X.region,t)} ${"class"in e?e.class:""}`},classTarget(e){const t=this.config.data_classes[e];let s="";return t&&(s=` ${X.target}-${t}`),this.generateClass(X.target,e)+s},classFocus(e){return this.classFocused(e)+this.classDefocused(e)},classFocused(e){return` ${this.state.focusedTargetIds.indexOf(e.id)>=0?X.focused:""}`},classDefocused(e){return` ${this.state.defocusedTargetIds.indexOf(e.id)>=0?X.defocused:""}`},getTargetSelectorSuffix(e){return(e||e===0?`-${e}`:"").replace(/([\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"-")},selectorTarget(e,t="",s=""){const i=this.getTargetSelectorSuffix(e);return`${t}.${X.target+i} ${s}, ${t}.${X.circles+i} ${s}`},selectorTargets(e,t){const s=e||[];return s.length?s.map(i=>this.selectorTarget(i,t)):null},selectorLegend(e){return`.${X.legendItem+this.getTargetSelectorSuffix(e)}`},selectorLegends(e){return e!=null&&e.length?e.map(t=>this.selectorLegend(t)):null}},Ca={categoryName(e){var t;const{axis_x_categories:s}=this.config;return(t=s==null?void 0:s[e])!=null?t:e}},Ot=Y(7);const ka=(e,t,s)=>{const i=(0,S.select)(e.cloneNode(!0));return i.attr("id",s).insert("rect",":first-child").attr("width",i.attr("width")).attr("height",i.attr("height")).style("fill",t),{id:s,node:i.node()}};function Ea(e){const t=gt.colorPattern,{body:s}=it;let i=s[t];if(!i){const a=";",n=e.classed(ke.colorPattern,!0).style("background-image");e.classed(ke.colorPattern,!1),n.indexOf(a)>-1&&(i=n.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(a).map(o=>o.trim().replace(/[\"'\s]/g,"")).filter(Boolean),s[t]=i)}return i}const La=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];var Pa={generateColor(){const e=this,{$el:t,config:s}=e,i=s.data_colors,a=s.data_color,n=[];let o=Q(s.color_pattern)?s.color_pattern:(0,Ot.scaleOrdinal)(Ea(t.chart)||La).range();const r=o;if(E(s.color_tiles)){const l=s.color_tiles.bind(e.api)(),c=o.map((u,d)=>{const h=u.replace(/[#\(\)\s,]/g,""),g=`${e.state.datetimeId}-pattern-${h}-${d}`;return ka(l[d%l.length],u,g)});o=c.map(u=>`url(#${u.id})`),e.patterns=c}return function(l){var c;const u=l.id||((c=l.data)==null?void 0:c.id)||l,d=e.isTypeOf(u,["line","spline","step"])||!s.data_types[u];let h;return E(i[u])?h=i[u].bind(e.api)(l):i[u]?h=i[u]:(n.indexOf(u)<0&&n.push(u),h=d?r[n.indexOf(u)%r.length]:o[n.indexOf(u)%o.length],i[u]=h),E(a)?a.bind(e.api)(h,l):h}},generateLevelColor(){const e=this,{config:t}=e,s=t.color_pattern,i=t.color_threshold,a=i.unit==="value",n=i.max||100,o=i.values&&i.values.length?i.values:[];return Q(i)?function(r){const l=a?r:r*100/n;let c=s[s.length-1];for(let u=0,d=o.length;u<d;u++)if(l<=o[u]){c=s[u];break}return c}:null},generateDataLabelBackgroundColorFilter(e){const t=this,{$el:s,config:i,state:a}=t,n=e||i.data_labels_backgroundColors;if(n){let o=[];N(n)?o.push(""):F(n)&&(o=Object.keys(n)),o.forEach(r=>{const l=`${a.datetimeId}-labels-bg${t.getTargetSelectorSuffix(r)}${e?t.getTargetSelectorSuffix(e):""}`;s.defs.append("filter").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("id",l).html(`<feFlood flood-color="${r===""?n:n[r]}" /><feComposite in="SourceGraphic"/>`)})}},getGradienColortUrl(e){return`url(#${this.state.datetimeId}-gradient${this.getTargetSelectorSuffix(e)})`},updateLinearGradient(){const e=this,{config:t,data:{targets:s},state:{datetimeId:i},$el:{defs:a}}=e;s.forEach(n=>{const o=`${i}-gradient${e.getTargetSelectorSuffix(n.id)}`,r=e.hasPointType()&&t.point_radialGradient,l=e.isAreaType(n)&&"area"||e.isBarType(n)&&"bar";if((r||l)&&a.select(`#${o}`).empty()){const c=e.color(n),u={defs:null,stops:[]};if(r){const{cx:d=.3,cy:h=.3,r:g=.7,stops:f=[[.1,c,0],[.9,c,1]]}=r;u.stops=f,u.defs=a.append("radialGradient").attr("id",`${o}`).attr("cx",d).attr("cy",h).attr("r",g)}else{const d=t.axis_rotated,{x:h=d?[1,0]:[0,0],y:g=d?[0,0]:[0,1],stops:f=[[0,c,1],[1,c,0]]}=t[`${l}_linearGradient`];u.stops=f,u.defs=a.append("linearGradient").attr("id",`${o}`).attr("x1",h[0]).attr("x2",h[1]).attr("y1",g[0]).attr("y2",g[1])}u.stops.forEach(d=>{const[h,g,f]=d,p=E(g)?g.bind(e.api)(n.id):g;u.defs&&u.defs.append("stop").attr("offset",h).attr("stop-color",p||c).attr("stop-opacity",f)})}})},setOverColor(e,t){const s=this,{config:i,$el:{main:a}}=s,n=i.color_onover;let o=e?n:s.color;F(o)?o=({id:r})=>r in n?n[r]:s.color(r):N(o)?o=()=>n:E(n)&&(o=o.bind(s.api)),a.selectAll(F(t)?`.${B.arc}${s.getTargetSelectorSuffix(t.id)}`:`.${st.shape}-${t}`).style("fill",o)}},Oa={getYDomainMinMax(e,t){const s=this,{axis:i,config:a}=s,n=t==="min",o=a.data_groups,r=s.mapToIds(e),l=s.getValuesAsIdKeyed(e);if(o.length>0){const c=s[`has${n?"Negative":"Positive"}ValueInTargets`](e);o.forEach(u=>{const d=u.filter(h=>r.indexOf(h)>=0);if(d.length){const h=d[0],g=i.getId(h);c&&l[h]&&(l[h]=l[h].map(f=>(n?f<0:f>0)?f:0)),d.filter((f,p)=>p>0).forEach(f=>{if(l[f]){const p=i.getId(f);l[f].forEach((_,x)=>{const m=+_,b=n?m>0:m<0;p===g&&!(c&&b)&&(l[h][x]+=m)})}})}})}return yt(t,Object.keys(l).map(c=>yt(t,l[c])))},isHiddenTargetWithYDomain(e){const t=this;return t.state.hiddenTargetIds.some(s=>t.axis.getId(s)===e)},getYDomain(e,t,s){const i=this,{axis:a,config:n,scale:o}=i,r=`axis_${t}`;if(i.isStackNormalized())return[0,100];const l=(o==null?void 0:o[t])&&o[t].type==="log",c=e.filter(w=>a.getId(w.id)===t),u=s?i.filterByXDomain(c,s):c;if(u.length===0)return i.isHiddenTargetWithYDomain(t)?o[t].domain():t==="y2"?o.y.domain():i.getYDomain(e,"y2",s);const d=n[`${r}_min`],h=n[`${r}_max`],g=n[`${r}_center`],f=n[`${r}_inverted`],p=i.hasDataLabel()&&n.axis_rotated,_=i.hasDataLabel()&&!n.axis_rotated;let x=i.getYDomainMinMax(u,"min"),m=i.getYDomainMinMax(u,"max"),b=[k.BAR,k.BUBBLE,k.SCATTER,...Et.Line].some(w=>{const z=w.indexOf("area")>-1?"area":w;return i.hasType(w,u,!0)&&n[`${z}_zerobased`]});x=D(d)?d:D(h)?x<=h?x:h-10:x,m=D(h)?h:D(d)?d<=m?m:d+10:m,isNaN(x)&&(x=0),isNaN(m)&&(m=x),x===m&&(x<0?m=0:x=0);const y=x>=0&&m>=0,T=x<=0&&m<=0;(D(d)&&y||D(h)&&T)&&(b=!1),b&&(y&&(x=0),T&&(m=0));const $=Math.abs(m-x);let v={top:$*.1,bottom:$*.1};if(G(g)){const w=Math.max(Math.abs(x),Math.abs(m));m=g+w,x=g-w}if(p){const w=Mt(o.y.range()),z=i.getDataLabelLength(x,m,"width").map(R=>R/w);["bottom","top"].forEach((R,O)=>{v[R]+=$*(z[O]/(1-z[0]-z[1]))})}else if(_){const w=i.getDataLabelLength(x,m,"height");["bottom","top"].forEach((z,R)=>{v[z]+=i.convertPixelToScale("y",w[R],$)})}v=i.getResettedPadding(v);const A=n[`${r}_padding`];Q(A)&&["bottom","top"].forEach(w=>{v[w]=a.getPadding(A,w,v[w],$)}),b&&(y&&(v.bottom=x),T&&(v.top=-m));const L=l?[x,m].map(w=>w<0?0:w):[x-v.bottom,m+v.top];return f?L.reverse():L},getXDomainMinMax(e,t){var s;const i=this,a=i.config[`axis_x_${t}`],n=yt(t,e.map(r=>yt(t,r.values.map(l=>l.x))));let o=F(a)?a.value:a;return o=G(o)&&((s=i.axis)!=null&&s.isTimeSeries())?xt.bind(this)(o):o,F(a)&&a.fit&&(t==="min"&&o<n||t==="max"&&o>n)&&(o=void 0),G(o)?o:n},getXDomainPadding(e,t){const s=this,{axis:i,config:a}=s,n=a.axis_x_padding,o=i.isTimeSeries()&&t,r=Mt(e);let l;if(i.isCategorized()||o)l=0;else if(s.hasType("bar")){const d=s.getMaxDataCount();l=d>1?r/(d-1)/2:.5}else l=s.getResettedPadding(r*.01);let{left:c=l,right:u=l}=C(n)?{left:n,right:n}:n;if(n.unit==="px"){const d=Math.abs(r+r*.2);c=i.getPadding(n,"left",l,d),u=i.getPadding(n,"right",l,d)}else{const d=r+c+u;if(o&&d){const h=r/t/d;c=c/d/h,u=u/d/h}}return{left:c,right:u}},getXDomain(e){const t=this,{axis:s,config:i,scale:{x:a}}=t,n=i.axis_x_inverted,o=[t.getXDomainMinMax(e,"min"),t.getXDomainMinMax(e,"max")];let[r=0,l=0]=o;if(a.type!=="log"){const c=s.isCategorized(),u=s.isTimeSeries(),d=t.getXDomainPadding(o);let[h,g]=o;h-g===0&&!c&&(u?(h=new Date(h.getTime()*.5),g=new Date(g.getTime()*1.5)):(h=h===0?1:h*.5,g=g===0?-1:g*1.5)),(h||h===0)&&(r=u?new Date(h.getTime()-d.left):h-d.left),(g||g===0)&&(l=u?new Date(g.getTime()+d.right):g+d.right)}return n?[l,r]:[r,l]},updateXDomain(e,t,s,i,a){var n;const o=this,{config:r,org:l,scale:{x:c,subX:u}}=o,d=r.zoom_enabled;if(s&&(c.domain(a||Ut(o.getXDomain(e),!r.axis_x_inverted)),l.xDomain=c.domain(),u.domain(c.domain()),(n=o.brush)==null||n.scale(u)),t){const h=a||!o.brush||es(o)?l.xDomain:ts(o).map(u.invert);c.domain(h)}return(s||t)&&d&&o.zoom.updateScaleExtent(),i&&c.domain(o.trimXDomain(c.orgDomain())),c.domain()},trimXDomain(e){const t=this,s=t.config.axis_x_inverted,i=t.getZoomDomain(),[a,n]=i;return(s?e[0]>=a:e[0]<=a)&&(e[1]=+e[1]+(a-e[0]),e[0]=a),(s?e[1]<=n:e[1]>=n)&&(e[0]=+e[0]-(e[1]-n),e[1]=n),e},getZoomDomain(e="zoom",t=!1){const s=this,{config:i,scale:a,org:n}=s;let[o,r]=t&&a[e]?a[e].domain():n.xDomain;return e==="zoom"&&(G(i.zoom_x_min)&&(o=yt("min",[o,i.zoom_x_min])),G(i.zoom_x_max)&&(r=yt("max",[r,i.zoom_x_max]))),[o,r]},getZoomDomainValue(e){const t=this,{config:s,axis:i}=t;if(i.isCategorized()&&Array.isArray(e)){const a=s.axis_x_inverted;return e.map((o,r)=>Number(o)+(r===0?+a:+!a))}return e},convertPixelToScale(e,t,s){const i=this,{config:a,state:n}=i,o=a.axis_rotated;let r;return e==="x"?r=o?"height":"width":r=o?"width":"height",s*(t/n[r])},withinRange(e,t=[0,0],s){const a=this.config.axis_x_inverted,[n,o]=s;if(Array.isArray(e)){const r=[...e];if(a&&r.reverse(),r[0]<r[1])return e.every((l,c)=>(c===0?a?+l<=n:+l>=n:a?+l>=o:+l<=o)&&!e.every((u,d)=>u===t[d]))}return!1}};function $s(e,t,s){const{config:i}=e,a=`axis_${t}_tick_format`;return(i[a]?i[a]:e.defaultValueFormat).call(e.api,s)}var Ia={yFormat(e){return $s(this,"y",e)},y2Format(e){return $s(this,"y2",e)},getDefaultValueFormat(){const e=this,{defaultArcValueFormat:t,yFormat:s,y2Format:i}=e,a=e.hasArcType(null,["gauge","polar","radar"]);return function(n,o,r){return(a?t:e.axis&&e.axis.getId(r)==="y2"?i:s).call(e,n,o)}},defaultValueFormat(e){return M(e)?e.join("~"):D(e)?+e:""},defaultArcValueFormat(e,t){return`${(t*100).toFixed(1)}%`},defaultPolarValueFormat(e){return`${e}`},dataLabelFormat(e){const t=this,s=t.config.data_labels,i=n=>{const o="~";let r=n;return M(n)?r=n.join(o):F(n)&&(r=Object.values(n).join(o)),r};let a=i;return E(s.format)?a=s.format:Tt(s.format)&&(s.format[e]?a=s.format[e]===!0?i:s.format[e]:a=()=>""),a.bind(t.api)}};function ye(e){const t=this,s=t.getDataById(e);return t.levelColor?t.levelColor(s.values[0].value):t.color(s)}function Me(e,t=!0){var s;const{config:i}=this;let a=(s=i.data_names[e])!=null?s:e;return t&&E(i.legend_format)&&(a=i.legend_format(a)),a}var Da={initLegend(){const e=this,{config:t,$el:s}=e;e.legendItemTextBox={},e.state.legendHasRendered=!1,t.legend_show?(t.legend_contents_bindto||(s.legend=e.$el.svg.append("g").classed(V.legend,!0).attr("transform",e.getTranslate("legend"))),e.updateLegend()):e.state.hiddenLegendIds=e.mapToIds(e.data.targets)},updateLegend(e,t,s){var i;const a=this,{config:n,state:o,scale:r,$el:l}=a,c=t||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};c.withTransition=Lt(c,"withTransition",!0),c.withTransitionForTransform=Lt(c,"withTransitionForTransform",!0),n.legend_contents_bindto&&n.legend_contents_template?a.updateLegendTemplate():o.hasTreemap||a.updateLegendElement(e||a.mapToIds(a.data.targets),c,s),(i=l.legend)==null||i.selectAll(`.${V.legendItem}`).classed(V.legendItemHidden,function(u){const d=!a.isTargetToShow(u);return d&&(this.style.opacity=null),d}),a.updateScales(!1,!r.zoom),a.updateSvgSize(),a.transformAll(c.withTransitionForTransform,s),o.legendHasRendered=!0},updateLegendTemplate(){const e=this,{config:t,$el:s}=e,i=(0,S.select)(t.legend_contents_bindto),a=t.legend_contents_template;if(!i.empty()){const n=e.mapToIds(e.data.targets),o=[];let r="";n.forEach(c=>{const u=E(a)?a.bind(e.api)(c,e.color(c),e.api.data(c)[0].values):xe(a,{COLOR:e.color(c),TITLE:c});u&&(o.push(c),r+=u)});const l=i.html(r).selectAll(function(){return this.childNodes}).data(o);e.setLegendItem(l),s.legend=i}},updateSizeForLegend(e){const t=this,{config:s,state:{isLegendTop:i,isLegendLeft:a,isLegendRight:n,isLegendInset:o,current:r}}=t,{width:l,height:c}=e,u={top:i?t.getCurrentPaddingByDirection("top")+s.legend_inset_y+5.5:r.height-c-t.getCurrentPaddingByDirection("bottom")-s.legend_inset_y,left:a?t.getCurrentPaddingByDirection("left")+s.legend_inset_x+.5:r.width-l-t.getCurrentPaddingByDirection("right")-s.legend_inset_x+.5};t.state.margin3={top:n?0:o?u.top:r.height-c,right:NaN,bottom:0,left:n?r.width-l:o?u.left:0}},transformLegend(e){const t=this,{$el:{legend:s},$T:i}=t;i(s,e).attr("transform",t.getTranslate("legend"))},updateLegendStep(e){this.state.legendStep=e},updateLegendItemWidth(e){this.state.legendItemWidth=e},updateLegendItemHeight(e){this.state.legendItemHeight=e},updateLegendItemColor(e,t){const{legend:s}=this.$el;s&&s.select(`.${V.legendItem}-${e} line`).style("stroke",t)},getLegendWidth(){const e=this,{current:{width:t},isLegendRight:s,isLegendInset:i,legendItemWidth:a,legendStep:n}=e.state;return e.config.legend_show?s||i?a*(n+1):t:0},getLegendHeight(){var e;const t=this,{current:s,isLegendRight:i,legendItemHeight:a,legendStep:n}=t.state,o=((e=t.config.padding)==null?void 0:e.mode)==="fit";return t.config.legend_show?i?s.height:(o?10:Math.max(20,a))*(n+1):0},opacityForUnfocusedLegend(e){return e.classed(V.legendItemHidden)?null:"0.3"},toggleFocusLegend(e,t){const s=this,{$el:{legend:i},$T:a}=s,n=s.mapToTargetIds(e);i&&a(i.selectAll(`.${V.legendItem}`).filter(o=>n.indexOf(o)>=0).classed(H.legendItemFocused,t)).style("opacity",function(){return t?null:s.opacityForUnfocusedLegend.call(s,(0,S.select)(this))})},revertLegend(){const e=this,{$el:{legend:t},$T:s}=e;t&&s(t.selectAll(`.${V.legendItem}`).classed(H.legendItemFocused,!1)).style("opacity",null)},showLegend(e){const t=this,{config:s,$el:i,$T:a}=t;s.legend_show||(s.legend_show=!0,i.legend?i.legend.style("visibility",null):t.initLegend(),!t.state.legendHasRendered&&t.updateLegend()),t.removeHiddenLegendIds(e),a(i.legend.selectAll(t.selectorLegends(e)).style("visibility",null)).style("opacity",null)},hideLegend(e){const t=this,{config:s,$el:{legend:i}}=t;s.legend_show&&mt(e)&&(s.legend_show=!1,i.style("visibility","hidden")),t.addHiddenLegendIds(e),i.selectAll(t.selectorLegends(e)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox(e,t){const s=this,{cache:i,state:a}=s;let n;const o=gt.legendItemTextBox;return e&&(n=!a.redrawing&&i.get(o)||{},n[e]||(n[e]=s.getTextRect(t,V.legendItem),i.add(o,n)),n=n[e]),n},setLegendItem(e){const t=this,{$el:s,api:i,config:a,state:n}=t,o=n.inputType==="touch",r=t.hasType("gauge"),l=a.boost_useCssRule,c=a.legend_item_interaction;e.attr("class",function(u){const d=(0,S.select)(this);return(!d.empty()&&d.attr("class")||"")+t.generateClass(V.legendItem,u)}).style("visibility",u=>t.isLegendToShow(u)?null:"hidden"),a.interaction_enabled&&(l&&[[`.${V.legendItem}`,"cursor:pointer"],[`.${V.legendItem} text`,"pointer-events:none"],[`.${V.legendItemPoint} text`,"pointer-events:none"],[`.${V.legendItemTile}`,"pointer-events:none"],[`.${V.legendItemEvent}`,"fill-opacity:0"]].forEach(u=>{const[d,h]=u;t.setCssRule(!1,d,[h])(s.legend)}),e.on(c.dblclick?"dblclick":"click",c||E(a.legend_item_onclick)?function(u,d){if(!W(a.legend_item_onclick,i,d)){const{altKey:h,target:g,type:f}=u;f==="dblclick"||h?n.hiddenTargetIds.length&&g.parentNode.getAttribute("class").indexOf(V.legendItemHidden)===-1?i.show():(i.hide(),i.show(d)):(i.toggle(d),(0,S.select)(this).classed(H.legendItemFocused,!1))}o&&t.hideTooltip()}:null),!o&&e.on("mouseout",c||E(a.legend_item_onout)?function(u,d){W(a.legend_item_onout,i,d)||((0,S.select)(this).classed(H.legendItemFocused,!1),r&&t.undoMarkOverlapped(t,`.${_t.gaugeValue}`),t.api.revert())}:null).on("mouseover",c||E(a.legend_item_onover)?function(u,d){W(a.legend_item_onover,i,d)||((0,S.select)(this).classed(H.legendItemFocused,!0),r&&t.markOverlapped(d,t,`.${_t.gaugeValue}`),!n.transiting&&t.isTargetToShow(d)&&i.focus(d))}:null),!e.empty()&&e.on("click mouseout mouseover")&&e.style("cursor",t.getStylePropValue("pointer")))},updateLegendElement(e,t){const s=this,{config:i,state:a,$el:{legend:n},$T:o}=s,l=i.legend_item_tile_type!=="circle",c=i.legend_item_tile_r,u={width:l?i.legend_item_tile_width:c*2,height:l?i.legend_item_tile_height:c*2},d={padding:{top:4,right:10},max:{width:0,height:0},posMin:10,step:0,tileWidth:u.width+5,totalLength:0},h={offsets:{},widths:{},heights:{},margins:[0],steps:{}};let g,f,p;const _=e.filter($=>!G(i.data_names[$])||i.data_names[$]!==null),x=t.withTransition,m=s.getUpdateLegendPositions(_,d,h);a.isLegendInset&&(d.step=i.legend_inset_step?i.legend_inset_step:_.length,s.updateLegendStep(d.step)),a.isLegendRight?(g=$=>d.max.width*h.steps[$],f=$=>h.margins[h.steps[$]]+h.offsets[$]):a.isLegendInset?(g=$=>d.max.width*h.steps[$]+10,f=$=>h.margins[h.steps[$]]+h.offsets[$]):(g=$=>h.margins[h.steps[$]]+h.offsets[$],f=$=>d.max.height*h.steps[$]);const b={xText:($,v)=>g($,v)+4+u.width,xRect:($,v)=>g($,v),x1Tile:($,v)=>g($,v)-2,x2Tile:($,v)=>g($,v)-2+u.width,yText:($,v)=>f($,v)+9,yRect:($,v)=>f($,v)-5,yTile:($,v)=>f($,v)+4};s.generateLegendItem(_,u,m,b),p=n.select(`.${V.legendBackground} rect`),a.isLegendInset&&d.max.width>0&&p.size()===0&&(p=n.insert("g",`.${V.legendItem}`).attr("class",V.legendBackground).append("rect")),i.legend_tooltip&&n.selectAll("title").data(_).text($=>Me.bind(s)($,!1));const y=n.selectAll("text").data(_).text($=>Me.bind(s)($)).each(function($,v){m(this,$,v)});o(y,x).attr("x",b.xText).attr("y",b.yText);const T=n.selectAll(`rect.${V.legendItemEvent}`).data(_);o(T,x).attr("width",$=>h.widths[$]).attr("height",$=>h.heights[$]).attr("x",b.xRect).attr("y",b.yRect),s.updateLegendItemPos(_,x,b),p&&o(p,x).attr("height",s.getLegendHeight()-12).attr("width",d.max.width*(d.step+1)+10),s.updateLegendItemWidth(d.max.width),s.updateLegendItemHeight(d.max.height),s.updateLegendStep(d.step)},getUpdateLegendPositions(e,t,s){const i=this,{config:a,state:n}=i,o=n.isLegendRight||n.isLegendInset;return function(r,l,c){const u=c===0,d=c===e.length-1,h=i.getLegendItemTextBox(l,r),g=h.width+t.tileWidth+(d&&!o?0:t.padding.right)+a.legend_padding,f=h.height+t.padding.top,p=o?f:g,_=o?i.getLegendHeight():i.getLegendWidth();let x;const m=function(y,T){T||(x=(_-t.totalLength-p)/2,x<t.posMin&&(x=(_-p)/2,t.totalLength=0,t.step++)),s.steps[y]=t.step,s.margins[t.step]=n.isLegendInset?10:x,s.offsets[y]=t.totalLength,t.totalLength+=p};if(u&&(t.totalLength=0,t.step=0,t.max.width=0,t.max.height=0),a.legend_show&&!i.isLegendToShow(l)){s.widths[l]=0,s.heights[l]=0,s.steps[l]=0,s.offsets[l]=0;return}s.widths[l]=g,s.heights[l]=f,(!t.max.width||g>=t.max.width)&&(t.max.width=g),(!t.max.height||f>=t.max.height)&&(t.max.height=f);const b=o?t.max.height:t.max.width;a.legend_equally?(Object.keys(s.widths).forEach(y=>s.widths[y]=t.max.width),Object.keys(s.heights).forEach(y=>s.heights[y]=t.max.height),x=(_-b*e.length)/2,x<t.posMin?(t.totalLength=0,t.step=0,e.forEach(y=>m(y))):m(l,!0)):m(l)}},generateLegendItem(e,t,s,i){const a=this,{config:n,state:o,$el:{legend:r}}=a,l=n.legend_usePoint,c=n.legend_item_tile_r,u=n.legend_item_tile_type,d=u!=="circle",h=o.isLegendRight||o.isLegendInset,g=-200,f=r.selectAll(`.${V.legendItem}`).data(e).enter().append("g");if(a.setLegendItem(f),n.legend_tooltip&&f.append("title").text(p=>p),f.append("text").text(p=>Me.bind(a)(p)).each(function(p,_){s(this,p,_)}).style("pointer-events",a.getStylePropValue("none")).attr("x",h?i.xText:g).attr("y",h?g:i.yText),f.append("rect").attr("class",V.legendItemEvent).style("fill-opacity",a.getStylePropValue("0")).attr("x",h?i.xRect:g).attr("y",h?g:i.yRect),l){const p=[];f.append(_=>{const x=Q(n.point_pattern)?n.point_pattern:[n.point_type];p.indexOf(_)===-1&&p.push(_);let m=x[p.indexOf(_)%x.length];return m==="rectangle"&&(m="rect"),it.createElementNS(S.namespaces.svg,"hasValidPointType"in a&&a.hasValidPointType(m)?m:"use")}).attr("class",V.legendItemPoint).style("fill",ye.bind(a)).style("pointer-events",a.getStylePropValue("none")).attr("href",(_,x,m)=>{const y=m[x].nodeName.toLowerCase(),T=a.getTargetSelectorSuffix(_);return y==="use"?`#${o.datetimeId}-point${T}`:void 0})}else f.append(d?"line":u).attr("class",V.legendItemTile).style("stroke",ye.bind(a)).style("pointer-events",a.getStylePropValue("none")).call(p=>{u==="circle"?p.attr("r",c).style("fill",ye.bind(a)).attr("cx",h?i.x2Tile:g).attr("cy",h?g:i.yTile):d&&p.attr("stroke-width",t.height).attr("x1",h?i.x1Tile:g).attr("y1",h?g:i.yTile).attr("x2",h?i.x2Tile:g).attr("y2",h?g:i.yTile)})},updateLegendItemPos(e,t,s){const i=this,{config:a,$el:{legend:n},$T:o}=i,r=a.legend_usePoint,l=a.legend_item_tile_type,c=l!=="circle";if(r){const u=n.selectAll(`.${V.legendItemPoint}`).data(e);o(u,t).each(function(){const d=this.nodeName.toLowerCase(),h=a.point_r;let g="x",f="y",p=2,_=2.5,x=null,m=null,b=null;if(d==="circle"){const y=h*.2;g="cx",f="cy",x=h+y,p=h*2,_=-y}else if(d==="rect"){const y=h*2.5;m=y,b=y,_=3}(0,S.select)(this).attr(g,y=>s.x1Tile(y)+p).attr(f,y=>s.yTile(y)-_).attr("r",x).attr("width",m).attr("height",b)})}else{const u=n.selectAll(`.${V.legendItemTile}`).data(e);o(u,t).style("stroke",ye.bind(i)).call(d=>{l==="circle"?d.attr("cx",h=>{const g=s.x2Tile(h);return g-(g-s.x1Tile(h))/2}).attr("cy",s.yTile):c&&d.attr("x1",s.x1Tile).attr("y1",s.yTile).attr("x2",s.x2Tile).attr("y2",s.yTile)})}}},za=Y(8),Ma={redraw(e={}){var t,s,i,a;const n=this,{config:o,state:r,$el:l}=n,{main:c,treemap:u}=l;r.redrawing=!0;const d=n.filterTargetsToShow(n.data.targets),{flow:h,initializing:g}=e,f=n.getWithOption(e),p=f.Transition?o.transition_duration:0,_=f.TransitionForExit?p:0,x=f.TransitionForAxis?p:0,m=(t=n.axis)==null?void 0:t.generateTransitions(x);n.updateSizes(g),f.Legend&&o.legend_show?(e.withTransition=!!p,!u&&n.updateLegend(n.mapToIds(n.data.targets),e,m)):f.Dimension&&n.updateDimension(!0),o.data_empty_label_text&&c.select(`text.${ut.text}.${I.empty}`).attr("x",r.width/2).attr("y",r.height/2).text(o.data_empty_label_text).style("display",d.length?"none":null),r.hasAxis?(n.axis.redrawAxis(d,f,m,h,g),n.hasGrid()&&n.updateGrid(),o.regions.length&&n.updateRegion(),["bar","candlestick","line","area"].forEach(b=>{const y=ht(b);(/^(line|area)$/.test(b)&&n.hasTypeOf(y)||n.hasType(b))&&n[`update${y}`](f.TransitionForExit)}),l.text&&c.selectAll(`.${Z.selectedCircles}`).filter(n.isBarType.bind(n)).selectAll("circle").remove(),o.interaction_enabled&&!h&&f.EventRect&&(n.redrawEventRect(),(s=n.bindZoomEvent)==null||s.call(n))):(l.arcs&&n.redrawArc(p,_,f.Transform),l.radar&&n.redrawRadar(),l.polar&&n.redrawPolar(),u&&n.updateTreemap(_)),!r.resizing&&!u&&(n.hasPointType()||r.hasRadar)?n.updateCircle():(i=n.hasLegendDefsPoint)!=null&&i.call(n)&&n.data.targets.forEach(n.point("create",this)),n.hasDataLabel()&&!n.hasArcType(null,["radar"])&&n.updateText(),(a=n.redrawTitle)==null||a.call(n),g&&n.updateTypesElements(),n.generateRedrawList(d,h,p,f.Subchart),n.updateTooltipOnRedraw(),n.callPluginHook("$redraw",e,p)},generateRedrawList(e,t,s,i){const a=this,{config:n,state:o}=a,r=a.getDrawShape();o.hasAxis&&n.subchart_show&&a.redrawSubchart(i,s,r);const l=t&&a.generateFlow({targets:e,flow:t,duration:t.duration,shape:r,xv:a.xv.bind(a)}),c=(s||l)&&se(),u=a.getRedrawList(r,t,l,c),d=()=>{l&&l(),o.redrawing=!1,W(n.onrendered,a.api)};if(d)if(c&&u.length){const h=gs();(0,za.transition)().duration(s).each(()=>{u.reduce((g,f)=>g.concat(f),[]).forEach(g=>h.add(g))}).call(h,d)}else o.transiting||d();a.mapToIds(a.data.targets).forEach(h=>{o.withoutFadeIn[h]=!0})},getRedrawList(e,t,s,i){const a=this,{config:n,state:{hasAxis:o,hasRadar:r,hasTreemap:l},$el:{grid:c}}=a,{cx:u,cy:d,xForText:h,yForText:g}=e.pos,f=[];return o&&((n.grid_x_lines.length||n.grid_y_lines.length)&&f.push(a.redrawGrid(i)),n.regions.length&&f.push(a.redrawRegion(i)),Object.keys(e.type).forEach(p=>{const _=ht(p),x=e.type[p];(/^(area|line)$/.test(p)&&a.hasTypeOf(_)||a.hasType(p))&&f.push(a[`redraw${_}`](x,i))}),!t&&c.main&&f.push(a.updateGridFocus())),(!a.hasArcType()||r)&&Q(n.data_labels)&&n.data_labels!==!1&&f.push(a.redrawText(h,g,t,i)),(a.hasPointType()||r)&&!a.isPointFocusOnly()&&a.redrawCircle&&f.push(a.redrawCircle(u,d,i,s)),l&&f.push(a.redrawTreemap(i)),f},updateAndRedraw(e={}){const t=this,{config:s,state:i}=t;let a;e.withTransition=Lt(e,"withTransition",!0),e.withTransform=Lt(e,"withTransform",!1),e.withLegend=Lt(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=Lt(e,"withTransitionForTransform",e.withTransition),e.withLegend&&s.legend_show||(i.hasAxis&&(a=t.axis.generateTransitions(e.withTransitionForAxis?s.transition_duration:0)),t.updateScales(),t.updateSvgSize(),t.transformAll(e.withTransitionForTransform,a)),t.redraw(e,a)}};function Nt(e="linear",t=0,s=1){const i={linear:Ot.scaleLinear,log:Ot.scaleSymlog,_log:Ot.scaleLog,time:Ot.scaleTime,utc:Ot.scaleUtc}[e]();return i.type=e,/_?log/.test(e)&&i.clamp(!0),i.range([t,s])}var Fa={getXScale(e,t,s,i){const a=this,n=a.state.loading!=="append"&&a.scale.zoom||Nt(a.axis.getAxisType("x"),e,t);return a.getCustomizedXScale(s?n.domain(s):n,i)},getYScale(e,t,s,i){const n=Nt(this.axis.getAxisType(e),t,s);return i&&n.domain(i),n},getYScaleById(e,t=!1){var s;const i=((s=this.axis)==null?void 0:s.getId(e))==="y2",a=t?i?"subY2":"subY":i?"y2":"y";return this.scale[a]},getCustomizedXScale(e,t){const s=this,i=t||(()=>s.axis.x.tickOffset()),a=s.config.axis_x_inverted,n=function(o,r){const l=e(o)+i();return r?l:Math.ceil(l)};for(const o in e)n[o]=e[o];return n.orgDomain=()=>e.domain(),n.orgScale=()=>e,s.axis.isCategorized()&&(n.domain=function(o){let r=o;return arguments.length?(e.domain(r),n):(r=this.orgDomain(),a?[r[0]+1,r[1]]:[r[0],r[1]+1])}),n},updateScales(e,t=!0){var s,i;const a=this,{axis:n,config:o,format:r,org:l,scale:c,state:{current:u,width:d,height:h,width2:g,height2:f,hasAxis:p,hasTreemap:_}}=a;if(p){const x=o.axis_rotated,m=a.getResettedPadding(1),b={x:x?m:0,y:x?0:h,subX:x?1:0,subY:x?0:f},y={x:x?h:d,y:x?d:m,subX:x?h:d,subY:x?g:1},T=t&&((s=c.x)==null?void 0:s.orgDomain()),$=t&&l.xDomain;c.x=a.getXScale(b.x,y.x,T,()=>n.x.tickOffset()),c.subX=a.getXScale(b.x,y.x,$,v=>{var A;return v%1?0:((A=n.subX)!=null?A:n.x).tickOffset()}),r.xAxisTick=n.getXAxisTickFormat(),r.subXAxisTick=n.getXAxisTickFormat(!0),n.setAxis("x",c.x,o.axis_x_tick_outer,e),o.subchart_show&&n.setAxis("subX",c.subX,o.axis_x_tick_outer,e),c.y=a.getYScale("y",b.y,y.y,c.y?c.y.domain():o.axis_y_default),c.subY=a.getYScale("y",b.subY,y.subY,c.subY?c.subY.domain():o.axis_y_default),n.setAxis("y",c.y,o.axis_y_tick_outer,e),o.axis_y2_show&&(c.y2=a.getYScale("y2",b.y,y.y,c.y2?c.y2.domain():o.axis_y2_default),c.subY2=a.getYScale("y2",b.subY,y.subY,c.subY2?c.subY2.domain():o.axis_y2_default),n.setAxis("y2",c.y2,o.axis_y2_tick_outer,e))}else if(_){const x=a.getCurrentPadding();c.x=(0,Ot.scaleLinear)().rangeRound([x.left,u.width-x.right]),c.y=(0,Ot.scaleLinear)().rangeRound([x.top,u.height-x.bottom])}else(i=a.updateArc)==null||i.call(a)},xx(e){const t=this,{config:s,scale:{x:i,zoom:a}}=t,n=s.zoom_enabled&&a?a:i;return e?n(D(e.x)?e.x:e):null},xv(e){const t=this,{axis:s,config:i,scale:{x:a,zoom:n}}=t,o=i.zoom_enabled&&n?n:a;let r=t.getBaseValue(e);return s.isTimeSeries()?r=xt.call(t,r):s.isCategorized()&&N(r)&&(r=i.axis_x_categories.indexOf(r)),Math.ceil(o(r))},yv(e){const t=this,{scale:{y:s,y2:i}}=t,a=e.axis&&e.axis==="y2"?i:s;return Math.ceil(a(t.getBaseValue(e)))},subxx(e){return e?this.scale.subX(e.x):null}},q=Y(9);function Xa(e){const t=this;let s;return t.isLineType(e)?s=t.generateGetLinePoints(t.getShapeIndices(t.isLineType)):t.isBarType(e)&&(s=t.generateGetBarPoints(t.getShapeIndices(t.isBarType))),s}var Ba={getDrawShape(){const e=this,t=e.config.axis_rotated,{hasRadar:s,hasTreemap:i}=e.state,a={type:{},indices:{},pos:{}};if(!i&&["bar","candlestick","line","area"].forEach(n=>{const o=ht(/^(bubble|scatter)$/.test(n)?"line":n);if(e.hasType(n)||e.hasTypeOf(o)||n==="line"&&(e.hasType("bubble")||e.hasType("scatter"))){const r=e.getShapeIndices(e[`is${o}Type`]),l=e[`generateDraw${o}`];a.indices[n]=r,a.type[n]=l?l.bind(e)(r,!1):void 0}}),!e.hasArcType()||s||i){let n,o;i||(n=s?e.radarCircleX:t?e.circleY:e.circleX,o=s?e.radarCircleY:t?e.circleX:e.circleY),a.pos={xForText:e.generateXYForText(a.indices,!0),yForText:e.generateXYForText(a.indices,!1),cx:(n||function(){}).bind(e),cy:(o||function(){}).bind(e)}}return a},getShapeIndices(e){const t=this,{config:s}=t,i=s.data_xs,a=Q(i),n={};let o=a?{}:0;return a&&Re(Object.keys(i).map(r=>i[r])).forEach(r=>{o[r]=0,n[r]={}}),t.filterTargetsToShow(t.data.targets.filter(e,t)).forEach(r=>{var l;const c=r.id in i?i[r.id]:"",u=c?n[c]:n;for(let d=0,h;h=s.data_groups[d];d++)if(!(h.indexOf(r.id)<0))for(let g=0,f;f=h[g];g++){if(f in u){u[r.id]=u[f];break}r.id!==f&&c&&(u[f]=(l=u[r.id])!=null?l:o[c])}J(u[r.id])&&(u[r.id]=c?o[c]++:o++,u.__max__=(c?o[c]:o)-1)}),n},getIndices(e,t,s){const i=this,{data_xs:a,bar_indices_removeNull:n}=i.config,{id:o,index:r}=t;if(i.isBarType(o)&&n){const l={};return i.getAllValuesOnIndex(r,!0).forEach((c,u)=>{l[c.id]=u,l.__max__=u}),l}return Q(a)?e[a[o]]:e},getIndicesMax(e){return Q(this.config.data_xs)?Object.keys(e).map(t=>e[t].__max__||0).reduce((t,s)=>t+s):e.__max__},getShapeX(e,t,s){const i=this,{config:a,scale:n}=i,o=s?n.subX:n.zoom||n.x,r=a.bar_overlap,l=a.bar_padding,c=(d,h)=>d+h,u=Tt(e)&&(e._$total.length?e._$total.reduce(c)/2:0);return d=>{const h=i.getIndices(t,d,"getShapeX"),g=d.id in h?h[d.id]:0,f=(h.__max__||0)+1;let p=0;if(Q(d.x)){const _=o(d.x,!0);if(u){const x=e[d.id]||e._$width;p=r?_-x/2:_-x+e._$total.slice(0,g+1).reduce(c)-u}else p=_-(C(e)?e:e._$width)*(f/2-(r?1:g))}return e&&p&&f>1&&l&&(g&&(p+=l*g),f>2?p-=(f-1)*l/2:f===2&&(p-=l/2)),p}},getShapeY(e){const t=this,s=t.isStackNormalized();return i=>{let{value:a}=i;return C(i)?a=i:t.isAreaRangeType(i)?a=t.getBaseValue(i,"mid"):s?a=t.getRatio("index",i,!0):t.isBubbleZType(i)?a=t.getBubbleZData(i.value,"y"):t.isBarRangeType(i)&&(a=a[1]),t.getYScaleById(i.id,e)(a)}},getShapeYMin(e){const t=this,s=t.axis.getId(e),i=t.scale[s],[a]=i.domain(),n=t.config[`axis_${s}_inverted`];return!t.isGrouped(e)&&!n&&a>0?a:0},getShapeOffsetData(e){const t=this,s=t.orderTargets(t.filterTargetsToShow(t.data.targets.filter(e,t))),i=t.isStackNormalized(),a=s.map(o=>{let r=o.values;const l={};t.isStepType(o)&&(r=t.convertValuesToStep(r));const c=r.reduce((u,d)=>{const h=Number(d.x);return u[h]=d,l[h]=i?t.getRatio("index",d,!0):d.value,u},{});return{id:o.id,rowValues:r,rowValueMapByXValue:c,values:l}});return{indexMapByTargetId:s.reduce((o,{id:r},l)=>(o[r]=l,o),{}),shapeOffsetTargets:a}},getShapeOffset(e,t,s){const i=this,{shapeOffsetTargets:a,indexMapByTargetId:n}=i.getShapeOffsetData(e),o=i.config.data_groupsZeroAs;return(r,l)=>{const{id:c,value:u,x:d}=r,h=i.getIndices(t,r),g=i.getYScaleById(c,s);if(i.isBarRangeType(r))return g(u[0]);const f=Number(d),p=g(o==="zero"?0:i.getShapeYMin(c));let _=p;return a.filter(x=>x.id!==c&&h[x.id]===h[c]).forEach(x=>{const{id:m,rowValueMapByXValue:b,rowValues:y,values:T}=x;if(n[m]<n[c]){const $=T[f];let v=y[l];(!v||Number(v.x)!==f)&&(v=b[f]),(v==null?void 0:v.value)*u>=0&&C($)&&(u!==0||o==="positive"&&$>0||o==="negative"&&$<0)&&(_+=g($)-p)}}),_}},circleY(e,t){const s=this,i=e.id;let a;return s.isGrouped(i)&&(a=Xa.bind(s)(e)),a?a(e,t)[0][1]:s.getYScaleById(i)(s.getBaseValue(e))},getBarW(e,t,s){var i,a,n,o,r;const l=this,{config:c,org:u,scale:d}=l,h=l.getMaxDataCount(),g=e==="bar"&&((i=c.data_groups)==null?void 0:i.length),f=`${e}_width`,{k:p}=(n=(a=l.getZoomTransform)==null?void 0:a.call(l))!=null?n:{k:1},_=[(o=c.axis_x_min)!=null?o:u.xDomain[0],(r=c.axis_x_max)!=null?r:u.xDomain[1]].map(l.axis.isTimeSeries()?xt.bind(l):Number);let x=t.tickInterval(h);if(d.zoom&&!l.axis.isCategorized()&&p>1){const y=_.every((T,$)=>T===u.xDomain[$]);x=u.xDomain.map((T,$)=>{const v=y?T:T-Math.abs(_[$]);return d.zoom(v)}).reduce((T,$)=>Math.abs(T)+$)/h}const m=y=>{const T=y?c[f][y]:c[f],$=y?T.ratio:c[`${f}_ratio`],v=y?T.max:c[`${f}_max`],A=C(T)?T:s?x*$/s:0;return v&&A>v?v:A};let b=m();return!g&&Tt(c[f])&&(b={_$width:b,_$total:[]},l.filterTargetsToShow(l.data.targets).forEach(y=>{c[f][y.id]&&(b[y.id]=m(y.id),b._$total.push(b[y.id]||b._$width))})),b},getShapeByIndex(e,t,s){const i=this,{$el:a}=i,n=D(t)?`-${t}`:"";let o=a[e];return o&&!o.empty()?o=o.filter(r=>s?r.id===s:!0).filter(r=>D(t)?r.index===t:!0):o=(s?a.main.selectAll(`.${X[`${e}s`]}${i.getTargetSelectorSuffix(s)}`):a.main).selectAll(`.${X[e]}${n}`),o},isWithinShape(e,t){var s;const i=this,a=(0,S.select)(e);let n;return i.isTargetToShow(t.id)?(s=i.hasValidPointType)!=null&&s.call(i,e.nodeName)?n=i.isStepType(t)?i.isWithinStep(e,i.getYScaleById(t.id)(t.value)):i.isWithinCircle(e,i.isBubbleType(t)?i.pointSelectR(t)*1.5:0):e.nodeName==="path"&&(n=a.classed(X.bar)?i.isWithinBar(e):!0):n=!1,n},getInterpolate(e){const s=this.getInterpolateType(e);return{basis:q.curveBasis,"basis-closed":q.curveBasisClosed,"basis-open":q.curveBasisOpen,bundle:q.curveBundle,cardinal:q.curveCardinal,"cardinal-closed":q.curveCardinalClosed,"cardinal-open":q.curveCardinalOpen,"catmull-rom":q.curveCatmullRom,"catmull-rom-closed":q.curveCatmullRomClosed,"catmull-rom-open":q.curveCatmullRomOpen,"monotone-x":q.curveMonotoneX,"monotone-y":q.curveMonotoneY,natural:q.curveNatural,"linear-closed":q.curveLinearClosed,linear:q.curveLinear,step:q.curveStep,"step-after":q.curveStepAfter,"step-before":q.curveStepBefore}[s]},getInterpolateType(e){const t=this,{config:s}=t,i=s.spline_interpolation_type,a=t.isInterpolationType(i)?i:"cardinal";return t.isSplineType(e)?a:t.isStepType(e)?s.line_step_type:"linear"},isWithinBar(e){const t=$t(this.state.event,e),s=Je(e),[i,a]=s,n=Math.min(i.x,a.x),o=Math.min(i.y,a.y),r=this.config.bar_sensitivity,{width:l,height:c}=e.getBBox(),u=n-r,d=n+l+r,h=o+c+r,g=o-r;return u<t[0]&&t[0]<d&&g<t[1]&&t[1]<h}},Na={setContainerSize(){const e=this,{state:t}=e;t.current.width=e.getCurrentWidth(),t.current.height=e.getCurrentHeight()},getCurrentWidth(){const e=this;return e.config.size_width||e.getParentWidth()},getCurrentHeight(){const e=this,{config:t}=e,s=t.size_height||e.getParentHeight();return s>0?s:320/(e.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getParentRectValue(e){const t=`offset${ht(e)}`;let s=this.$el.chart.node(),i=0;for(;i<30&&s&&s.tagName!=="BODY";){try{i=s.getBoundingClientRect()[e]}catch(n){t in s&&(i=s[t])}s=s.parentNode}const a=it.body[t];return i>a&&(i=a),i},getParentWidth(){return this.getParentRectValue("width")},getParentHeight(){const e=this.$el.chart.style("height");let t=0;return e&&(t=/px$/.test(e)?parseInt(e,10):this.getParentRectValue("height")),t},getSvgLeft(e){const t=this,{config:s,state:{hasAxis:i},$el:a}=t,n=s.axis_rotated,o=n||!n&&!s.axis_y_inner,r=n?et.axisX:et.axisY,l=a.main.select(`.${r}`).node(),c=i&&s[`axis_${n?"x":"y"}_label`];let u=0;if(i&&(N(c)||N(c.text)||/^inner-/.test(c==null?void 0:c.position))){const p=a.main.select(`.${r}-label`);p.empty()||(u=p.node().getBoundingClientRect().left)}const d=l&&o?l.getBoundingClientRect():{right:0},h=a.chart.node().getBoundingClientRect().left+u,g=t.hasArcType(),f=d.right-h-(g?0:t.getCurrentPaddingByDirection("left",e));return f>0?f:0},updateDimension(e){var t;const s=this,{config:i,state:{hasAxis:a},$el:n}=s;a&&!e&&s.axis.x&&i.axis_rotated&&((t=s.axis.subX)==null||t.create(n.axis.subX)),s.updateScales(e),s.updateSvgSize(),s.transformAll(!1)},updateSvgSize(){const e=this,{state:{clip:t,current:s,hasAxis:i,width:a,height:n},$el:{svg:o}}=e;if(o.attr("width",s.width).attr("height",s.height),i){const r=o.select(`.${ls.brush} .overlay`),l={width:0,height:0};r.size()&&(l.width=+r.attr("width"),l.height=+r.attr("height")),o.selectAll([`#${t.id}`,`#${t.idGrid}`]).select("rect").attr("width",a).attr("height",n),o.select(`#${t.idXAxis}`).select("rect").call(e.setXAxisClipPath.bind(e)),o.select(`#${t.idYAxis}`).select("rect").call(e.setYAxisClipPath.bind(e)),t.idSubchart&&o.select(`#${t.idSubchart}`).select("rect").attr("width",a).attr("height",l.height)}},getCurrentPaddingByDirection(e,t=!1,s=!1){var i;const a=this,{config:n,$el:o,state:{hasAxis:r}}=a,l=n.axis_rotated,c=((i=n.padding)==null?void 0:i.mode)==="fit",u=C(n[`padding_${e}`])?n[`padding_${e}`]:void 0,d=r?{top:l?"y2":null,bottom:l?"y":"x",left:l?"x":"y",right:l?null:"y2"}[e]:null,h=/^(left|right)$/.test(e),g=d&&n[`axis_${d}_inner`],f=d&&n[`axis_${d}_show`],p=d?n[`axis_${d}_axes`].length:0;let _=d?h?a.getAxisWidthByAxisId(d,t):a.getHorizontalAxisHeight(d):0;const x=20;let m=0;!c&&h&&(_=Mi(_));let b=r&&h&&(g||J(u)&&!f)?0:c?(f?_:0)+(u!=null?u:0):J(u)?_:u;return h&&r?(d&&(c||g)&&n[`axis_${d}_label`].text&&(b+=a.axis.getAxisLabelPosition(d).isOuter?x:0),e==="right"?(b+=l?!c&&J(u)?10:2:!f||g?c?2:1:0,b+=s?a.axis.getXAxisTickTextY2Overflow(x):0):e==="left"&&l&&J(u)&&(b=n.axis_x_show?c?_:Math.max(_,40):1)):e==="top"?(o.title&&o.title.node()&&(b+=a.getTitlePadding()),m=l&&!g?p:0):e==="bottom"&&r&&l&&!f&&(b+=1),b+_*p-m},getCurrentPadding(e=!1){const t=this,[s,i,a,n]=["top","bottom","left","right"].map(o=>t.getCurrentPaddingByDirection(o,null,e));return{top:s,bottom:i,left:a,right:n}},getResettedPadding(e){const t=this,{config:s}=t,i=C(e);let a=i?0:{};return s.padding===!1?!i&&Object.keys(e).forEach(n=>{a[n]=!mt(s.data_labels)&&s.data_labels!==!1&&n==="top"?e[n]:0}):a=e,a},updateSizes(e){var t,s,i,a,n;const o=this,{config:r,state:l,$el:{legend:c}}=o,u=r.axis_rotated,d=o.hasArcType()||l.hasTreemap,h=((t=r.padding)==null?void 0:t.mode)==="fit";!e&&o.setContainerSize();const g={width:c?o.getLegendWidth():0,height:c?o.getLegendHeight():0};!d&&r.axis_x_show&&r.axis_x_tick_autorotate&&o.updateXAxisTickClip();const f={right:r.legend_show&&l.isLegendRight?o.getLegendWidth()+(h?0:20):0,bottom:!r.legend_show||l.isLegendRight||l.isLegendInset?0:g.height},p=u||d?0:o.getHorizontalAxisHeight("x"),_=r.subchart_axis_x_show&&r.subchart_axis_x_tick_text_show?p:30,x=r.subchart_show&&!d?r.subchart_size_height+_:0,m=o.hasType("gauge")&&r.arc_needle_show&&!r.gauge_fullCircle&&!r.gauge_label_show?10:0,b=o.getCurrentPadding(!0);if(l.margin=!d&&u?{top:b.top,right:d?0:b.right+f.right,bottom:f.bottom+b.bottom,left:x+(d?0:b.left)}:{top:(h?0:4)+b.top,right:d?0:b.right+f.right,bottom:m+x+f.bottom+b.bottom,left:d?0:b.left},l.margin=o.getResettedPadding(l.margin),l.margin2=u?{top:l.margin.top,right:NaN,bottom:20+f.bottom,left:o.state.rotatedPadding.left}:{top:l.current.height-x-f.bottom,right:NaN,bottom:_+f.bottom,left:l.margin.left},l.margin3={top:0,right:NaN,bottom:0,left:0},(s=o.updateSizeForLegend)==null||s.call(o,g),l.width=l.current.width-l.margin.left-l.margin.right,l.height=l.current.height-l.margin.top-l.margin.bottom,l.width<0&&(l.width=0),l.height<0&&(l.height=0),l.width2=u?l.margin.left-l.rotatedPadding.left-l.rotatedPadding.right:l.width,l.height2=u?l.height:l.current.height-l.margin2.top-l.margin2.bottom,l.width2<0&&(l.width2=0),l.height2<0&&(l.height2=0),o.hasArcType()){const y=o.hasType("gauge"),T=r.legend_show&&l.isLegendRight,$=(i=l.hasRadar&&o.cache.get(gt.radarTextWidth))!=null?i:0;l.arcWidth=l.width-(T?g.width+10:0)-$,l.arcHeight=l.height-(T&&!y?0:10),(a=r.arc_rangeText_values)!=null&&a.length&&(y?(l.arcWidth-=25,l.arcHeight-=10,l.margin.left+=10):(l.arcHeight-=20,l.margin.top+=10)),y&&!r.gauge_fullCircle&&(l.arcHeight+=l.height-o.getPaddingBottomForGauge()),(n=o.updateRadius)==null||n.call(o)}l.isLegendRight&&d&&(l.margin3.left=l.arcWidth/2+l.radiusExpanded*1.1)}},Va={setCssRule(e,t,s,i){const a=this,{config:n,state:{cssRule:o,style:r}}=a;return n.boost_useCssRule?l=>{l.each(c=>{const u=i&&(i==null?void 0:i.call(a,c)),d=`${e?`.${st.shapes+a.getTargetSelectorSuffix(c.id)}`:""}${t}`;t in o&&r.sheet.deleteRule(o[d]),a.state.cssRule[d]=Ni(r,d,s.filter(Boolean).map(h=>N(u)&&h.indexOf(":")===-1?`${h}: ${u}`:h||""))})}:()=>{}},getStylePropValue(e){const{config:{boost_useCssRule:t}}=this;return t?null:E(e)?e.bind(this):e}};function Ga(e){let t="middle";return e>0&&e<=170?t="end":e>190&&e<=360&&(t="start"),t}function Ya(e,t,s,i,a){var n;const o=this,{value:r}=e,l=o.isCandlestickType(e),c=C(r)&&r<0||l&&!((n=o.getCandlestickData(e))!=null&&n._isUp);let{x:u,y:d}=t;const h=4,g=h*2;return i?s==="start"?(u+=c?0:g,d+=h):s==="middle"?(u+=g,d-=g):s==="end"&&(c&&(u-=g),d+=h):(s==="start"?(u+=h,c&&(d+=g*2)):s==="middle"?d-=g:s==="end"&&(u-=h,c&&(d+=g*2)),a&&(d+=c?-17:l?13:7)),{x:u,y:d}}function ys(e,t){var s;const i=this.config.data_labels_position,{id:a,index:n,value:o}=e;return(s=E(i)?i.bind(this.api)(t,o,a,n,this.$el.text):(a in i?i[a]:i)[t])!=null?s:0}var ja={opacityForText(e){const t=this;return t.isBarType(e)&&!t.meetsLabelThreshold(Math.abs(t.getRatio("bar",e)),"bar")?"0":t.hasDataLabel?null:"0"},initText(){const{$el:e}=this;e.main.select(`.${I.chart}`).append("g").attr("class",ut.chartTexts).style("pointer-events",e.treemap?"none":null)},updateTargetsForText(e){const t=this,s=t.getChartClass("Text"),i=t.getClass("texts","id"),a=t.classFocus.bind(t);t.$el.main.select(`.${ut.chartTexts}`).selectAll(`.${ut.chartText}`).data(e).attr("class",r=>`${s(r)}${a(r)}`.trim()).enter().append("g").style("opacity","0").attr("class",s).call(t.setCssRule(!0,` .${ut.text}`,["fill","pointer-events:none"],t.updateTextColor)).append("g").attr("class",i)},updateText(){const e=this,{$el:t,$T:s,config:i,axis:a}=e,n=e.getClass("text","index"),o=i.data_labels.centered,r=t.main.selectAll(`.${ut.texts}`).selectAll(`.${ut.text}`).data(e.labelishData.bind(e));s(r.exit()).style("fill-opacity","0").remove(),t.text=r.enter().append("text").merge(r).attr("class",n).attr("text-anchor",l=>{let u=i[`axis_${a==null?void 0:a.getId(l.id)}_inverted`]?l.value>0:l.value<0;if(e.isCandlestickType(l)){const d=e.getCandlestickData(l);u=!(d!=null&&d._isUp)}else if(e.isTreemapType(l))return o?"middle":"start";return i.axis_rotated?u?"end":"start":"middle"}).style("fill",e.getStylePropValue(e.updateTextColor)).style("fill-opacity","0").each(function(l,c,u){const d=(0,S.select)(this);let{value:h}=l;if(e.isBubbleZType(l))h=e.getBubbleZData(h,"z");else if(e.isCandlestickType(l)){const g=e.getCandlestickData(l);g&&(h=g.close)}h=e.isTreemapType(l)?e.treemapDataLabelFormat(l)(d):e.dataLabelFormat(l.id)(h,l.id,l.index,u),C(h)?this.textContent=h:ee(d,h)})},updateTextColor(e){const t=this,{config:s}=t,i=s.data_labels_colors,a=t.isArcType(e)&&!t.isRadarType(e)||t.isTreemapType(e)?null:t.color(e);let n;if(N(i))n=i;else if(F(i)){const{id:o}=e.data||e;n=i[o]}else E(i)&&(n=i.bind(t.api)(a,e));if(t.isCandlestickType(e)&&!E(i)){const o=t.getCandlestickData(e);if(!(o!=null&&o._isUp)){const r=s.candlestick_color_down;n=F(r)?r[e.id]:r}}return n||a},updateTextBackgroundColor(e){const t=this,{$el:s,config:i}=t,a=i.data_labels_backgroundColors;let n="";if(N(a)||F(a)){const o=N(a)?"":t.getTargetSelectorSuffix("id"in e?e.id:e.data.id),r=s.defs.select(["filter[id*='labels-bg","']"].join(o));r.size()&&(n=`url(#${r.attr("id")})`)}return n||null},redrawText(e,t,s,i){const a=this,{$T:n,axis:o,config:r,state:{hasTreemap:l}}=a,c=wt(!0),u=r.axis_rotated,d=r.data_labels.rotate,h=Ga(d),g=d?`rotate(${d})`:"";return a.$el.text.style("fill",a.getStylePropValue(a.updateTextColor)).attr("filter",a.updateTextBackgroundColor.bind(a)).style("fill-opacity",s?0:a.opacityForText.bind(a)).each(function(f,p){const _=n(l&&this.childElementCount?this.parentNode:this,!!(i&&this.getAttribute("x")),c),x=r[`axis_${o==null?void 0:o.getId(f.id)}_inverted`];let m={x:e.bind(this)(f,p),y:t.bind(this)(f,p)};d&&(m=Ya.bind(a)(f,m,h,u,x),_.attr("text-anchor",h)),this.childElementCount||d?_.attr("transform",`translate(${m.x} ${m.y}) ${g}`):_.attr("x",m.x).attr("y",m.y)}),!0},getTextRect(e,t){const s=this;let i=e.node?e.node():e;/text/i.test(i.tagName)||(i=i.querySelector("text"));const a=i.textContent,n=`${gt.textRect}-${a.replace(/\W/g,"_")}`;let o=s.cache.get(n);return o||(s.$el.svg.append("text").style("visibility","hidden").style("font",(0,S.select)(i).style("font")).classed(t,!0).text(a).call(r=>{o=fe(r.node())}).remove(),s.cache.add(n,o)),o},generateXYForText(e,t){const s=this,{state:{hasRadar:i,hasTreemap:a}}=s,n=Object.keys(e),o={},r=t?s.getXForText:s.getYForText;return i&&n.push("radar"),a&&n.push("treemap"),n.forEach(l=>{o[l]=s[`generateGet${ht(l)}Points`](e[l],!1)}),function(l,c){const u=s.isAreaType(l)&&"area"||s.isBarType(l)&&"bar"||s.isCandlestickType(l)&&"candlestick"||s.isRadarType(l)&&"radar"||s.isTreemapType(l)&&"treemap"||"line";return r.call(s,o[u](l,c),l,this)}},getCenteredTextPos(e,t,s,i){const a=this,{config:n}=a,o=n.axis_rotated,r=a.isBarType(e),l=a.isTreemapType(e);if(n.data_labels.centered&&(r||l)){const c=fe(s);if(r){const u=a.getRangedData(e,null,"bar")>=0;if(o){const d=(u?t[1][1]-t[0][1]:t[0][1]-t[1][1])/2+c.width/2;return u?-d-3:d+2}else{const d=(u?t[0][1]-t[1][1]:t[1][1]-t[0][1])/2+c.height/2;return u?d:-d-2}}else if(l)return i==="x"?(t[1][0]-t[0][0])/2:(t[1][1]-t[0][1])/2+c.height/2}return 0},getXForText(e,t,s){var i;const a=this,{config:n}=a,o=n.axis_rotated,r=a.isTreemapType(t);let l=e[0][0];if(a.isCandlestickType(t))o?l=(i=a.getCandlestickData(t))!=null&&i._isUp?e[2][2]+4:e[2][1]-4:l+=(e[1][0]-l)/2;else if(r)l+=n.data_labels.centered?0:5;else if(o){const c=n[`axis_${a.axis.getId(t.id)}_inverted`],u=a.isBarType(t)?4:6,d=t.value;l=e[2][1],c?l-=u*(d>0?1:-1):l+=u*(d<0?-1:1)}else l=a.hasType("bar")?(e[2][0]+e[0][0])/2:l;return(o||r)&&(l+=a.getCenteredTextPos(t,e,s,"x")),l+ys.call(this,t,"x")},getYForText(e,t,s){const i=this,{axis:a,config:n,state:o}=i,r=n.axis_rotated,l=n[`axis_${a==null?void 0:a.getId(t.id)}_inverted`],c=i.isBarType(t),u=i.isTreemapType(t),d=n.point_r,h=fe(s);let{value:g}=t,f=3,p;if(i.isCandlestickType(t))g=i.getCandlestickData(t),r?(p=e[0][0],p+=(e[1][0]-p)/2+f):(p=g&&g._isUp?e[2][2]-f:e[2][1]+f*4,l&&(p+=15*(g._isUp?1:-1)));else if(u)p=e[0][1]+(n.data_labels.centered?0:h.height+5);else if(r)p=(e[0][0]+e[2][0]+h.height*.6)/2;else if(p=e[2][1],C(d)&&d>5&&(i.isLineType(t)||i.isScatterType(t))&&(f+=n.point_r/2.3),g<0||g===0&&!o.hasPositiveValue&&o.hasNegativeValue)p+=l?c?-3:-5:h.height+(c?-f:f);else{let _=-f*2;c?_=-f:i.isBubbleType(t)&&(_=f),l&&(_=c?10:15),p+=_}return(!r||u)&&(p+=i.getCenteredTextPos(t,e,s,"y")),p+ys.call(this,t,"y")},markOverlapped(e,t,s){const i=t.$el.arcs.selectAll(s),a=i.filter(l=>l.data.id!==e),n=i.filter(l=>l.data.id===e),o=is(n.node()),r=(l,c)=>Math.sqrt(Math.pow(l,2)+Math.pow(c,2));n.node()&&a.each(function(){const l=is(this),c=(0,S.select)(this),u=r(o.e,o.f)>r(l.e,l.f)?n:c,d=Math.ceil(Math.abs(o.e-l.e))<Math.ceil(u.node().getComputedTextLength()),h=Math.ceil(Math.abs(o.f-l.f))<parseInt(n.style("font-size"),10);c.classed(ut.TextOverlapping,d&&h)})},undoMarkOverlapped(e,t){e.$el.arcs.selectAll(t).each(function(){(0,S.selectAll)([this,this.previousSibling]).classed(ut.TextOverlapping,!1)})},meetsLabelThreshold(e=0,t){const s=this,{config:i}=s,a=i[`${t}_label_threshold`]||0;return e>=a}};function bs(e="left",t){const s=C(t);let i;return e.indexOf("center")>-1?i=s?t/2:"middle":e.indexOf("right")>-1?i=s?t:"end":i=s?0:"start",i}var Wa={initTitle(){const e=this,{config:t,$el:s}=e;if(t.title_text){s.title=s.svg.append("g");const i=s.title.append("text").style("text-anchor",bs(t.title_position)).attr("class",ut.title);ee(i,t.title_text,[.3,1.5])}},redrawTitle(){const e=this,{config:t,state:{current:s},$el:{title:i}}=e;if(i){const a=bs(t.title_position,s.width),n=(t.title_padding.top||0)+e.getTextRect(e.$el.title,ut.title).height;i.attr("transform",`translate(${a}, ${n})`)}},getTitlePadding(){const e=this,{$el:{title:t},config:s}=e;return(s.title_padding.top||0)+(t?e.getTextRect(t,ut.title).height:0)+(s.title_padding.bottom||0)}},Ha={initTooltip(){const e=this,{config:t,$el:s}=e;s.tooltip=(0,S.select)(t.tooltip_contents.bindto),s.tooltip.empty()&&(s.tooltip=s.chart.append("div").attr("class",me.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),e.bindTooltipResizePos()},initShowTooltip(){var e;const t=this,{config:s,$el:i,state:{hasAxis:a,hasRadar:n}}=t;if(s.tooltip_init_show){const o=!(a||n);(e=t.axis)!=null&&e.isTimeSeries()&&N(s.tooltip_init_x)&&(s.tooltip_init_x=xt.call(t,s.tooltip_init_x)),t.api.tooltip.show({data:{[o?"index":"x"]:s.tooltip_init_x}});const r=s.tooltip_init_position;if(!s.tooltip_contents.bindto&&!mt(r)){const{top:l=0,left:c=50}=r;i.tooltip.style("top",N(l)?l:`${l}px`).style("left",N(c)?c:`${c}px`).style("display",null)}}},getTooltipHTML(...e){const t=this,{api:s,config:i}=t;return E(i.tooltip_contents)?i.tooltip_contents.bind(s)(...e):t.getTooltipContent(...e)},getTooltipContent(e,t,s,i){const a=this,{api:n,config:o,state:r,$el:l}=a,[c,u,d]=["title","name","value"].map(R=>{const O=o[`tooltip_format_${R}`];return E(O)?O.bind(n):O}),h=(...R)=>we((c||t)(...R)),g=(...R)=>we((u||(O=>O))(...R)),f=(...R)=>{const O=d||(r.hasTreemap||a.isStackNormalized()?(K,ct)=>`${(ct*100).toFixed(2)}%`:s);return we(O(...R))},p=o.tooltip_order,_=R=>a.axis&&a.isBubbleZType(R)?a.getBubbleZData(R.value,"z"):a.getBaseValue(R),x=a.levelColor?R=>a.levelColor(R.value):R=>i(R),m=o.tooltip_contents,b=m.template,y=a.mapToTargetIds();if(p===null&&o.data_groups.length){const R=a.orderTargets(a.data.targets).map(O=>O.id).reverse();e.sort((O,K)=>{let ct=O?O.value:null,dt=K?K.value:null;return ct>0&&dt>0&&(ct=O.id?R.indexOf(O.id):null,dt=K.id?R.indexOf(K.id):null),ct-dt})}else if(/^(asc|desc)$/.test(p)){const R=p==="asc";e.sort((O,K)=>{const ct=O?_(O):null,dt=K?_(K):null;return R?ct-dt:dt-ct})}else E(p)&&e.sort(p.bind(n));const T=a.getTooltipContentTemplate(b),$=e.length;let v,A,L,w,z;for(z=0;z<$;z++)if(A=e[z],!(!A||!(_(A)||_(A)===0))){if(J(v)){const R=(r.hasAxis||r.hasRadar)&&h(A.x);v=xe(T[0],{CLASS_TOOLTIP:me.tooltip,TITLE:D(R)?b?R:`<tr><th colspan="2">${R}</th></tr>`:""})}if(!A.ratio&&l.arcs&&(L=["arc",a.$el.arcs.select(`path.${B.arc}-${A.id}`).data()[0]],A.ratio=a.getRatio(...L)),L=[A.ratio,A.id,A.index],a.isAreaRangeType(A)){const[R,O]=["high","low"].map(ct=>f(a.getRangedData(A,ct),...L));w=`<b>Mid:</b> ${f(_(A),...L)} <b>High:</b> ${R} <b>Low:</b> ${O}`}else if(a.isCandlestickType(A)){const[R,O,K,ct,dt]=["open","high","low","close","volume"].map(le=>a.getRangedData(A,le,"candlestick")?f(a.getRangedData(A,le,"candlestick"),...L):void 0);w=`<b>Open:</b> ${R} <b>High:</b> ${O} <b>Low:</b> ${K} <b>Close:</b> ${ct}${dt?` <b>Volume:</b> ${dt}`:""}`}else if(a.isBarRangeType(A)){const{value:R,id:O,index:K}=A;w=`${f(R,void 0,O,K)}`}else w=f(_(A),...L);if(w!==void 0){if(A.name===null)continue;const R=g(A.name,...L),O=x(A),K={CLASS_TOOLTIP_NAME:me.tooltipName+a.getTargetSelectorSuffix(A.id),COLOR:b||!a.patterns?O:`<svg><rect style="fill:${O}" width="10" height="10"></rect></svg>`,NAME:R,VALUE:w};if(b&&F(m.text)){const ct=y.indexOf(A.id);Object.keys(m.text).forEach(dt=>{K[dt]=m.text[dt][ct]})}v+=xe(T[1],K)}}return`${v}</table>`},getTooltipContentTemplate(e){return(e||`<table class="{=CLASS_TOOLTIP}"><tbody>
				{=TITLE}
				{{<tr class="{=CLASS_TOOLTIP_NAME}">
					<td class="name">${this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>'}{=NAME}</td>
					<td class="value">{=VALUE}</td>
				</tr>}}
			</tbody></table>`).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},setTooltipPosition(e,t){var s,i;const a=this,{config:n,scale:o,state:r,$el:{eventRect:l,tooltip:c}}=a,{bindto:u}=n.tooltip_contents,d=n.axis_rotated,h=c==null?void 0:c.datum();if(!u&&h){const g=e!=null?e:JSON.parse(h.current),[f,p]=$t(r.event,t!=null?t:l==null?void 0:l.node()),_={x:f,y:p};if(r.hasAxis&&o.x&&h&&"x"in h){const y=(T=0,$,v="y")=>{var A;const L=o[$?(A=a.axis)==null?void 0:A.getId($):v];return L?L(T)+(d?r.margin.left:r.margin.top):0};_.xAxis=o.x(h.x)+(n.tooltip_position?d?r.margin.top:r.margin.left:0),g.length===1?_.yAxis=y(g[0].value,g[0].id):_.yAxis=y}const{width:x=0,height:m=0}=h,b=(i=(s=n.tooltip_position)==null?void 0:s.bind(a.api)(g,x,m,l==null?void 0:l.node(),_))!=null?i:a.getTooltipPosition.bind(a)(x,m,_);["top","left"].forEach(y=>{const T=b[y];c.style(y,`${T}px`),y==="left"&&!h.xPosInPercent&&(h.xPosInPercent=T/r.current.width*100)})}},getTooltipPosition(e,t,s){var i,a,n;const o=this,{config:r,scale:l,state:c}=o,{width:u,height:d,current:h,hasRadar:g,hasTreemap:f,isLegendRight:p,inputType:_}=c,x=o.hasType("gauge")&&!r.gauge_fullCircle,m=r.axis_rotated,b=o.hasArcType(),y=o.getSvgLeft(!0);let T=y+h.width-o.getCurrentPaddingByDirection("right");const $=20;let{x:v,y:A}=s;if(g)v+=v>=u/2?15:-(e+15),A+=15;else if(b){if(_!=="touch"){let z=(a=(i=o.getTitlePadding)==null?void 0:i.call(o))!=null?a:0;z&&x&&((n=r.arc_rangeText_values)!=null&&n.length)&&(z+=10),v+=(u-(p?o.getLegendWidth():0))/2,A+=(x?d:d/2+t)+z}}else if(f)A+=t;else{const w={top:o.getCurrentPaddingByDirection("top",!0),left:o.getCurrentPaddingByDirection("left",!0)};m?(v+=y+w.left+$,A=w.top+s.xAxis+$,T-=y):(v=y+w.left+$+(l.zoom?v:s.xAxis),A+=w.top-5)}if(v+e+15>T&&(v-=e+(f||b?0:m?$*2:38)),A+t>h.height){const w=f?t+10:30;A-=x?t*1.5:t+w}const L={top:A,left:v};return Object.keys(L).forEach(w=>{L[w]<0&&(L[w]=0)}),L},showTooltip(e,t){const s=this,{config:i,$el:{tooltip:a}}=s,n=e.filter(l=>l&&D(s.getBaseValue(l)));if(!a||n.length===0||!i.tooltip_show)return;let o=a.datum();const r=JSON.stringify(e);if(!o||o.current!==r){const{index:l,x:c}=e.concat().sort()[0];W(i.tooltip_onshow,s.api,e),a.html(s.getTooltipHTML(e,s.axis?s.axis.getXAxisTickFormat():s.categoryName.bind(s),s.getDefaultValueFormat(),s.color)).style("display",null).style("visibility",null).datum(o={index:l,x:c,current:r,width:a.property("offsetWidth"),height:a.property("offsetHeight")}),W(i.tooltip_onshown,s.api,e),s._handleLinkedCharts(!0,l)}s.setTooltipPosition(n,t)},bindTooltipResizePos(){const e=this,{resizeFunction:t,state:s,$el:{tooltip:i}}=e;t.add(()=>{if(i.style("display")==="block"){const{current:a}=s,{width:n,xPosInPercent:o}=i.datum();let r=a.width/100*o;const l=a.width-(r+n);l<0&&(r+=l),i.style("left",`${r}px`)}})},hideTooltip(e){var t;const s=this,{api:i,config:a,$el:{tooltip:n}}=s;if(n&&n.style("display")!=="none"&&(!a.tooltip_doNotHide||e)){const o=JSON.parse((t=n.datum().current)!=null?t:{});W(a.tooltip_onhide,i,o),n.style("display","none").style("visibility","hidden").datum(null),W(a.tooltip_onhidden,i,o)}},_handleLinkedCharts(e,t){const s=this,{charts:i,config:a,state:{event:n}}=s;if(n!=null&&n.isTrusted&&a.tooltip_linked&&i.length>1){const o=a.tooltip_linked_name;i.filter(r=>r!==s.api).forEach(r=>{const{config:l,$el:c}=r.internal,u=l.tooltip_linked,d=l.tooltip_linked_name,h=it.body.contains(c.chart.node());if(u&&o===d&&h){const g=c.tooltip.data()[0],f=t!==(g==null?void 0:g.index);try{r.tooltip[e&&f?"show":"hide"]({index:t})}catch(p){}}})}},updateTooltipOnRedraw(e,t){var s;const i=this,{config:a,$el:{eventRect:n,svg:o,tooltip:r},state:{event:l,hasAxis:c,hasRadar:u,hasTreemap:d}}=i;if((r==null?void 0:r.style("display"))==="block"&&l){const h=e!=null?e:(s=u?o:n)==null?void 0:s.node();if(c||u)if(i.isMultipleX())i.selectRectForMultipleXs(h,!1);else{const g=t!=null?t:i.getDataIndexFromEvent(l);t===-1?i.api.tooltip.hide():(i.selectRectForSingle(h,g),i.setExpand(g,null,!0))}else{const{clientX:g,clientY:f}=l;setTimeout(()=>{let p=it.elementFromPoint(g,f);const _=(0,S.select)(p).datum();if(_){const x=i.hasArcType()?i.convertToArcData(i.updateAngle(_)):_==null?void 0:_.data;d&&(p=o.node()),x&&i.showTooltip([x],p)}else i.api.tooltip.hide()},a.transition_duration)}}}},Ua={getTranslate(e,t=0){var s;const i=this,{config:a,state:n}=i,o=a.axis_rotated;let r=0,l,c;if(t&&/^(x|y2?)$/.test(e)&&(r=i.getAxisSize(e)*t),e==="main")l=he(n.margin.left),c=he(n.margin.top);else if(e==="context")l=he(n.margin2.left),c=he(n.margin2.top);else if(e==="legend")l=n.margin3.left,c=n.margin3.top;else if(e==="x")l=o?-r:0,c=o?0:n.height+r;else if(e==="y")l=o?0:-r,c=o?n.height+r:0;else if(e==="y2")l=o?0:n.width+r,c=o?-r-1:0;else if(e==="subX")l=0,c=o?0:n.height2;else if(e==="arc")l=n.arcWidth/2,c=n.arcHeight/2,(s=a.arc_rangeText_values)!=null&&s.length&&(c+=5+(i.hasType("gauge")&&a.title_text?10:0));else if(e==="polar")l=n.arcWidth/2,c=n.arcHeight/2;else if(e==="radar"){const[u,d]=i.getRadarSize();l=n.width/2-u,c=n.height/2-d}return`translate(${l}, ${c})`},transformMain(e,t){const s=this,{$el:{main:i},$T:a}=s,n=t!=null&&t.axisX?t.axisX:a(i.select(`.${et.axisX}`),e),o=t!=null&&t.axisY?t.axisY:a(i.select(`.${et.axisY}`),e),r=t!=null&&t.axisY2?t.axisY2:a(i.select(`.${et.axisY2}`),e);a(i,e).attr("transform",s.getTranslate("main")),n.attr("transform",s.getTranslate("x")),o.attr("transform",s.getTranslate("y")),r.attr("transform",s.getTranslate("y2")),i.select(`.${B.chartArcs}`).attr("transform",s.getTranslate("arc"))},transformAll(e,t){const s=this,{config:i,state:{hasAxis:a,hasTreemap:n},$el:o}=s;!n&&s.transformMain(e,t),a&&i.subchart_show&&s.transformContext(e,t),o.legend&&s.transformLegend(e)}},Za={isValidChartType(e){return!!(e&&Object.values(k).indexOf(e)>-1)},setTargetType(e,t){const s=this,{config:i,state:{withoutFadeIn:a}}=s;s.mapToTargetIds(e).forEach(n=>{a[n]=t===i.data_types[n],i.data_types[n]=t}),e||(i.data_type=t)},updateTypesElements(){const e=this,{state:{current:t}}=e;Object.keys(k).forEach(s=>{const i=k[s],a=e.hasType(i,null,!0),n=t.types.indexOf(i);n===-1&&a?t.types.push(i):n>-1&&!a&&t.types.splice(n,1)}),e.setChartElements()},hasType(e,t,s=!1){var i;const a=this,{config:n,state:{current:o}}=a,r=n.data_types,l=t||a.data.targets;let c=!1;return!s&&((i=o.types)==null?void 0:i.indexOf(e))>-1?c=!0:l!=null&&l.length?l.forEach(u=>{const d=r[u.id];(d===e||!d&&e==="line")&&(c=!0)}):Object.keys(r).length?Object.keys(r).forEach(u=>{r[u]===e&&(c=!0)}):c=n.data_type===e,c},hasTypeOf(e,t,s=[]){return e in Et?!Et[e].filter(i=>s.indexOf(i)===-1).every(i=>!this.hasType(i,t)):!1},isTypeOf(e,t){var s;const i=N(e)?e:e.id,a=this.config&&(((s=this.config.data_types)==null?void 0:s[i])||this.config.data_type);return M(t)?t.indexOf(a)>=0:a===t},hasPointType(){const e=this;return e.hasTypeOf("Line")||e.hasType("bubble")||e.hasType("scatter")},hasArcType(e,t){return this.hasTypeOf("Arc",e,t)},hasMultiArcGauge(){return this.hasType("gauge")&&this.config.gauge_type==="multi"},isLineType(e){const t=N(e)?e:e.id;return!this.config.data_types[t]||this.isTypeOf(t,Et.Line)},isStepType(e){return this.isTypeOf(e,Et.Step)},isSplineType(e){return this.isTypeOf(e,Et.Spline)},isAreaType(e){return this.isTypeOf(e,Et.Area)},isAreaRangeType(e){return this.isTypeOf(e,Et.AreaRange)},isBarType(e){return this.isTypeOf(e,"bar")},isBubbleType(e){return this.isTypeOf(e,"bubble")},isCandlestickType(e){return this.isTypeOf(e,"candlestick")},isScatterType(e){return this.isTypeOf(e,"scatter")},isTreemapType(e){return this.isTypeOf(e,"treemap")},isPieType(e){return this.isTypeOf(e,"pie")},isGaugeType(e){return this.isTypeOf(e,"gauge")},isDonutType(e){return this.isTypeOf(e,"donut")},isPolarType(e){return this.isTypeOf(e,"polar")},isRadarType(e){return this.isTypeOf(e,"radar")},isArcType(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)||this.isPolarType(e)||this.isRadarType(e)},isCirclePoint(e){const{config:t}=this,s=t.point_pattern;let i=!1;return(e==null?void 0:e.tagName)==="circle"?i=!0:i=t.point_type==="circle"&&(!s||M(s)&&s.length===0),i},lineData(e){return this.isLineType(e)?[e]:[]},arcData(e){return this.isArcType(e.data)?[e]:[]},labelishData(e){return this.isBarType(e)||this.isLineType(e)||this.isScatterType(e)||this.isBubbleType(e)||this.isCandlestickType(e)||this.isRadarType(e)||this.isTreemapType(e)?e.values.filter(t=>C(t.value)||!!t.value):[]},barLineBubbleData(e){return this.isBarType(e)||this.isLineType(e)||this.isBubbleType(e)?e.values:[]},isInterpolationType(e){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(e)>=0}},qa=Object.defineProperty,Ka=(e,t,s)=>t in e?qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,lt=(e,t,s)=>(Ka(e,typeof t!="symbol"?t+"":t,s),s);class Vt{constructor(t){lt(this,"api"),lt(this,"config"),lt(this,"cache"),lt(this,"$el"),lt(this,"state"),lt(this,"charts"),lt(this,"data",{xs:{},targets:[]}),lt(this,"axis"),lt(this,"scale",{x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null}),lt(this,"org",{xScale:null,xDomain:null}),lt(this,"color"),lt(this,"patterns"),lt(this,"levelColor"),lt(this,"point"),lt(this,"brush"),lt(this,"format",{extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null});const s=this;s.api=t,s.config=new Bt,s.cache=new fa;const i=new Ji;s.$el=i.getStore("element"),s.state=i.getStore("state"),s.$T=s.$T.bind(s)}$T(t,s,i){const{config:a,state:n}=this,o=a.transition_duration,r=a.subchart_show;let l=t;return l&&("tagName"in l&&(l=(0,S.select)(l)),l=(s!==!1&&o||s)&&(!n.zooming||n.dragging)&&!n.resizing&&n.rendered&&!r?l.transition(i).duration(o):l),l}beforeInit(){const t=this;t.callPluginHook("$beforeInit"),W(t.config.onbeforeinit,t.api)}afterInit(){const t=this;t.callPluginHook("$afterInit"),W(t.config.onafterinit,t.api)}init(){const t=this,{config:s,state:i,$el:a}=t,n=s.boost_useCssRule;if(ji(t),i.hasRadar=!i.hasAxis&&t.hasType("radar"),i.hasTreemap=!i.hasAxis&&t.hasType("treemap"),i.hasAxis=!t.hasArcType()&&!i.hasTreemap,i.datetimeId=`bb-${+new Date*wt()}`,n){const r=it.createElement("style");r.type="text/css",it.head.appendChild(r),i.style={rootSelctor:`.${i.datetimeId}`,sheet:r.sheet},a.style=r}const o={element:s.bindto,classname:"bb"};F(s.bindto)&&(o.element=s.bindto.element||"#chart",o.classname=s.bindto.classname||o.classname),a.chart=E(o.element.node)?s.bindto.element:(0,S.select)(o.element||[]),a.chart.empty()&&(a.chart=(0,S.select)(it.body.appendChild(it.createElement("div")))),a.chart.html("").classed(o.classname,!0).classed(i.datetimeId,n).style("position","relative"),t.initParams(),t.initToRender()}initToRender(t){const s=this,{config:i,state:a,$el:{chart:n}}=s,o=()=>n.style("display")==="none"||n.style("visibility")==="hidden",r=i.render.lazy||o(),l=j.MutationObserver;r&&l&&i.render.observe!==!1&&!t&&new l((c,u)=>{o()||(u.disconnect(),!a.rendered&&s.initToRender(!0))}).observe(n.node(),{attributes:!0,attributeFilter:["class","style"]}),(!r||t)&&s.convertData(i,c=>{s.initWithData(c),s.afterInit()})}initParams(){var t;const s=this,{config:i,format:a,state:n}=s,o=i.axis_rotated;if(s.color=s.generateColor(),s.levelColor=s.generateLevelColor(),i.padding===!1&&(i.axis_x_show=!1,i.axis_y_show=!1,i.axis_y2_show=!1,i.subchart_show=!1),(s.hasPointType()||(t=s.hasLegendDefsPoint)!=null&&t.call(s))&&(s.point=s.generatePoint()),n.hasAxis){s.initClip(),a.extraLineClasses=s.generateExtraLineClass(),a.dataTime=i.data_xLocaltime?pt.timeParse:pt.utcParse,a.axisTime=i.axis_x_localtime?pt.timeFormat:pt.utcFormat;const r=s.config.zoom_enabled&&s.config.zoom_type==="drag";a.defaultAxisTime=l=>{const{x:c,zoom:u}=s.scale,d=r?u:u&&c.orgDomain().toString()!==u.domain().toString(),h=l.getMilliseconds()&&".%L"||l.getSeconds()&&".:%S"||l.getMinutes()&&"%I:%M"||l.getHours()&&"%I %p"||l.getDate()!==1&&"%b %d"||d&&l.getDate()===1&&"%b'%y"||l.getMonth()&&"%-m/%-d"||"%Y";return a.axisTime(h)(l)}}n.isLegendRight=i.legend_position==="right",n.isLegendInset=i.legend_position==="inset",n.isLegendTop=i.legend_inset_anchor==="top-left"||i.legend_inset_anchor==="top-right",n.isLegendLeft=i.legend_inset_anchor==="top-left"||i.legend_inset_anchor==="bottom-left",n.rotatedPadding.top=s.getResettedPadding(n.rotatedPadding.top),n.rotatedPadding.right=o&&!i.axis_x_show?0:30,n.inputType=Yi(i.interaction_inputType_mouse,i.interaction_inputType_touch)}initWithData(t){var s,i,a;const n=this,{config:o,scale:r,state:l,$el:c,org:u}=n,{hasAxis:d,hasTreemap:h}=l,g=o.interaction_enabled,f=n.hasType("polar");if(d&&(n.axis=n.getAxisInstance(),o.zoom_enabled&&n.initZoom()),n.data.xs={},n.data.targets=n.convertDataToTargets(t),o.data_filter&&(n.data.targets=n.data.targets.filter(o.data_filter.bind(n.api))),o.data_hide&&n.addHiddenTargetIds(o.data_hide===!0?n.mapToIds(n.data.targets):o.data_hide),o.legend_hide&&n.addHiddenLegendIds(o.legend_hide===!0?n.mapToIds(n.data.targets):o.legend_hide),n.updateSizes(),n.updateScales(!0),d){const{x,y:m,y2:b,subX:y,subY:T,subY2:$}=r;x&&(x.domain(Ut(n.getXDomain(n.data.targets),!o.axis_x_inverted)),y.domain(x.domain()),u.xDomain=x.domain()),m&&(m.domain(n.getYDomain(n.data.targets,"y")),T.domain(m.domain())),b&&(b.domain(n.getYDomain(n.data.targets,"y2")),$&&$.domain(b.domain()))}if(c.svg=c.chart.append("svg").style("overflow","hidden").style("display","block"),g&&l.inputType){const x=l.inputType==="touch",{onclick:m,onover:b,onout:y}=o;c.svg.on("click",(m==null?void 0:m.bind(n.api))||null).on(x?"touchstart":"mouseenter",(b==null?void 0:b.bind(n.api))||null).on(x?"touchend":"mouseleave",(y==null?void 0:y.bind(n.api))||null)}o.svg_classname&&c.svg.attr("class",o.svg_classname);const p=E(o.color_tiles)&&n.patterns;(d||p||f||h||o.data_labels_backgroundColors||(s=n.hasLegendDefsPoint)!=null&&s.call(n))&&(c.defs=c.svg.append("defs"),d&&["id","idXAxis","idYAxis","idGrid"].forEach(x=>{n.appendClip(c.defs,l.clip[x])}),n.generateDataLabelBackgroundColorFilter(),p&&n.patterns.forEach(x=>c.defs.append(()=>x.node))),n.updateSvgSize(),n.bindResize();const _=c.svg.append("g").classed(I.main,!0).attr("transform",h?null:n.getTranslate("main"));if(c.main=_,o.subchart_show&&n.initSubchart(),o.tooltip_show&&n.initTooltip(),o.title_text&&n.initTitle(),!h&&o.legend_show&&n.initLegend(),o.data_empty_label_text&&_.append("text").attr("class",`${ut.text} ${I.empty}`).attr("text-anchor","middle").attr("dominant-baseline","middle"),d&&(o.regions.length&&n.initRegion(),!o.clipPath&&n.axis.init()),_.append("g").classed(I.chart,!0).attr("clip-path",d?l.clip.path:null),n.callPluginHook("$init"),n.initChartElements(),d&&(g&&((i=n.initEventRect)==null||i.call(n)),n.initGrid(),o.clipPath&&((a=n.axis)==null||a.init())),n.updateTargets(n.data.targets),n.updateDimension(),W(o.oninit,n.api),n.setBackground(),n.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),o.data_onmin||o.data_onmax){const x=n.getMinMaxData();W(o.data_onmin,n.api,x.min),W(o.data_onmax,n.api,x.max)}o.tooltip_show&&n.initShowTooltip(),l.rendered=!0}initChartElements(){const t=this,{hasAxis:s,hasRadar:i,hasTreemap:a}=t.state,n=[];if(s){const o=["bar","bubble","candlestick","line"];t.config.bar_front&&o.push(o.shift()),o.forEach(r=>{const l=ht(r);(r==="line"&&t.hasTypeOf(l)||t.hasType(r))&&n.push(l)})}else if(a)n.push("Treemap");else{const o=t.hasType("polar");i||n.push("Arc","Pie"),t.hasType("gauge")?n.push("Gauge"):i?n.push("Radar"):o&&n.push("Polar")}n.forEach(o=>{t[`init${o}`]()}),Q(t.config.data_labels)&&!t.hasArcType(null,["radar"])&&t.initText()}setChartElements(){const t=this,{$el:{chart:s,svg:i,defs:a,main:n,tooltip:o,legend:r,title:l,grid:c,needle:u,arcs:d,circle:h,bar:g,candlestick:f,line:p,area:_,text:x}}=t;t.api.$={chart:s,svg:i,defs:a,main:n,tooltip:o,legend:r,title:l,grid:c,arc:d,circles:h,bar:{bars:g},candlestick:f,line:{lines:p,areas:_},needle:u,text:{texts:x}}}setBackground(){const t=this,{config:{background:s},state:i,$el:{svg:a}}=t;if(Q(s)){const n=a.select("g").insert(s.imgUrl?"image":"rect",":first-child");s.imgUrl?n.attr("href",s.imgUrl):s.color&&n.style("fill",s.color).attr("clip-path",i.clip.path),n.attr("class",s.class||null).attr("width","100%").attr("height","100%")}}updateTargets(t){var s;const i=this,{hasAxis:a,hasRadar:n,hasTreemap:o}=i.state,r=c=>i[`updateTargetsFor${c}`](t.filter(i[`is${c}Type`].bind(i)));if(i.updateTargetsForText(t),a)["bar","candlestick","line"].forEach(c=>{const u=ht(c);(c==="line"&&i.hasTypeOf(u)||i.hasType(c))&&r(u)}),i.updateTargetsForSubchart&&i.updateTargetsForSubchart(t);else if(i.hasArcType(t)){let c="Arc";n?c="Radar":i.hasType("polar")&&(c="Polar"),r(c)}else o&&r("Treemap");const l=i.hasType("bubble")||i.hasType("scatter");l&&((s=i.updateTargetForCircle)==null||s.call(i)),i.filterTargetsToShowAtInit(l)}filterTargetsToShowAtInit(t=!1){const s=this,{$el:{svg:i},$T:a}=s;let n=`.${I.target}`;t&&(n+=`, .${rt.chartCircles} > .${rt.circles}`),a(i.selectAll(n).filter(o=>s.isTargetToShow(o.id))).style("opacity",null)}getWithOption(t){const s={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};return Object.keys(s).forEach(i=>{let a=s[i];N(a)&&(a=s[a]),s[i]=Lt(t,`with${i}`,a)}),s}initialOpacity(t){const s=this,{withoutFadeIn:i}=s.state;return s.getBaseValue(t)!==null&&i[t.id]?null:"0"}bindResize(){const t=this,{config:s,state:i}=t,a=_a(s.resize_timer),n=[];n.push(()=>W(s.onresize,t.api)),s.resize_auto&&n.push(()=>{i.resizing=!0,s.legend_show&&(t.updateSizes(),t.updateLegend()),t.api.flush(!1)}),n.push(()=>{W(s.onresized,t.api),i.resizing=!1}),n.forEach(o=>a.add(o)),t.resizeFunction=a,j.addEventListener("resize",t.resizeFunction=a)}callPluginHook(t,...s){this.config.plugins.forEach(i=>{t==="$beforeInit"&&(i.$$=this,this.api.plugins.push(i)),i[t](...s)})}}at(Vt.prototype,[Ta,Aa,wa,Ca,Ra,Pa,Oa,Sa,Ia,Da,Ma,Fa,Ba,Na,Va,ja,Wa,Ha,Ua,Za]);function Ja(e){const t=this.config;let s,i,a;const n=()=>{const o=i.shift();if(o&&s&&Tt(s)&&o in s)return s=s[o],n();if(!o)return s};Object.keys(t).forEach(o=>{s=e,i=o.split("_"),a=n(),G(a)&&(t[o]=a)}),this.api&&(this.state.orgConfig=e)}var Qa={resize(e){const t=this.internal,{config:s,state:i}=t;i.rendered&&(s.size_width=e?e.width:null,s.size_height=e?e.height:null,i.resizing=!0,this.flush(!1),t.resizeFunction())},flush(e){var t,s;const i=this.internal,{state:a,$el:{zoomResetBtn:n}}=i;a.rendered?(a.resizing?(t=i.brush)==null||t.updateResize():(s=i.axis)==null||s.setOrient(),n==null||n.style("display","none"),i.scale.zoom=null,e?i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):i.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!a.resizing&&i.brush&&(i.brush.getSelection().call(i.brush.move),i.unselectRect())):i.initToRender(!0)},destroy(){const e=this.internal,{$el:{chart:t,style:s,svg:i}}=e;if(Q(e)){e.callPluginHook("$willDestroy"),e.charts.splice(e.charts.indexOf(this),1),e.unbindAllEvents(),i.select("*").interrupt(),e.resizeFunction.clear(),j.removeEventListener("resize",e.resizeFunction),t.classed("bb",!1).style("position",null).selectChildren().remove(),s&&s.parentNode.removeChild(s),Object.keys(this).forEach(a=>{a==="internal"&&Object.keys(e).forEach(n=>{e[n]=null}),this[a]=null,delete this[a]});for(const a in this)this[a]=()=>{}}return null},config(e,t,s){const i=this.internal,{config:a,state:n}=i,o=e==null?void 0:e.replace(/\./g,"_");let r;return e&&o in a?G(t)?(a[o]=t,r=t,s&&this.flush()):r=a[o]:(arguments.length===0||mt(e))&&(r=n.orgConfig),r}},tn={color(e){return this.internal.color(e)}};const vs=function(e){const{targets:t}=this.internal.data;if(!J(e)){const s=M(e)?e:[e];return t.filter(i=>s.some(a=>a===i.id))}return t};at(vs,{shown:function(e){return this.internal.filterTargetsToShow(this.data(e))},values:function(e,t=!0){let s=null;if(e){const i=this.data(e);M(i)&&(s=[],i.forEach(a=>{const n=a.values.map(o=>o.value);t?s=s.concat(n):s.push(n)}))}return s},names:function(e){return this.internal.updateDataAttributes("names",e)},colors:function(e){return this.internal.updateDataAttributes("colors",e)},axes:function(e){return this.internal.updateDataAttributes("axes",e)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var en={data:vs};const sn=e=>{var t,s;return(s=(t=j).btoa)==null?void 0:s.call(t,encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(i,a)=>String.fromCharCode(+`0x${a}`)))};function an(e,t,s){const{width:i,height:a}=t||s,n=new XMLSerializer,o=e.cloneNode(!0),r=Vi(Ft(it.styleSheets)).filter(h=>h.cssText).map(h=>h.cssText);o.setAttribute("xmlns",S.namespaces.xhtml),o.style.margin="0",o.style.padding="0",t.preserveFontStyle&&o.querySelectorAll("text").forEach(h=>{h.innerHTML=""});const l=n.serializeToString(o),c=it.createElement("style");c.appendChild(it.createTextNode(r.join(`
`)));const u=n.serializeToString(c),d=`<svg xmlns="${S.namespaces.svg}" width="${i}" height="${a}" 
		viewBox="0 0 ${s.width} ${s.height}" 
		preserveAspectRatio="${(t==null?void 0:t.preserveAspectRatio)===!1?"none":"xMinYMid meet"}">
			<foreignObject width="100%" height="100%">
				${u}
				${l.replace(/(url\()[^#]+/g,"$1")}
			</foreignObject></svg>`;return`data:image/svg+xml;base64,${sn(d)}`}function nn(e,t){const{top:s,left:i}=t,{x:a,y:n}=e.getBBox(),{a:o,b:r,c:l,d:c,e:u,f:d}=e.getScreenCTM(),{width:h,height:g}=e.getBoundingClientRect();return{x:o*a+l*n+u-i,y:r*a+c*n+d-s+(g-Math.round(g/4)),width:h,height:g}}function on(e){const{left:t,top:s}=e.getBoundingClientRect(),i=n=>n.textContent||n.childElementCount,a=[];return Ft(e.querySelectorAll("text")).filter(i).forEach(n=>{const o=r=>{const{fill:l,fontFamily:c,fontSize:u,textAnchor:d,transform:h}=j.getComputedStyle(r),{x:g,y:f,width:p,height:_}=nn(r,{left:t,top:s});return{[r.textContent]:{x:g,y:f,width:p,height:_,fill:l,fontFamily:c,fontSize:u,textAnchor:d,transform:h}}};if(n.childElementCount>1){const r=[];return Ft(n.querySelectorAll("tspan")).filter(i).forEach(l=>{a.push(o(l))}),r}else a.push(o(n))}),a}function rn(e,t){t.forEach(s=>{Object.keys(s).forEach(i=>{const{x:a,y:n,width:o,height:r,fill:l,fontFamily:c,fontSize:u,transform:d}=s[i];if(e.save(),e.font=`${u} ${c}`,e.fillStyle=l,d==="none")e.fillText(i,a,n);else{const h=d.replace(/(matrix|\(|\))/g,"").split(",");h.splice(4).every(g=>+g==0)?(h.push(a+o-o/4),h.push(n-r+r/3)):(h.push(a),h.push(n)),e.transform(...h),e.fillText(i,0,0)}e.restore()})})}var ln={export(e,t){const s=this.internal,{state:i,$el:{chart:a,svg:n}}=s,{width:o,height:r}=i.current,l=Ht({width:o,height:r,preserveAspectRatio:!0,preserveFontStyle:!1,mimeType:"image/png"},e),c=an(a.node(),l,{width:o,height:r}),u=l.preserveFontStyle?on(n.node()):[];if(t&&E(t)){const d=new Image;d.crossOrigin="Anonymous",d.onload=()=>{const h=it.createElement("canvas"),g=h.getContext("2d");h.width=l.width||o,h.height=l.height||r,g.drawImage(d,0,0),u.length&&(rn(g,u),u.length=0),t.bind(this)(h.toDataURL(l.mimeType))},d.src=c}return c}},cn={focus(e){const t=this.internal,{state:s}=t,i=t.mapToTargetIds(e),a=t.$el.svg.selectAll(t.selectorTargets(i.filter(t.isTargetToShow,t)));this.revert(),this.defocus(),a.classed(H.focused,!0).classed(H.defocused,!1),t.hasArcType()&&!s.hasRadar&&(t.expandArc(i),t.hasType("gauge")&&t.markOverlapped(e,t,`.${_t.gaugeValue}`)),t.toggleFocusLegend(i,!0),s.focusedTargetIds=i,s.defocusedTargetIds=s.defocusedTargetIds.filter(n=>i.indexOf(n)<0)},defocus(e){const t=this.internal,{state:s}=t,i=t.mapToTargetIds(e);t.$el.svg.selectAll(t.selectorTargets(i.filter(t.isTargetToShow,t))).classed(H.focused,!1).classed(H.defocused,!0),t.hasArcType(null,["polar"])&&(t.unexpandArc(i),t.hasType("gauge")&&t.undoMarkOverlapped(t,`.${_t.gaugeValue}`)),t.toggleFocusLegend(i,!1),s.focusedTargetIds=s.focusedTargetIds.filter(n=>i.indexOf(n)<0),s.defocusedTargetIds=i},revert(e){const t=this.internal,{config:s,state:i,$el:a}=t,n=t.mapToTargetIds(e);a.svg.selectAll(t.selectorTargets(n)).classed(H.focused,!1).classed(H.defocused,!1),t.hasArcType(null,["polar"])&&t.unexpandArc(n),s.legend_show&&(t.showLegend(n.filter(t.isLegendToShow.bind(t))),a.legend.selectAll(t.selectorLegends(n)).filter(function(){return(0,S.select)(this).classed(H.legendItemFocused)}).classed(H.legendItemFocused,!1)),i.focusedTargetIds=[],i.defocusedTargetIds=[]}},dn={legend:{show:function(e){const t=this.internal;t.showLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},hide:function(e){const t=this.internal;t.hideLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})}}},un={load(e){const t=this.internal,{config:s}=t;e.xs&&t.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(i=>{s.data_classes[i]=e.classes[i]}),"categories"in e&&t.axis.isCategorized()&&(s.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(i=>{s.data_axes[i]=e.axes[i]}),"colors"in e&&Object.keys(e.colors).forEach(i=>{s.data_colors[i]=e.colors[i]}),"unload"in e&&e.unload!==!1?t.unload(t.mapToTargetIds(e.unload===!0?null:e.unload),()=>{He(()=>t.loadFromArgs(e))}):t.loadFromArgs(e)},unload(e){const t=this.internal;let s=e||{};mt(s)&&this.tooltip.hide(),M(s)?s={ids:s}:N(s)&&(s={ids:[s]});const i=t.mapToTargetIds(s.ids);t.unload(i,()=>{t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.cache.remove(i),_s.call(t,s.done,s.resizeAfter)})}};function Ts(e,t,s){const i=this.internal,a=i.mapToTargetIds(t),n=i.state.hiddenTargetIds.map(l=>a.indexOf(l)>-1&&l).filter(Boolean);i.state.toggling=!0,i[`${e?"remove":"add"}HiddenTargetIds`](a);const o=i.$el.svg.selectAll(i.selectorTargets(a)),r=e?null:"0";e&&n.length&&(o.style("display",null),W(i.config.data_onshown,this,n)),i.$T(o).style("opacity",r,"important").call(ge,()=>{!e&&n.length===0&&(o.style("display","none"),W(i.config.data_onhidden,this,a)),o.style("opacity",r)}),s.withLegend&&i[`${e?"show":"hide"}Legend`](a),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.state.toggling=!1}var hn={show(e,t={}){Ts.call(this,!0,e,t)},hide(e,t={}){Ts.call(this,!1,e,t)},toggle(e,t={}){const s=this.internal,i={show:[],hide:[]};s.mapToTargetIds(e).forEach(a=>i[s.isTargetToShow(a)?"hide":"show"].push(a)),i.show.length&&this.show(i.show,t),i.hide.length&&setTimeout(()=>this.hide(i.hide,t),0)}},gn={tooltip:{show:function(e){var t,s,i;const a=this.internal,{$el:n,config:o,state:{eventReceiver:r,hasTreemap:l,inputType:c}}=a;let u,d;if(e.mouse&&(d=e.mouse),e.data){const{data:h}=e,g=(t=a.getYScaleById(h.id))==null?void 0:t(h.value);l&&h.id?r.rect=n.main.select(`${a.selectorTarget(h.id,void 0,"rect")}`):a.isMultipleX()?d=[a.xx(h),g]:(o.tooltip_grouped||(d=[0,g]),u=(i=h.index)!=null?i:a.hasArcType()&&h.id?(s=a.getArcElementByIdOrIndex(h.id))==null?void 0:s.datum().index:a.getIndexByX(h.x))}else G(e.x)?u=a.getIndexByX(e.x):G(e.index)&&(u=e.index);(c==="mouse"?["mouseover","mousemove"]:["touchstart"]).forEach(h=>{a.dispatchEvent(h,u,d)})},hide:function(){var e,t,s;const i=this.internal,{state:{inputType:a},$el:{tooltip:n}}=i,o=n==null?void 0:n.datum();if(o){const{index:r}=JSON.parse(o.current)[0];(a==="mouse"?["mouseout"]:["touchend"]).forEach(l=>{i.dispatchEvent(l,r)})}a==="touch"&&i.callOverOutForTouch(),i.hideTooltip(!0),(e=i.hideGridFocus)==null||e.call(i),(t=i.unexpandCircles)==null||t.call(i),(s=i.expandBarTypeShapes)==null||s.call(i,!1)}}},fn=Object.defineProperty,pn=(e,t,s)=>t in e?fn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,As=(e,t,s)=>(pn(e,typeof t!="symbol"?t+"":t,s),s);class It{constructor(t){As(this,"plugins",[]),As(this,"internal");const s=new Vt(this);this.internal=s,function i(a,n,o){Object.keys(a).forEach(r=>{const l=E(a[r]),c=n!==o,u=Q(a[r]),d=u&&Object.keys(a[r]).length>0;l&&(!c&&d||c)?n[r]=a[r].bind(o):u&&!l?n[r]={}:n[r]=a[r],d&&i(a[r],n[r],o)})}(It.prototype,this,this),Ja.call(s,t),s.beforeInit(),s.init()}}at(It.prototype,[Qa,tn,en,ln,cn,dn,un,hn,gn]);function ws(e,t,s){const{config:i}=e,a=(n,o)=>{const r=C(o)?o:o===!1?void 0:null;r!==null&&(i[`axis_${n}_${t}`]=r)};G(s)&&(Tt(s)?Object.keys(s).forEach(n=>{a(n,s[n])}):(C(s)||s===!1)&&["y","y2"].forEach(n=>{a(n,s)}),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function Ss(e,t){const{config:s}=e;return{x:s[`axis_x_${t}`],y:s[`axis_y_${t}`],y2:s[`axis_y2_${t}`]}}var xn={axis:{labels:function(e){const t=this.internal;let s;return e&&(Object.keys(e).forEach(i=>{t.axis.setLabelText(i,e[i])}),t.axis.updateLabels()),["x","y","y2"].forEach(i=>{const a=t.axis.getLabelText(i);a&&(!s&&(s={}),s[i]=a)}),s},min:function(e){const t=this.internal;return D(e)||e===!1?ws(t,"min",e):Ss(t,"min")},max:function(e){const t=this.internal;return D(e)||e===!1?ws(t,"max",e):Ss(t,"max")},range:function(e){const{axis:t}=this;if(arguments.length){const{min:s,max:i}=e;G(i)&&t.max(i),G(s)&&t.min(s)}else return{max:t.max(),min:t.min()}}}},_n={category(e,t){const s=this.internal,{config:i}=s;return arguments.length>1&&(i.axis_x_categories[e]=t,s.redraw()),i.axis_x_categories[e]},categories(e){const t=this.internal,{config:s}=t;if(!e||!Array.isArray(e)){const i=s.axis_x_categories;return mt(i)?Object.values(t.data.xs)[0]:i}return s.axis_x_categories=e,t.redraw(),s.axis_x_categories}};function Fe(e,t){const s=this.internal,{config:i}=s,a=i.transition_duration&&se(),n=`grid_${t}_lines`;return e&&(i[n]=e,s.updateGrid(),s.redrawGrid(a)),i[n]}function Rs(e,t){const s=`grid_${t}_lines`;return Fe.bind(this)(this.internal.config[s].concat(e||[]),t)}function Cs(e,t){this.internal.removeGridLines(e,t)}const ks=function(e){return Fe.bind(this)(e,"x")};at(ks,{add(e){return Rs.bind(this)(e,"x")},remove(e){return Cs.bind(this)(e,!0)}});const Es=function(e){return Fe.bind(this)(e,"y")};at(Es,{add(e){return Rs.bind(this)(e,"y")},remove(e){return Cs.bind(this)(e,!1)}});var mn={xgrids:ks,ygrids:Es},$n={groups(e){const t=this.internal,{config:s}=t;return J(e)||(s.data_groups=e,t.redraw()),s.data_groups}};function Ls(e,t=!1){const s=this.internal,{config:i}=s,a=i.transition_duration&&se();return e?(i.regions=t?i.regions.concat(e):e,s.updateRegion(),s.redrawRegion(a),t?i.regions:e):i.regions}const Ps=function(e){return Ls.bind(this)(e)};at(Ps,{add:function(e){return Ls.bind(this)(e,!0)},remove:function(e){const t=this.internal,{config:s,$T:i}=t,a=e||{},n=Lt(a,"classes",[ie.region]);let o=t.$el.main.select(`.${ie.regions}`).selectAll(n.map(r=>`.${r}`));return i(o).style("opacity","0").remove(),o=s.regions,Object.keys(a).length?(o=o.filter(r=>{let l=!1;return r.class?(r.class.split(" ").forEach(c=>{n.indexOf(c)>=0&&(l=!0)}),!l):!0}),s.regions=o):s.regions=[],o}});var yn={regions:Ps},bn={x(e){const t=this.internal,{axis:s,data:i}=t,a=s.isCustomX()&&s.isCategorized();return M(e)&&(a?this.categories(e):(t.updateTargetX(i.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),a?this.categories():i.xs},xs(e){const t=this.internal;return F(e)&&(t.updateTargetXs(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs}},vn={flow(e){const t=this.internal;let s;(e.json||e.rows||e.columns)&&t.convertData(e,a=>{s=a,i()});function i(){let a,n=0,o=0,r,l;if(t.state.redrawing||!s||!se())return;const c=[],u=t.getMaxDataCount(),d=t.convertDataToTargets(s,!0),h=t.axis.isTimeSeries();t.data.targets.forEach(p=>{let _=!1;for(let x=0;x<d.length;x++)if(p.id===d[x].id){_=!0,p.values[p.values.length-1]&&(o=p.values[p.values.length-1].index+1),n=d[x].values.length;for(let m=0;m<n;m++)d[x].values[m].index=o+m,h||(d[x].values[m].x=o+m);p.values=p.values.concat(d[x].values),d.splice(x,1);break}!_&&c.push(p.id)}),t.data.targets.forEach(p=>{for(let _=0;_<c.length;_++)if(p.id===c[_]){o=p.values[p.values.length-1].index+1;for(let x=0;x<n;x++)p.values.push({id:p.id,index:o+x,x:h?t.getOtherTargetX(o+x):o+x,value:null})}}),t.data.targets.length&&d.forEach(p=>{const _=[];for(let x=t.data.targets[0].values[0].index;x<o;x++)_.push({id:p.id,index:x,x:h?t.getOtherTargetX(x):x,value:null});p.values.forEach(x=>{x.index+=o,h||(x.x+=o)}),p.values=_.concat(p.values)}),t.data.targets=t.data.targets.concat(d);const g=t.data.targets[0],f=g.values[0];G(e.to)?(n=0,l=h?xt.call(t,e.to):e.to,g.values.forEach(p=>{p.x<l&&n++})):G(e.length)&&(n=e.length),u?u===1&&h&&(r=(g.values[g.values.length-1].x-f.x)/2,a=[new Date(+f.x-r),new Date(+f.x+r)]):(h?r=g.values.length>1?g.values[g.values.length-1].x-f.x:f.x-t.getXDomain(t.data.targets)[0]:r=1,a=[f.x-r,f.x]),a&&t.updateXDomain(null,!0,!0,!1,a),t.updateTargets(t.data.targets),t.redraw({flow:{index:f.index,length:n,duration:D(e.duration)?e.duration:t.config.transition_duration,done:e.done,orgDataCount:u},withLegend:!0,withTransition:u>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}},Zt=Y(10),Tn=Object.defineProperty,An=(e,t,s)=>t in e?Tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Xe=(e,t,s)=>(An(e,typeof t!="symbol"?t+"":t,s),s);class Os{constructor(t){Xe(this,"owner"),Xe(this,"config"),Xe(this,"scale");const s=Nt(),{config:i,params:a}=t;this.owner=t,this.config=i,this.scale=s,(i.noTransition||!a.config.transition_duration)&&(i.withoutTransition=!0),i.range=this.scaleExtent((a.orgXScale||s).range())}static getSizeFor1Char(t){const s={w:5.5,h:11.5};return!t.empty()&&t.select("text").text("0").call(i=>{try{const{width:a,height:n}=i.node().getBBox();a&&n&&(s.w=a,s.h=n)}catch(a){}finally{i.text("")}}),this.getSizeFor1Char=()=>s,s}getTickTransformSetter(t){const{config:s}=this,i=t==="x"?a=>`translate(${a+s.tickOffset},0)`:a=>`translate(0,${a})`;return(a,n)=>{a.attr("transform",o=>D(o)?i(Math.ceil(n(o))):null)}}scaleExtent(t){const s=t[0],i=t[t.length-1];return s<i?[s,i]:[i,s]}generateTicks(t,s){const{tickStepSize:i}=this.owner.params,[a,n]=t.domain();let o=[];if(s&&i){let r=Math.round(a);for(;r<=n;)o.push(r),r+=i}else if(t.ticks){const{tickArguments:r}=this.config;if(t.type==="log"&&!r){const l=Nt("_log").domain([a>0?a:1,n]).range(t.range());o=l.ticks();for(let c=n.toFixed().length;o.length>15;c--)o=l.ticks(c);o.splice(0,1,a),o.splice(o.length-1,1,n)}else o=t.ticks(...this.config.tickArguments||[]);o=o.map(l=>N(l)&&C(l)&&!isNaN(l)&&Math.round(l*10)/10||l)}return o}copyScale(){const t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t}textFormatted(t){const s=this.config.tickFormat,i=/\d+\.\d+0{5,}\d$/.test(t)?+String(t).replace(/0+\d$/,""):t,a=s?s(i):i;return G(a)?a:""}transitionise(t){const{config:s}=this;let i=t;if(s.withoutTransition)i=t.interrupt();else if(s.transition||!this.owner.params.noTransition)try{i=t.transition(s.transition)}catch(a){}return i}}var wn=Object.defineProperty,Sn=(e,t,s)=>t in e?wn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ae=(e,t,s)=>(Sn(e,typeof t!="symbol"?t+"":t,s),s);class Rn{constructor(t={}){ae(this,"helper"),ae(this,"config"),ae(this,"params"),ae(this,"g"),ae(this,"generatedTicks");const s={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};s.tickLength=Math.max(s.innerTickSize,0)+s.tickPadding,this.config=s,this.params=t,this.helper=new Os(this)}create(t){const s=this,{config:i,helper:a,params:n}=s,{scale:o}=a,{orient:r}=i,l=this.splitTickText.bind(s),c=/^(left|right)$/.test(r),u=/^(top|bottom)$/.test(r),d=a.getTickTransformSetter(u?"x":"y"),h=d===a.axisX?"y":"x",g=/^(top|left)$/.test(r)?-1:1,f=n.tickTextRotate;this.config.range=o.rangeExtent?o.rangeExtent():a.scaleExtent((n.orgXScale||o).range());const{innerTickSize:p,tickLength:_,range:x}=i,m=n.id,b=m&&/^(x|y|y2)$/.test(m)?n.config[`axis_${m}_tick_text_position`]:{x:0,y:0},y=m==="subX"?"subchart_axis_x":`axis_${m}`,T=n.config[`${y}_show`],$={tick:T?n.config[`${y}_tick_show`]:!1,text:T?n.config[`${y}_tick_text_show`]:!1};let v;t.each(function(){const A=(0,S.select)(this);let L=this.__chart__||o,w=a.copyScale();v=A,this.__chart__=w,i.tickOffset=n.isCategory?Math.ceil((w(1)-w(0))/2):0;const z=A.selectAll(".domain").data([0]);if(z.enter().append("path").attr("class","domain").merge(z).attr("d",()=>{const R=i.outerTickSize*g;return u?`M${x[0]},${R}V0H${x[1]}V${R}`:`M${R},${x[0]}H0V${x[1]}H${R}`}),$.tick||$.text){const R=i.tickValues||a.generateTicks(w,c);s.generatedTicks=R;let O=A.selectAll(".tick").data(R,w);const K=O.enter().insert("g",".domain").attr("class","tick"),ct=O.exit().remove();O=K.merge(O),$.tick&&K.append("line"),$.text&&K.append("text");const dt=Os.getSizeFor1Char(O),le=[];let te=O.select("text").selectAll("tspan").data((nt,zt)=>{const Yt=n.tickMultiline?l(nt,w,R,c,dt.w):M(a.textFormatted(nt))?a.textFormatted(nt).concat():[a.textFormatted(nt)];return le[zt]=Yt.length,Yt.map(jt=>({index:zt,splitted:jt}))});te.exit().remove(),te=te.enter().append("tspan").merge(te).text(nt=>nt.splitted),te.attr("x",u?0:_*g).attr("dx",(()=>{let nt=0;return/(top|bottom)/.test(r)&&f&&(nt=8*Math.sin(Math.PI*(f/180))*(r==="top"?-1:1)),nt+(b.x||0)})()).attr("dy",(nt,zt)=>{const Yt=".71em";let jt=0;return r!=="top"&&(jt=dt.h,zt===0&&(jt=c?-((le[nt.index]-1)*(dt.h/2)-3):b.y===0?Yt:0)),C(jt)&&b.y?jt+b.y:jt||Yt});const Ko=O.select("line"),Ye=O.select("text");if(K.select("line").attr(`${h}2`,p*g),K.select("text").attr(h,_*g),s.setTickLineTextPosition(Ko,Ye),n.tickTitle){const nt=Ye.select("title");(nt.empty()?Ye.append("title"):nt).text(zt=>n.tickTitle[zt])}if(w.bandwidth){const nt=w,zt=nt.bandwidth()/2;L=Yt=>nt(Yt)+zt,w=L}else L.bandwidth?L=w:d(ct,w);O=n.owner.state.flowing?a.transitionise(O):n.owner.$T(O),d(K,L),d(O.style("opacity",null),w)}}),this.g=v}getGeneratedTicks(t){var s;const i=((s=this.generatedTicks)==null?void 0:s.length)-1;let a=this.generatedTicks;if(i>t){const n=Math.round(i/t+.1);a=this.generatedTicks.map((o,r)=>r%n===0?o:null).filter(o=>o!==null).splice(0,t)}return a}getTickXY(){const{config:t}=this,s={x:0,y:0};return this.params.isCategory&&(s.x=t.tickCentered?0:t.tickOffset,s.y=t.tickCentered?t.tickOffset:0),s}getTickSize(t){const{scale:s}=this.helper,{config:i}=this,{innerTickSize:a,range:n}=i,o=s(t)+(i.tickCentered?0:i.tickOffset);return n[0]<o&&o<n[1]?a:0}setTickLineTextPosition(t,s){const i=this.getTickXY(),{innerTickSize:a,orient:n,tickLength:o,tickOffset:r}=this.config,l=this.params.tickTextRotate,c=f=>{const p=["start","end"];return n==="top"&&p.reverse(),f?p[f>0?0:1]:"middle"},u=f=>f?`rotate(${f})`:null,d=f=>{const p=f/(n==="bottom"?15:23);return f?11.5-2.5*p*(f>0?1:-1):o},{config:{axis_rotated:h,axis_x_tick_text_inner:g}}=this.params.owner;switch(n){case"bottom":t.attr("x1",i.x).attr("x2",i.x).attr("y2",this.getTickSize.bind(this)),s.attr("x",0).attr("y",d(l)).style("text-anchor",c(l)).style("text-anchor",(f,p,{length:_})=>!h&&p===0&&(g===!0||g.first)?"start":!h&&p===_-1&&(g===!0||g.last)?"end":c(l)).attr("transform",u(l));break;case"top":t.attr("x2",0).attr("y2",-a),s.attr("x",0).attr("y",-d(l)*2).style("text-anchor",c(l)).attr("transform",u(l));break;case"left":t.attr("x2",-a).attr("y1",i.y).attr("y2",i.y),s.attr("x",-o).attr("y",r).style("text-anchor","end");break;case"right":t.attr("x2",a).attr("y2",0),s.attr("x",o).attr("y",0).style("text-anchor","start")}}splitTickText(t,s,i,a,n){const{params:o}=this,r=this.helper.textFormatted(t),l=N(r)&&r.indexOf(`
`)>-1?r.split(`
`):[];if(l.length)return l;if(M(r))return r;let c=o.tickWidth;(!c||c<=0)&&(c=a?95:o.isCategory?Math.ceil(o.isInverted?s(i[0])-s(i[1]):s(i[1])-s(i[0]))-12:110);function u(d,h){let g,f,p;for(let _=1;_<h.length;_++)if(h.charAt(_)===" "&&(f=_),g=h.substr(0,_+1),p=n*g.length,c<p)return u(d.concat(h.substr(0,f||_)),h.slice(f?f+1:_));return d.concat(h)}return u(l,String(r))}scale(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale}orient(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?String(t):"bottom",this):this.config.orient}tickFormat(t){const{config:s}=this;return arguments.length?(s.tickFormat=t,this):s.tickFormat}tickCentered(t){const{config:s}=this;return arguments.length?(s.tickCentered=t,this):s.tickCentered}tickOffset(){return this.config.tickOffset}tickInterval(t){var s;const{outerTickSize:i,tickOffset:a,tickValues:n}=this.config;let o;if(this.params.isCategory)o=a*2;else{const r=(s=this.params.owner.scale.zoom)!=null?s:this.helper.scale;o=(this.g.select("path.domain").node().getTotalLength()-i*2)/(t||this.g.selectAll("line").size());const c=n?n.map((u,d,h)=>{const g=d+1;return g<h.length?r(h[g])-r(u):null}).filter(Boolean):[];o=Math.min(...c,o)}return o===1/0?0:o}ticks(...t){const{config:s}=this;return t.length?(s.tickArguments=Ft(t),this):s.tickArguments}tickCulling(t){const{config:s}=this;return arguments.length?(s.tickCulling=t,this):s.tickCulling}tickValues(t){const{config:s}=this;if(E(t))s.tickValues=()=>t(this.helper.scale.domain());else{if(!arguments.length)return s.tickValues;s.tickValues=t}return this}setTransition(t){return this.config.transition=t,this}}var Cn=Object.defineProperty,kn=(e,t,s)=>t in e?Cn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Ct=(e,t,s)=>(kn(e,typeof t!="symbol"?t+"":t,s),s),En={getAxisInstance:function(){return this.axis||new Ln(this)}};class Ln{constructor(t){Ct(this,"owner"),Ct(this,"x"),Ct(this,"subX"),Ct(this,"y"),Ct(this,"y2"),Ct(this,"axesList",{}),Ct(this,"tick",{x:null,y:null,y2:null}),Ct(this,"xs",[]),Ct(this,"orient",{x:"bottom",y:"left",y2:"right",subX:"bottom"}),this.owner=t,this.setOrient()}getAxisClassName(t){return`${et.axis} ${et[`axis${ht(t)}`]}`}isHorizontal(t,s){const i=t.config.axis_rotated;return s?i:!i}isCategorized(){const{config:t,state:s}=this.owner;return t.axis_x_type.indexOf("category")>=0||s.hasRadar}isCustomX(){const{config:t}=this.owner;return!this.isTimeSeries()&&(t.data_x||Q(t.data_xs))}isTimeSeries(t="x"){return this.owner.config[`axis_${t}_type`]==="timeseries"}isLog(t="x"){return this.owner.config[`axis_${t}_type`]==="log"}isTimeSeriesY(){return this.isTimeSeries("y")}getAxisType(t="x"){let s="linear";return this.isTimeSeries(t)?s=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(t)&&(s="log"),s}init(){const t=this.owner,{config:s,$el:{main:i,axis:a},state:{clip:n}}=t,o=s.axis_rotated,r=["x","y"];s.axis_y2_show&&r.push("y2"),r.forEach(l=>{const c=this.getAxisClassName(l),u=et[`axis${l.toUpperCase()}Label`];a[l]=i.append("g").attr("class",c).attr("clip-path",()=>{let d=null;return l==="x"?d=n.pathXAxis:l==="y"&&(d=n.pathYAxis),d}).attr("transform",t.getTranslate(l)).style("visibility",s[`axis_${l}_show`]?null:"hidden"),a[l].append("text").attr("class",u).attr("transform",["rotate(-90)",null][l==="x"?+!o:+o]).style("text-anchor",()=>this.textAnchorForAxisLabel(l)),this.generateAxes(l)})}setOrient(){const t=this.owner,{axis_rotated:s,axis_y_inner:i,axis_y2_inner:a}=t.config;this.orient={x:s?"left":"bottom",y:s?i?"top":"bottom":i?"right":"left",y2:s?a?"bottom":"top":a?"left":"right",subX:s?"left":"bottom"}}generateAxes(t){const s=this.owner,{config:i}=s,a=[],n=i[`axis_${t}_axes`],o=i.axis_rotated;let r;t==="x"?r=o?Zt.axisLeft:Zt.axisBottom:t==="y"?r=o?Zt.axisBottom:Zt.axisLeft:t==="y2"&&(r=o?Zt.axisTop:Zt.axisRight),n.length&&n.forEach(l=>{const c=l.tick||{},u=s.scale[t].copy();l.domain&&u.domain(l.domain),a.push(r(u).ticks(c.count).tickFormat(E(c.format)?c.format.bind(s.api):d=>d).tickValues(c.values).tickSizeOuter(c.outer===!1?0:6))}),this.axesList[t]=a}updateAxes(){const t=this.owner,{config:s,$el:{main:i},$T:a}=t;Object.keys(this.axesList).forEach(n=>{const o=s[`axis_${n}_axes`],r=t.scale[n].copy(),l=r.range();this.axesList[n].forEach((c,u)=>{const d=c.scale().range();l.every((f,p)=>f===d[p])||c.scale().range(l);const h=`${this.getAxisClassName(n)}-${u+1}`;let g=i.select(`.${h.replace(/\s/,".")}`);g.empty()?g=i.append("g").attr("class",h).style("visibility",s[`axis_${n}_show`]?null:"hidden").call(c):(o[u].domain&&r.domain(o[u].domain),a(g).call(c.scale(r))),g.attr("transform",t.getTranslate(n,u+1))})})}setAxis(t,s,i,a){const n=this.owner;t!=="subX"&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,s,i,t==="x"&&(n.scale.zoom||n.config.subchart_show||n.state.resizing)?!0:a)}getAxis(t,s,i,a,n){const o=this.owner,{config:r}=o,l=/^(x|subX)$/.test(t),c=l?"x":t,u=l&&this.isCategorized(),d=this.orient[t],h=n?0:o.getAxisTickRotate(c);let g;if(l)g=t==="subX"?o.format.subXAxisTick:o.format.xAxisTick;else{const m=r[`axis_${t}_tick_format`];E(m)&&(g=m.bind(o.api))}let f=this.tick[c];const p=Ht({outerTick:i,noTransition:a,config:r,id:t,tickTextRotate:h,owner:o},l&&{isCategory:u,isInverted:r.axis_x_inverted,tickMultiline:r.axis_x_tick_multiline,tickWidth:r.axis_x_tick_width,tickTitle:u&&r.axis_x_tick_tooltip&&o.api.categories(),orgXScale:o.scale.x});l||(p.tickStepSize=r[`axis_${c}_tick_stepSize`]);const _=new Rn(p).scale(l&&o.scale.zoom||s).orient(d);if(l&&this.isTimeSeries()&&f&&!E(f)){const m=xt.bind(o);f=f.map(b=>m(b))}else!l&&this.isTimeSeriesY()&&(_.ticks(r.axis_y_tick_time_value),f=null);f&&_.tickValues(f),_.tickFormat(g||!l&&o.isStackNormalized()&&(m=>`${m}%`)),u&&(_.tickCentered(r.axis_x_tick_centered),mt(r.axis_x_tick_culling)&&(r.axis_x_tick_culling=!1));const x=r[`axis_${c}_tick_count`];return x&&_.ticks(x),_}updateXAxisTickValues(t,s){var i;const a=this.owner,{config:n}=a,o=n.axis_x_tick_fit;let r=n.axis_x_tick_count,l;return(o||r&&o)&&(l=a.mapTargetsToUniqueXs(t),this.isCategorized()&&r>l.length&&(r=l.length),l=this.generateTickValues(l,r,this.isTimeSeries())),s?s.tickValues(l):this.x&&(this.x.tickValues(l),(i=this.subX)==null||i.tickValues(l)),l}getId(t){const{config:s,scale:i}=this.owner;let a=s.data_axes[t];return(!a||!i[a])&&(a="y"),a}getXAxisTickFormat(t){const s=this.owner,{config:i,format:a}=s,n=t&&i.subchart_axis_x_tick_format||i.axis_x_tick_format,o=this.isTimeSeries(),r=this.isCategorized();let l;return n?E(n)?l=n.bind(s.api):o&&(l=c=>c?a.axisTime(n)(c):""):l=o?a.defaultAxisTime:r?s.categoryName:c=>c<0?c.toFixed(0):c,E(l)?c=>l.apply(s,r?[c,s.categoryName(c)]:[c]):l}getTickValues(t){const s=this.owner,i=s.config[`axis_${t}_tick_values`],a=s[`${t}Axis`];return(E(i)?i.call(s.api):i)||(a?a.tickValues():void 0)}getLabelOptionByAxisId(t){return this.owner.config[`axis_${t}_label`]}getLabelText(t){const s=this.getLabelOptionByAxisId(t);return N(s)?s:s?s.text:null}setLabelText(t,s){const i=this.owner,{config:a}=i,n=this.getLabelOptionByAxisId(t);N(n)?a[`axis_${t}_label`]=s:n&&(n.text=s)}getLabelPosition(t,s){const i=this.owner.config.axis_rotated,a=this.getLabelOptionByAxisId(t),n=Tt(a)&&a.position?a.position:s[+!i],o=r=>!!~n.indexOf(r);return{isInner:o("inner"),isOuter:o("outer"),isLeft:o("left"),isCenter:o("center"),isRight:o("right"),isTop:o("top"),isMiddle:o("middle"),isBottom:o("bottom")}}getAxisLabelPosition(t){return this.getLabelPosition(t,t==="x"?["inner-top","inner-right"]:["inner-right","inner-top"])}getLabelPositionById(t){return this.getAxisLabelPosition(t)}xForAxisLabel(t){const s=this.owner,{state:{width:i,height:a}}=s,n=this.getAxisLabelPosition(t);let o=n.isMiddle?-a/2:0;return this.isHorizontal(s,t!=="x")?o=n.isLeft?0:n.isCenter?i/2:i:n.isBottom&&(o=-a),o}dxForAxisLabel(t){const s=this.owner,i=this.getAxisLabelPosition(t);let a=i.isBottom?"0.5em":"0";return this.isHorizontal(s,t!=="x")?a=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(a="-0.5em"),a}textAnchorForAxisLabel(t){const s=this.owner,i=this.getAxisLabelPosition(t);let a=i.isMiddle?"middle":"end";return this.isHorizontal(s,t!=="x")?a=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(a="start"),a}dyForAxisLabel(t){const s=this.owner,{config:i}=s,a=i.axis_rotated,n=this.getAxisLabelPosition(t).isInner,o=i[`axis_${t}_tick_rotate`]?s.getHorizontalAxisHeight(t):0,{width:r}=this.getMaxTickSize(t);let l;if(t==="x"){const c=i.axis_x_height;a?l=n?"1.2em":-25-r:n?l="-0.5em":c?l=c-10:o?l=o-10:l="3em"}else l={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],a?n?l=l[0]:o?l=o*(t==="y2"?-1:1)-l[1]:l=l[2]:l=n?l[3]:(l[4]+(i[`axis_${t}_inner`]?0:r+l[4]))*(t==="y"?-1:1);return l}getMaxTickSize(t,s){const i=this.owner,{config:a,state:{current:n},$el:{svg:o,chart:r}}=i,l=n.maxTickSize[t],c=`axis_${t}`,u={width:0,height:0};if(s||!a[`${c}_show`]||l.width>0&&i.filterTargetsToShow().length===0)return l;if(o){const d=/^y2?$/.test(t),h=i.filterTargetsToShow(i.data.targets),g=i.scale[t].copy().domain(i[`get${d?"Y":"X"}Domain`](h,t)),f=g.domain(),p=f[0]===f[1]&&f.every($=>$>0),_=M(l.domain)&&l.domain[0]===l.domain[1]&&l.domain.every($=>$>0);if(p||_)return l.size;l.domain=f,d||l.ticks.splice(0);const x=this.getAxis(t,g,!1,!1,!0),m=a[`${c}_tick_rotate`],b=a[`${c}_tick_count`];!a[`${c}_tick_values`]&&b&&x.tickValues(this.generateTickValues(f,b,d?this.isTimeSeriesY():this.isTimeSeries())),!d&&this.updateXAxisTickValues(h,x);const T=r.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0");x.create(T),T.selectAll("text").attr("transform",C(m)?`rotate(${m})`:null).each(function($,v){const{width:A,height:L}=this.getBoundingClientRect();u.width=Math.max(u.width,A),u.height=Math.max(u.height,L),d||(l.ticks[v]=A)}),T.remove()}return Object.keys(u).forEach(d=>{u[d]>0&&(l[d]=u[d])}),l}getXAxisTickTextY2Overflow(t){const s=this.owner,{axis:i,config:a,state:{current:n,isLegendRight:o,legendItemWidth:r}}=s,l=s.getAxisTickRotate("x"),c=l>0&&l<90;if((i.isCategorized()||i.isTimeSeries())&&a.axis_x_tick_fit&&(!a.axis_x_tick_culling||mt(a.axis_x_tick_culling))&&!a.axis_x_tick_multiline&&c){const u=a.axis_y2_show&&n.maxTickSize.y2.width||0,d=o&&r||0,h=n.width-s.getCurrentPaddingByDirection("left"),g=this.getXAxisTickMaxOverflow(l,h-t)-u-d,f=Math.max(0,g)+t;return Math.min(f,h/2)}return 0}getXAxisTickMaxOverflow(t,s){const i=this.owner,{axis:a,config:n,state:o}=i,r=a.isTimeSeries(),l=o.current.maxTickSize.x.ticks,c=l.length,{left:u,right:d}=o.axis.x.padding;let h=0;const g=c-(r&&n.axis_x_tick_fit?.5:0);for(let _=0;_<c;_++){const x=_+1,m=Math.cos(Math.PI*t/180)*l[_],b=x-(r?1:.5)+u;if(b<=0)continue;const T=(s-m)/b,$=g-x,v=d*T,A=$*T+v,L=m-T/2-A;h=Math.max(h,L)}const f=i.filterTargetsToShow(i.data.targets);let p=0;if(!r&&n.axis_x_tick_count<=f.length&&f[0].values.length){const _=Nt(i.axis.getAxisType("x"),0,s-h).domain([u*-1,i.getXDomainMax(i.data.targets)+1+d]);p=Math.ceil((_(1)-_(0))/2)}return h+p}updateLabels(t){const s=this.owner,{$el:{main:i},$T:a}=s,n={x:i.select(`.${et.axisX} .${et.axisXLabel}`),y:i.select(`.${et.axisY} .${et.axisYLabel}`),y2:i.select(`.${et.axisY2} .${et.axisY2Label}`)};Object.keys(n).filter(o=>!n[o].empty()).forEach(o=>{const r=n[o];a(r,t).attr("x",()=>this.xForAxisLabel(o)).attr("dx",()=>this.dxForAxisLabel(o)).attr("dy",()=>this.dyForAxisLabel(o)).text(()=>this.getLabelText(o))})}getPadding(t,s,i,a){const n=C(t)?t:t[s];return D(n)?this.owner.convertPixelToScale(/(bottom|top)/.test(s)?"y":"x",n,a):i}generateTickValues(t,s,i){let a=t;if(s){const n=E(s)?s():s;if(n===1)a=[t[0]];else if(n===2)a=[t[0],t[t.length-1]];else if(n>2){const o=this.isCategorized(),r=n-2,l=t[0],c=t[t.length-1],u=(c-l)/(r+1);let d;a=[l];for(let h=0;h<r;h++)d=+l+u*(h+1),a.push(i?new Date(d):o?Math.round(d):d);a.push(c)}}return i||(a=a.sort((n,o)=>n-o)),a}generateTransitions(t){const s=this.owner,{$el:{axis:i},$T:a}=s,[n,o,r,l]=["x","y","y2","subX"].map(c=>a(i[c],t));return{axisX:n,axisY:o,axisY2:r,axisSubX:l}}redraw(t,s,i){const a=this.owner,{config:n,$el:o}=a,r=s?"0":null;["x","y","y2","subX"].forEach(l=>{const c=this[l],u=o.axis[l];c&&u&&(!i&&!n.transition_duration&&(c.config.withoutTransition=!0),u.style("opacity",r),c.create(t[`axis${ht(l)}`]))}),this.updateAxes()}redrawAxis(t,s,i,a,n){var o,r,l;const c=this.owner,{config:u,scale:d,$el:h}=c,g=!!d.zoom;let f;!g&&this.isCategorized()&&t.length===0&&d.x.domain([0,h.axis.x.selectAll(".tick").size()]),d.x&&t.length?(!g&&c.updateXDomain(t,s.UpdateXDomain,s.UpdateOrgXDomain,s.TrimXDomain),u.axis_x_tick_values||this.updateXAxisTickValues(t)):this.x&&(this.x.tickValues([]),(o=this.subX)==null||o.tickValues([])),u.zoom_rescale&&!a&&(f=d.x.orgDomain()),["y","y2"].forEach(p=>{const _=`axis_${p}_`,x=d[p];if(x){const m=u[`${_}tick_values`],b=u[`${_}tick_count`];if(x.domain(c.getYDomain(t,p,f)),!m&&b){const y=c.axis[p],T=x.domain();y.tickValues(this.generateTickValues(T,T.every($=>$===0)?1:b,this.isTimeSeriesY()))}}}),this.redraw(i,c.hasArcType(),n),this.updateLabels(s.Transition),(s.UpdateXDomain||s.UpdateXAxis||s.Y)&&t.length&&this.setCulling(),s.Y&&((r=d.subY)==null||r.domain(c.getYDomain(t,"y")),(l=d.subY2)==null||l.domain(c.getYDomain(t,"y2")))}setCulling(){const t=this.owner,{config:s,state:{clip:i,current:a},$el:n}=t;["subX","x","y","y2"].forEach(o=>{const r=n.axis[o],c=`axis_${o==="subX"?"x":o}_tick_culling`,u=s[c];if(r&&u){const d=r.selectAll(".tick"),h=Ut(d.data()),g=h.length,f=s[`${c}_max`],p=s[`${c}_lines`];let _;if(g){for(let x=1;x<g;x++)if(g/x<f){_=x;break}d.each(function(x){const m=p?this.querySelector("text"):this;m&&(m.style.display=h.indexOf(x)%_?"none":null)})}else d.style("display",null);if(o==="x"){const x=a.maxTickSize.x.clipPath?i.pathXAxisTickTexts:null;n.svg.selectAll(`.${et.axisX} .tick text`).attr("clip-path",x)}}})}}var Pn={initEventRect(){this.$el.main.select(`.${I.chart}`).append("g").attr("class",vt.eventRects).style("fill-opacity","0")},redrawEventRect(){var e;const t=this,{config:s,state:i,$el:a}=t,n=t.isMultipleX(),o=s.axis_x_inverted;if(a.eventRect)t.updateEventRect(a.eventRect,!0);else if(t.data.targets.length){const l=t.$el.main.select(`.${vt.eventRects}`).style("cursor",s.zoom_enabled&&s.zoom_type!=="drag"?s.axis_rotated?"ns-resize":"ew-resize":null).classed(vt.eventRectsMultiple,n).classed(vt.eventRectsSingle,!n).selectAll(`.${vt.eventRect}`).data([0]).enter().append("rect");t.updateEventRect(l),n?t.generateEventRectsForMultipleXs(l):t.generateEventRectsForSingleX(l),l.call(t.getDraggableSelection()),a.eventRect=l,t.state.inputType==="touch"&&!a.svg.on("touchstart.eventRect")&&!t.hasArcType()&&t.bindTouchOnEventRect(),i.rendered&&t.updateEventRect(a.eventRect,!0)}if(!n){const r=t.getMaxDataCountTarget();(!s.data_xSort||o)&&r.sort((l,c)=>o?c.x-l.x:l.x-c.x),t.updateDataIndexByX(r),t.updateXs(r),(e=t.updatePointClass)==null||e.call(t,!0),i.eventReceiver.data=r}t.updateEventRectData()},bindTouchOnEventRect(){const e=this,{config:t,state:s,$el:{eventRect:i,svg:a}}=e,n=h=>{if(e.isMultipleX())e.selectRectForMultipleXs(h);else{const g=e.getDataIndexFromEvent(s.event);e.callOverOutForTouch(g),g===-1?e.unselectRect():e.selectRectForSingle(h,g)}},o=()=>{e.unselectRect(),e.callOverOutForTouch()},r=t.interaction_inputType_touch.preventDefault,l=Ke(r)&&r||!1,c=!isNaN(r)&&r||null;let u;const d=h=>{const g=h.type,p=h.changedTouches[0][`client${t.axis_rotated?"Y":"X"}`];g==="touchstart"?l?h.preventDefault():c!==null&&(u=p):g==="touchmove"&&(l||u===!0||c!==null&&Math.abs(u-p)>=c)&&(u=!0,h.preventDefault())};i.on("touchstart",h=>{s.event=h,e.updateEventRect()}).on("touchstart.eventRect touchmove.eventRect",h=>{if(s.event=h,!i.empty()&&i.classed(vt.eventRect)){if(s.dragging||s.flowing||e.hasArcType()||h.touches.length>1)return;d(h),n(i.node())}else o()},!0).on("touchend.eventRect",h=>{s.event=h,!i.empty()&&i.classed(vt.eventRect)&&(e.hasArcType()||!e.toggleShape||s.cancelClick)&&s.cancelClick&&(s.cancelClick=!1)},!0),a.on("touchstart",h=>{s.event=h;const{target:g}=h;g&&g!==i.node()&&o()})},updateEventRect(e,t=!1){const s=this,{state:i,$el:a}=s,{eventReceiver:n,width:o,height:r,rendered:l,resizing:c}=i,u=e||a.eventRect,d=()=>{if(n){const h=ss(a.chart.node());n.rect=u.node().getBoundingClientRect().toJSON(),n.rect.top+=h.y,n.rect.left+=h.x}};(!l||c||t)&&(u.attr("x",0).attr("y",0).attr("width",o).attr("height",r),(!l||t)&&u.classed(vt.eventRect,!0)),d()},updateEventRectData(){const e=this,{config:t,scale:s,state:i}=e,a=s.zoom||s.x,n=t.axis_rotated;let o,r,l,c;if(e.isMultipleX())o=0,r=0,l=i.width,c=i.height;else{let h,g;if(e.axis.isCategorized())h=e.getEventRectWidth(),g=f=>a(f.x)-h/2;else{const f=({index:p})=>({prev:e.getPrevX(p),next:e.getNextX(p)});h=p=>{const _=f(p),x=a.domain();let m;return _.prev===null&&_.next===null?m=n?i.height:i.width:_.prev===null?m=(a(_.next)+a(p.x))/2:_.next===null?m=a(x[1])-(a(_.prev)+a(p.x))/2:(Object.keys(_).forEach((b,y)=>{var T;_[b]=(T=_[b])!=null?T:x[y]}),m=Math.max(0,(a(_.next)-a(_.prev))/2)),m},g=p=>{const _=f(p);let x;return _.prev===null&&_.next===null?x=0:_.prev===null?x=a(a.domain()[0]):x=(a(p.x)+a(_.prev))/2,x}}o=n?0:g,r=n?g:0,l=n?i.width:h,c=n?h:i.height}const{eventReceiver:u}=i,d=(h,g)=>E(h)?h(g):h;u.coords.splice(u.data.length),u.data.forEach((h,g)=>{u.coords[g]={x:d(o,h),y:d(r,h),w:d(l,h),h:d(c,h)}})},selectRectForSingle(e,t){var s,i;const a=this,{config:n,$el:{main:o,circle:r}}=a,l=n.data_selection_enabled,c=n.data_selection_grouped,u=n.data_selection_isselectable,d=n.tooltip_grouped,h=a.getAllValuesOnIndex(t);if(d&&(a.showTooltip(h,e),(s=a.showGridFocus)==null||s.call(a,h),!l||c))return;!r&&o.selectAll(`.${I.EXPANDED}:not(.${st.shape}-${t})`).classed(I.EXPANDED,!1);const g=o.selectAll(`.${st.shape}-${t}`).classed(I.EXPANDED,!0).style("cursor",u?"pointer":null).filter(function(f){return a.isWithinShape(this,f)});g.empty()&&!d&&((i=a.hideGridFocus)==null||i.call(a),a.hideTooltip(),!c&&a.setExpand(t)),g.call(f=>{var p,_;const x=f.data();l&&(c||u!=null&&u.bind(a.api)(x))&&(e.style.cursor="pointer"),d||(a.showTooltip(x,e),(p=a.showGridFocus)==null||p.call(a,x),(_=a.unexpandCircles)==null||_.call(a),f.each(m=>a.setExpand(t,m.id)))})},selectRectForMultipleXs(e,t=!0){const s=this,{config:i,state:a}=s,n=s.filterTargetsToShow(s.data.targets);if(a.dragging||s.hasArcType(n))return;const o=$t(a.event,e),r=s.findClosestFromTargets(n,o);if(t&&a.mouseover&&(!r||r.id!==a.mouseover.id)&&(i.data_onout.call(s.api,a.mouseover),a.mouseover=void 0),!r){s.unselectRect();return}const c=(s.isBubbleType(r)||s.isScatterType(r)||!i.tooltip_grouped?[r]:s.filterByX(n,r.x)).map(d=>s.addName(d));s.showTooltip(c,e),s.setExpand(r.index,r.id,!0),s.showGridFocus(c);const u=s.dist(r,o);(s.isBarType(r.id)||u<s.getPointSensitivity(r))&&(s.$el.svg.select(`.${vt.eventRect}`).style("cursor","pointer"),t&&!a.mouseover&&(i.data_onover.call(s.api,r),a.mouseover=r))},unselectRect(){const e=this,{$el:{circle:t,tooltip:s}}=e;e.$el.svg.select(`.${vt.eventRect}`).style("cursor",null),e.hideGridFocus(),s&&(e.hideTooltip(),e._handleLinkedCharts(!1)),t&&!e.isPointFocusOnly()&&e.unexpandCircles(),e.expandBarTypeShapes(!1)},generateEventRectsForSingleX(e){const t=this,{config:s,state:i}=t,{eventReceiver:a}=i,n=e.style("cursor",s.data_selection_enabled&&s.data_selection_grouped?"pointer":null).on("click",function(o){i.event=o;const{currentIdx:r,data:l}=a,c=l[r===-1?t.getDataIndexFromEvent(o):r];t.clickHandlerForSingleX.bind(this)(c,t)});if(i.inputType==="mouse"){const o=r=>{const l=r?t.getDataIndexFromEvent(r):a.currentIdx;return l>-1?a.data[l]:null};n.on("mouseover",r=>{i.event=r,t.updateEventRect()}).on("mousemove",function(r){const l=o(r);if(i.event=r,!l)return;let{index:c}=l;const u=s.line_step_type;if(s.line_step_tooltipMatch&&t.hasType("step")&&/^step\-(before|after)$/.test(u)){const h=t.scale.zoom||t.scale.x,g=t.axis.xs[c],f=h.invert($t(r,this)[0]);u==="step-after"&&f<g?c-=1:u==="step-before"&&f>g&&(c+=1)}const d=s.tooltip_grouped&&c===a.currentIdx;if(i.dragging||i.flowing||t.hasArcType()||d){s.tooltip_show&&d&&t.setTooltipPosition();return}c!==a.currentIdx&&(t.setOverOut(!1,a.currentIdx),a.currentIdx=c),c===-1?t.unselectRect():t.selectRectForSingle(this,c),t.setOverOut(c!==-1,c)}).on("mouseout",r=>{i.event=r,!(!s||t.hasArcType()||a.currentIdx===-1)&&(t.unselectRect(),t.setOverOut(!1,a.currentIdx),a.currentIdx=-1)})}return n},clickHandlerForSingleX(e,t){const s=t,{config:i,state:a,$el:{main:n}}=s;if(!e||s.hasArcType()||a.cancelClick){a.cancelClick&&(a.cancelClick=!1);return}const{index:o}=e;n.selectAll(`.${st.shape}-${o}`).each(function(r){var l;(i.data_selection_grouped||s.isWithinShape(this,r))&&((l=s.toggleShape)==null||l.call(s,this,r,o),i.data_onclick.bind(s.api)(r,this))})},generateEventRectsForMultipleXs(e){const t=this,{state:s}=t;e.on("click",function(i){s.event=i,t.clickHandlerForMultipleXS.bind(this)(t)}),s.inputType==="mouse"&&e.on("mouseover mousemove",function(i){s.event=i,t.selectRectForMultipleXs(this)}).on("mouseout",i=>{s.event=i,!(!t.config||t.hasArcType())&&t.unselectRect()})},clickHandlerForMultipleXS(e){const t=e,{config:s,state:i}=t,a=t.filterTargetsToShow(t.data.targets);if(t.hasArcType(a))return;const n=$t(i.event,this),o=t.findClosestFromTargets(a,n),r=s.point_sensitivity==="radius"?o.r:s.point_sensitivity;o&&(t.isBarType(o.id)||t.dist(o,n)<r)&&t.$el.main.selectAll(`.${st.shapes}${t.getTargetSelectorSuffix(o.id)}`).selectAll(`.${st.shape}-${o.index}`).each(function(){var l;(s.data_selection_grouped||t.isWithinShape(this,o))&&((l=t.toggleShape)==null||l.call(t,this,o,o.index),s.data_onclick.bind(t.api)(o,this))})}},On=Y(11),In={generateFlow(e){const t=this,{data:s,state:i,$el:a}=t;return function(){const n=e.flow.length;i.flowing=!0,s.targets.forEach(r=>{r.values.splice(0,n)}),t.updateXGrid&&t.updateXGrid(!0);const o={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(r=>{const l=r.split(".");let c=a[l[0]];c&&l.length>1&&(c=c[l[1]]),c!=null&&c.size()&&(o[r]=c)}),t.hideGridFocus(),t.setFlowList(o,e)}},setFlowList(e,t){const s=this,{flow:i,targets:a}=t,{duration:n=t.duration,index:o,length:r,orgDataCount:l}=i,c=s.getFlowTransform(a,l,o,r),u=gs();let d;u.add(Object.keys(e).map(h=>(d=e[h].transition().ease(On.easeLinear).duration(n),h==="axis.x"?d=d.call(g=>{s.axis.x.setTransition(g).create(g)}):h==="region.list"?d=d.filter(s.isRegionOnX).attr("transform",c):d=d.attr("transform",c),d))),d.call(u,()=>{s.cleanUpFlow(e,t)})},cleanUpFlow(e,t){const s=this,{config:i,state:a,$el:{svg:n}}=s,o=i.axis_rotated,{flow:r,shape:l,xv:c}=t,{cx:u,cy:d,xForText:h,yForText:g}=l.pos,{done:f=()=>{},length:p}=r;p&&(["circle","text","shape","eventRect"].forEach(_=>{const x=[];for(let m=0;m<p;m++)x.push(`.${X[_]}-${m}`);n.selectAll(`.${X[`${_}s`]}`).selectAll(x).remove()}),n.select(`.${X.xgrid}`).remove()),Object.keys(e).forEach(_=>{const x=e[_];if(_!=="axis.x"&&x.attr("transform",null),_==="grid.x")x.attr(a.xgridAttr);else if(_==="gridLines.x")x.attr("x1",o?0:c).attr("x2",o?a.width:c),x.select("text").attr("x",o?a.width:0).attr("y",c);else if(/^(area|bar|line)$/.test(_))x.attr("d",l.type[_]);else if(_==="text")x.attr("x",h).attr("y",g).style("fill-opacity",s.opacityForText.bind(s));else if(_==="circle")if(s.isCirclePoint())x.attr("cx",u).attr("cy",d);else{const m=y=>u(y)-i.point_r,b=y=>d(y)-i.point_r;x.attr("x",m).attr("y",b)}else _==="region.list"&&x.select("rect").filter(s.isRegionOnX).attr("x",s.regionX.bind(s)).attr("width",s.regionWidth.bind(s))}),i.interaction_enabled&&s.redrawEventRect(),f.call(s.api),a.flowing=!1},getFlowTransform(e,t,s,i){const a=this,{data:n,scale:{x:o}}=a,r=n.targets[0].values;let l=a.getValueOnIndex(r,s),c=a.getValueOnIndex(r,s+i),u;const d=o.domain(),h=a.updateXDomain(e,!0,!0);t?t===1||(l==null?void 0:l.x)===(c==null?void 0:c.x)?u=o(d[0])-o(h[0]):u=a.axis.isTimeSeries()?o(d[0])-o(h[0]):o((l==null?void 0:l.x)||0)-o(c.x):r.length!==1?u=o(d[0])-o(h[0]):a.axis.isTimeSeries()?(l=a.getValueOnIndex(r,0),c=a.getValueOnIndex(r,r.length-1),u=o(l.x)-o(c.x)):u=Mt(h)/2;const g=Mt(d)/Mt(h);return`translate(${u},0) scale(${g},1)`}},Dn={initClip(){const e=this,{clip:t,datetimeId:s}=e.state;t.id=`${s}-clip`,t.idXAxis=`${t.id}-xaxis`,t.idYAxis=`${t.id}-yaxis`,t.idGrid=`${t.id}-grid`,t.path=e.getClipPath(t.id),t.pathXAxis=e.getClipPath(t.idXAxis),t.pathYAxis=e.getClipPath(t.idYAxis),t.pathGrid=e.getClipPath(t.idGrid)},getClipPath(e){const t=this,{config:s}=t;return!s.clipPath&&/-clip$/.test(e)||!s.axis_x_clipPath&&/-clip-xaxis$/.test(e)||!s.axis_y_clipPath&&/-clip-yaxis$/.test(e)?null:`url(#${e})`},appendClip(e,t){t&&e.append("clipPath").attr("id",t).append("rect")},setXAxisClipPath(e){const t=this,{config:s,state:{margin:i,width:a,height:n}}=t,o=s.axis_rotated,r=Math.max(30,i.left)-(o?0:20),l=(o?i.top+n+10:i.bottom)+20,c=o?-(1+r):-(r-1),u=-15,d=o?i.left+20:a+10+r;e.attr("x",c).attr("y",u).attr("width",d).attr("height",l)},setYAxisClipPath(e){const t=this,{config:s,state:{margin:i,width:a,height:n}}=t,o=s.axis_rotated,r=Math.max(30,i.left)-(o?20:0),l=s.axis_y_inner,c=l&&!o?s.axis_y_label.text?-20:-1:o?-(1+r):-(r-1),u=-(o?20:i.top),d=(o?a+15+r:i.left+20)+(l?20:0),h=(o?i.bottom+10:i.top+n)+10;e.attr("x",c).attr("y",u).attr("width",d).attr("height",h)},updateXAxisTickClip(){const e=this,{config:t,state:{clip:s,xAxisHeight:i},$el:{defs:a}}=e,n=e.getHorizontalAxisHeight("x");if(a&&!s.idXAxisTickTexts){const o=`${s.id}-xaxisticktexts`;e.appendClip(a,o),s.pathXAxisTickTexts=e.getClipPath(s.idXAxisTickTexts),s.idXAxisTickTexts=o}!t.axis_x_tick_multiline&&e.getAxisTickRotate("x")&&n!==i&&(e.setXAxisTickClipWidth(),e.setXAxisTickTextClipPathWidth()),e.state.xAxisHeight=n},setXAxisTickClipWidth(){const e=this,{config:t,state:{current:{maxTickSize:s}}}=e,i=e.getAxisTickRotate("x");if(!t.axis_x_tick_multiline&&i){const a=Math.sin(Math.PI/180*Math.abs(i));s.x.clipPath=(e.getHorizontalAxisHeight("x")-20)/a}else s.x.clipPath=null},setXAxisTickTextClipPathWidth(){const e=this,{state:{clip:t,current:s},$el:{svg:i}}=e;i&&i.select(`#${t.idXAxisTickTexts} rect`).attr("width",s.maxTickSize.x.clipPath).attr("height",30)}};const zn=e=>D(e.position)||"end",Mn=e=>e.position==="start"?4:e.position==="middle"?0:-4;function Is(e,t,s){return i=>{let a=e?0:t;return i.position==="start"?a=e?-s:0:i.position==="middle"&&(a=(e?-s:t)/2),a}}function Ds(e,t){t==="grid"&&e.each(function(){const s=(0,S.select)(this);["x1","x2","y1","y2"].forEach(i=>s.attr(i,Math.ceil(+s.attr(i))))})}var Fn={hasGrid(){const{config:e}=this;return["x","y"].some(t=>e[`grid_${t}_show`]||e[`grid_${t}_lines`].length)},initGrid(){const e=this;e.hasGrid()&&e.initGridLines(),e.initFocusGrid()},initGridLines(){const e=this,{config:t,state:{clip:s},$el:i}=e;(t.grid_x_lines.length||t.grid_y_lines.length)&&(i.gridLines.main=i.main.insert("g",`.${I.chart}${t.grid_lines_front?" + *":""}`).attr("clip-path",s.pathGrid).attr("class",`${tt.grid} ${tt.gridLines}`),i.gridLines.main.append("g").attr("class",tt.xgridLines),i.gridLines.main.append("g").attr("class",tt.ygridLines),i.gridLines.x=(0,S.selectAll)([]))},updateXGrid(e){const t=this,{config:s,scale:i,state:a,$el:{main:n,grid:o}}=t,r=s.axis_rotated,l=t.generateGridData(s.grid_x_type,i.x),c=t.axis.isCategorized()?t.axis.x.tickOffset():0,u=d=>(i.zoom||i.x)(d)+c*(r?-1:1);a.xgridAttr=r?{x1:0,x2:a.width,y1:u,y2:u}:{x1:u,x2:u,y1:0,y2:a.height},o.x=n.select(`.${tt.xgrids}`).selectAll(`.${tt.xgrid}`).data(l),o.x.exit().remove(),o.x=o.x.enter().append("line").attr("class",tt.xgrid).merge(o.x),e||o.x.each(function(){const d=(0,S.select)(this);Object.keys(a.xgridAttr).forEach(h=>{d.attr(h,a.xgridAttr[h]).style("opacity",()=>d.attr(r?"y1":"x1")===(r?a.height:0)?"0":null)})})},updateYGrid(){const e=this,{axis:t,config:s,scale:i,state:a,$el:{grid:n,main:o}}=e,r=s.axis_rotated,l=u=>Math.ceil(i.y(u)),c=t.y.getGeneratedTicks(s.grid_y_ticks)||e.scale.y.ticks(s.grid_y_ticks);n.y=o.select(`.${tt.ygrids}`).selectAll(`.${tt.ygrid}`).data(c),n.y.exit().remove(),n.y=n.y.enter().append("line").attr("class",tt.ygrid).merge(n.y),n.y.attr("x1",r?l:0).attr("x2",r?l:a.width).attr("y1",r?0:l).attr("y2",r?a.height:l),Ds(n.y,"grid")},updateGrid(){const e=this,{$el:{grid:t,gridLines:s}}=e;!s.main&&e.initGridLines(),t.main.style("visibility",e.hasArcType()?"hidden":null),e.hideGridFocus(),e.updateGridLines("x"),e.updateGridLines("y")},updateGridLines(e){const t=this,{config:s,$el:{gridLines:i,main:a},$T:n}=t,o=s.axis_rotated,r=e==="x";s[`grid_${e}_show`]&&t[`update${e.toUpperCase()}Grid`]();let l=a.select(`.${tt[`${e}gridLines`]}`).selectAll(`.${tt[`${e}gridLine`]}`).data(s[`grid_${e}_lines`]);n(l.exit()).style("opacity","0").remove();const c=l.enter().append("g");c.append("line").style("opacity","0"),l=c.merge(l),l.each(function(u){const d=(0,S.select)(this);d.select("text").empty()&&u.text&&d.append("text").style("opacity","0")}),n(l.attr("class",u=>`${tt[`${e}gridLine`]} ${u.class||""}`.trim()).select("text").attr("text-anchor",zn).attr("transform",()=>r?o?null:"rotate(-90)":o?"rotate(-90)":null).attr("dx",Mn).attr("dy",-5)).text(function(u){var d;return(d=u.text)!=null?d:this.remove()}),i[e]=l},redrawGrid(e){const t=this,{config:{axis_rotated:s},state:{width:i,height:a},$el:{gridLines:n},$T:o}=t,r=t.xv.bind(t),l=t.yv.bind(t);let c=n.x.select("line"),u=n.x.select("text"),d=n.y.select("line"),h=n.y.select("text");return c=o(c,e).attr("x1",s?0:r).attr("x2",s?i:r).attr("y1",s?r:0).attr("y2",s?r:a),u=o(u,e).attr("x",Is(!s,i,a)).attr("y",r),d=o(d,e).attr("x1",s?l:0).attr("x2",s?l:i).attr("y1",s?0:l).attr("y2",s?a:l),h=o(h,e).attr("x",Is(s,i,a)).attr("y",l),[c.style("opacity",null),u.style("opacity",null),d.style("opacity",null),h.style("opacity",null)]},initFocusGrid(){const e=this,{config:t,state:{clip:s},$el:i}=e,a=t.grid_front,n=`.${a&&i.gridLines.main?tt.gridLines:I.chart}${a?" + *":""}`,o=i.main.insert("g",n).attr("clip-path",s.pathGrid).attr("class",tt.grid);i.grid.main=o,t.grid_x_show&&o.append("g").attr("class",tt.xgrids),t.grid_y_show&&o.append("g").attr("class",tt.ygrids),t.interaction_enabled&&t.grid_focus_show&&(o.append("g").attr("class",H.xgridFocus).append("line").attr("class",H.xgridFocus),t.grid_focus_y&&!t.tooltip_grouped&&o.append("g").attr("class",H.ygridFocus).append("line").attr("class",H.ygridFocus))},showGridFocus(e){var t;const s=this,{config:i,state:{width:a,height:n}}=s,o=i.axis_rotated,r=s.$el.main.selectAll(`line.${H.xgridFocus}, line.${H.ygridFocus}`),l=(e||[r.datum()]).filter(d=>d&&D(s.getBaseValue(d)));if(!i.tooltip_show||l.length===0||s.hasType("bubble")||s.hasArcType())return;const c=i.grid_focus_edge&&!i.tooltip_grouped,u=s.xx.bind(s);r.style("visibility",null).data(l.concat(l)).each(function(d){const h=(0,S.select)(this),g={x:u(d),y:s.getYScaleById(d.id)(d.value)};let f;if(h.classed(H.xgridFocus))f=o?[null,g.x,c?g.y:a,g.x]:[g.x,c?g.y:null,g.x,n];else{const p=s.axis.getId(d.id)==="y2";f=o?[g.y,c&&!p?g.x:null,g.y,c&&p?g.x:n]:[c&&p?g.x:null,g.y,c&&!p?g.x:a,g.y]}["x1","y1","x2","y2"].forEach((p,_)=>h.attr(p,f[_]))}),Ds(r,"grid"),(t=s.showCircleFocus)==null||t.call(s,e)},hideGridFocus(){var e;const t=this,{state:{inputType:s,resizing:i},$el:{main:a}}=t;(s==="mouse"||!i)&&(a.selectAll(`line.${H.xgridFocus}, line.${H.ygridFocus}`).style("visibility","hidden"),(e=t.hideCircleFocus)==null||e.call(t))},updateGridFocus(){var e;const t=this,{state:{inputType:s,width:i,height:a,resizing:n},$el:{grid:o}}=t,r=o.main.select(`line.${H.xgridFocus}`);if(s==="touch")r.empty()?n&&((e=t.showCircleFocus)==null||e.call(t)):t.showGridFocus();else{const l=t.config.axis_rotated;r.attr("x1",l?0:-10).attr("x2",l?i:-10).attr("y1",l?-10:0).attr("y2",l?-10:a)}return!0},generateGridData(e,t){const s=this,i=s.$el.main.select(`.${et.axisX}`).selectAll(".tick").size();let a=[];if(e==="year"){const n=s.getXDomain(),[o,r]=n.map(l=>l.getFullYear());for(let l=o;l<=r;l++)a.push(new Date(`${l}-01-01 00:00:00`))}else a=t.ticks(10),a.length>i&&(a=a.filter(n=>String(n).indexOf(".")<0));return a},getGridFilterToRemove(e){return e?t=>{let s=!1;return(M(e)?e.concat():[e]).forEach(i=>{("value"in i&&t.value===i.value||"class"in i&&t.class===i.class)&&(s=!0)}),s}:()=>!0},removeGridLines(e,t){const s=this,{config:i,$T:a}=s,n=s.getGridFilterToRemove(e),o=u=>!n(u),r=t?tt.xgridLines:tt.ygridLines,l=t?tt.xgridLine:tt.ygridLine;a(s.$el.main.select(`.${r}`).selectAll(`.${l}`).filter(n)).style("opacity","0").remove();const c=`grid_${t?"x":"y"}_lines`;i[c]=i[c].filter(o)}},Xn={initRegion(){const e=this,{$el:t}=e;t.region.main=t.main.insert("g",":first-child").attr("clip-path",e.state.clip.path).attr("class",ie.regions)},updateRegion(){const e=this,{config:t,$el:{region:s},$T:i}=e;s.main||e.initRegion(),s.main.style("visibility",e.hasArcType()?"hidden":null);const a=s.main.selectAll(`.${ie.region}`).data(t.regions);i(a.exit()).style("opacity","0").remove();const n=a.enter().append("g");n.append("rect").style("fill-opacity","0"),s.list=n.merge(a).attr("class",e.classRegion.bind(e)),s.list.each(function(o){var r;(0,S.select)(this).select("text").empty()&&((r=o.label)!=null&&r.text)&&(0,S.select)(this).append("text").style("opacity","0")})},redrawRegion(e){const t=this,{$el:{region:s},$T:i}=t;let a=s.list.select("rect"),n=s.list.selectAll("text");return a=i(a,e).attr("x",t.regionX.bind(t)).attr("y",t.regionY.bind(t)).attr("width",t.regionWidth.bind(t)).attr("height",t.regionHeight.bind(t)),n=i(n,e).attr("transform",o=>{var r;const{x:l=0,y:c=0,rotated:u=!1}=(r=o.label)!=null?r:{};return`translate(${t.regionX.bind(t)(o)+l}, ${t.regionY.bind(t)(o)+c})${u?" rotate(-90)":""}`}).attr("text-anchor",o=>{var r;return(r=o.label)!=null&&r.rotated?"end":null}).attr("dy","1em").style("fill",o=>{var r,l;return(l=(r=o.label)==null?void 0:r.color)!=null?l:null}).text(o=>{var r;return(r=o.label)==null?void 0:r.text}),[a.style("fill-opacity",o=>D(o.opacity)?o.opacity:null).on("end",function(){(0,S.select)(this.parentNode).selectAll("rect:not([x])").remove()}),n.style("opacity",null)]},getRegionXY(e,t){const s=this,{config:i,scale:a}=s,n=i.axis_rotated,o=e==="x";let r="start",l,c=0;return t.axis==="y"||t.axis==="y2"?(o||(r="end"),(o?n:!n)&&r in t&&(l=a[t.axis],c=l(t[r]))):(o?!n:n)&&r in t&&(l=a.zoom||a.x,c=l(s.axis.isTimeSeries()?xt.call(s,t[r]):t[r])),c},regionX(e){return this.getRegionXY("x",e)},regionY(e){return this.getRegionXY("y",e)},getRegionSize(e,t){const s=this,{config:i,scale:a,state:n}=s,o=i.axis_rotated,r=e==="width",l=s[r?"regionX":"regionY"](t);let c,u="end",d=n[e];return t.axis==="y"||t.axis==="y2"?(r||(u="start"),(r?o:!o)&&u in t&&(c=a[t.axis],d=c(t[u]))):(r?!o:o)&&u in t&&(c=a.zoom||a.x,d=c(s.axis.isTimeSeries()?xt.call(s,t[u]):t[u])),d<l?0:d-l},regionWidth(e){return this.getRegionSize("width",e)},regionHeight(e){return this.getRegionSize("height",e)},isRegionOnX(e){return!e.axis||e.axis==="x"}},Bn={getAxisSize(e){const t=this,s=t.config.axis_rotated;return s&&e==="x"||!s&&/y2?/.test(e)?t.getAxisWidthByAxisId(e,!0):t.getHorizontalAxisHeight(e)},getAxisWidthByAxisId(e,t){var s,i;const a=this;if(a.axis){const n=(s=a.axis)==null?void 0:s.getLabelPositionById(e),{width:o}=a.axis.getMaxTickSize(e,t),r=o===0?.5:0;return o+(((i=a.config.padding)==null?void 0:i.mode)==="fit"?n.isInner?10+r:10:n.isInner?20+r:40)}else return 40},getHorizontalAxisHeight(e){var t,s;const i=this,{config:a,state:n}=i,{rotatedPadding:o,isLegendRight:r,isLegendInset:l}=n,c=a.axis_rotated,u=((t=a.padding)==null?void 0:t.mode)==="fit",d=a[`axis_${e}_inner`],h=a[`axis_${e}_label`].text,g=13;let f=((s=a.padding)==null?void 0:s.mode)==="fit"?d&&!h?e==="y"?1:0:20:30;if(e==="x"&&!a.axis_x_show)return 8;if(e==="x"&&C(a.axis_x_height))return a.axis_x_height;if(e==="y"&&!a.axis_y_show)return a.legend_show&&!r&&!l?10:1;if(e==="y2"&&!a.axis_y2_show)return u?0:o.top;const p=i.axis.getMaxTickSize(e),_=Math.abs(a.axis_x_tick_rotate)>0&&(!a.axis_x_tick_autorotate||i.needToRotateXAxisTickTexts());return(a.axis_x_tick_multiline||_)&&p.height>g&&(f+=p.height-g),f+(i.axis.getLabelPositionById(e).isInner?0:10)+(e==="y2"&&!c?-10:0)},getEventRectWidth(){const e=this,{config:t,axis:s}=e,i=t.axis_x_inverted,a=s.x.tickInterval();return Math.max(0,i?Math.abs(a):a)},getAxisTickRotate(e){const t=this,{axis:s,config:i,state:a,$el:n}=t;let o=i[`axis_${e}_tick_rotate`];if(e==="x"){const r=s.isCategorized()||s.isTimeSeries();if(i.axis_x_tick_fit&&r){const l=i.axis_x_tick_count,c=a.current.maxTickSize.x.ticks.length;let u=0;if(l?u=l>c?c:l:c&&(u=c),u!==a.axis.x.tickCount){const{targets:d}=t.data;a.axis.x.padding=t.getXDomainPadding([t.getXDomainMinMax(d,"min"),t.getXDomainMinMax(d,"max")],u)}a.axis.x.tickCount=u}n.svg&&i.axis_x_tick_autorotate&&i.axis_x_tick_fit&&!i.axis_x_tick_multiline&&!i.axis_x_tick_culling&&r&&(o=t.needToRotateXAxisTickTexts()?i.axis_x_tick_rotate:0)}return o},needToRotateXAxisTickTexts(){const e=this,{state:{axis:t,current:s,isLegendRight:i,legendItemWidth:a}}=e,n=i&&a,o=s.width-n-e.getCurrentPaddingByDirection("left")-e.getCurrentPaddingByDirection("right"),r=t.x.tickCount+t.x.padding.left+t.x.padding.right,{width:l}=e.axis.getMaxTickSize("x"),c=r?o/r:0;return l>c}},Nn={data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},Vn={axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_inner:!1,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_inverted:!1,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]},Gn={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},Yn={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]},jn=Object.defineProperty,zs=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,Hn=Object.prototype.propertyIsEnumerable,Ms=(e,t,s)=>t in e?jn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Be=(e,t)=>{for(var s in t||(t={}))Wn.call(t,s)&&Ms(e,s,t[s]);if(zs)for(var s of zs(t))Hn.call(t,s)&&Ms(e,s,t[s]);return e},Un=Be(Be(Be({axis_rotated:!1},Vn),Gn),Yn),Zn={grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:void 0,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0};const qn=[xn,_n,vn,mn,$n,yn,bn],Fs={axis:En,clip:Dn,eventrect:Pn,flow:In,grid:Fn,region:Xn,sizeAxis:Bn},Xs={optDataAxis:Nn,optAxis:Un,optGrid:Zn};var Bs=Y(12),Kn=Object.defineProperty,Jn=Object.defineProperties,Qn=Object.getOwnPropertyDescriptors,Ns=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,eo=Object.prototype.propertyIsEnumerable,Vs=(e,t,s)=>t in e?Kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,so=(e,t)=>{for(var s in t||(t={}))to.call(t,s)&&Vs(e,s,t[s]);if(Ns)for(var s of Ns(t))eo.call(t,s)&&Vs(e,s,t[s]);return e},io=(e,t)=>Jn(e,Qn(t));function Gs(e=0){const t=this,{config:s,state:i}=t,a=t.hasMultiArcGauge(),n=i.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,o=e?Math.min(i.radiusExpanded*e-i.radius,n*.8-(1-e)*100):0;return{inner(r){const{innerRadius:l}=t.getRadius(r);return a?i.radius-n*(r.index+1):C(l)?l:0},outer(r){const{outerRadius:l}=t.getRadius(r);let c;if(a)c=i.radius-n*r.index+o;else if(t.hasType("polar")&&!e)c=t.getPolarOuterRadius(r,l);else if(c=l,e){let{radiusExpanded:u}=i;i.radius!==l&&(u-=Math.abs(i.radius-l)),c=u*e}return c},corner(r,l){const{arc_cornerRadius_ratio:c=0,arc_cornerRadius:u=0}=s,{data:{id:d},value:h}=r;let g=0;return c?g=c*l:g=C(u)?u:u.call(t.api,d,h,l),g}}}function Ne(e){return function(t){const s=({startAngle:a=0,endAngle:n=0,padAngle:o=0})=>({startAngle:a,endAngle:n,padAngle:o}),i=(0,Bs.interpolate)(s(this._current),s(t));return this._current=t,function(a){const n=i(a),{data:o,index:r,value:l}=t;return e(io(so({},n),{data:o,index:r,value:l}))}}}var ao={initPie(){const e=this,{config:t}=e,s=t.data_type,i=t[`${s}_padding`],a=t[`${s}_startingAngle`]||0,n=(i?i*.01:t[`${s}_padAngle`])||0;e.pie=(0,q.pie)().startAngle(a).endAngle(a+2*Math.PI).padAngle(n).value(o=>{var r,l;return(l=(r=o.values)==null?void 0:r.reduce((c,u)=>c+u.value,0))!=null?l:o}).sort(e.getSortCompareFn.bind(e)(!0))},updateRadius(){const e=this,{config:t,state:s}=e,i=t.data_type,a=t[`${i}_padding`],n=t.gauge_width||t.donut_width,o=e.filterTargetsToShow(e.data.targets).length*t.gauge_arcs_minWidth;s.radiusExpanded=Math.min(s.arcWidth,s.arcHeight)/2*(e.hasMultiArcGauge()&&t.gauge_label_show?.85:1),s.radius=s.radiusExpanded*.95,s.innerRadiusRatio=n?(s.radius-n)/s.radius:.6,s.gaugeArcWidth=n||(o<=s.radius-s.innerRadius?s.radius-s.innerRadius:o<=s.radius?o:s.radius);const r=t.pie_innerRadius||(a?a*(s.innerRadiusRatio+.1):0);s.outerRadius=t.pie_outerRadius,s.innerRadius=e.hasType("donut")||e.hasType("gauge")?s.radius*s.innerRadiusRatio:r},getRadius(e){const t=this,s=e==null?void 0:e.data;let{innerRadius:i,outerRadius:a}=t.state;return!C(i)&&s&&(i=i[s.id]||0),F(a)&&s&&s.id in a?a=a[s.id]:C(a)||(a=t.state.radius),{innerRadius:i,outerRadius:a}},updateArc(){const e=this;e.updateRadius(),e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded()},getArcLength(){const e=this,{config:t}=e,s=t.gauge_arcLength*3.6;let i=2*(s/360);return s<-360?i=-2:s>360&&(i=2),i*Math.PI},getStartingAngle(){const e=this,{config:t}=e,s=t.data_type,i=e.hasType("gauge")?t.gauge_fullCircle:!1,a=-1*Math.PI/2,n=Math.PI/2;let o=t[`${s}_startingAngle`]||0;return!i&&o<=a?o=a:!i&&o>=n?o=n:(o>Math.PI||o<-1*Math.PI)&&(o=Math.PI),o},updateAngle(e,t=!1){var s;const i=this,{config:a,state:n}=i,o=t&&i.hasType("gauge");let{pie:r}=i,l=e,c=!1;if(!a)return null;const u=i.getStartingAngle(),d=a.gauge_fullCircle||t&&!o?i.getArcLength():u*-2;if(l.data&&i.isGaugeType(l.data)&&!i.hasMultiArcGauge()){const{gauge_min:h,gauge_max:g}=a,f=i.getTotalDataSum(n.rendered),p=d*((f-h)/(g-h));r=r.startAngle(u).endAngle(p+u)}if(t===!1&&r(i.filterTargetsToShow()).forEach((h,g)=>{var f;!c&&h.data.id===((f=l.data)==null?void 0:f.id)&&(c=!0,l=h,l.index=g)}),isNaN(l.startAngle)&&(l.startAngle=0),isNaN(l.endAngle)&&(l.endAngle=l.startAngle),t||l.data&&(a.gauge_enforceMinMax||i.hasMultiArcGauge())){const{gauge_min:h,gauge_max:g}=a,f=t&&!o?i.getTotalDataSum(n.rendered):g,p=d/(f-h),_=(s=l.value)!=null?s:0,x=_<h?0:_<f?_-h:f-h;l.startAngle=u,l.endAngle=u+p*x}return c||t?l:null},getSvgArc(){const e=this,{inner:t,outer:s,corner:i}=Gs.call(e),a=(0,q.arc)().innerRadius(t).outerRadius(s),n=function(o,r){var l;let c="M 0 0";if(o.value||o.data){const u=r?o:(l=e.updateAngle(o))!=null?l:null;u&&(c=a.cornerRadius(i(u,s(u)))(u))}return c};return n.centroid=a.centroid,n},getSvgArcExpanded(e=1){const t=this,{inner:s,outer:i,corner:a}=Gs.call(t,e),n=(0,q.arc)().innerRadius(s).outerRadius(i);return o=>{const r=t.updateAngle(o),l=i(r);let c=0;return r&&(c=a(r,l)),r?n.cornerRadius(c)(r):"M 0 0"}},getArc(e,t,s){return s||this.isArcType(e.data)?this.svgArc(e,t):"M 0 0"},redrawArcRangeText(){const e=this,{config:t,$el:{arcs:s},state:i,$T:a}=e,n=t.arc_rangeText_format,o=e.hasType("gauge")&&t.arc_rangeText_fixed;let r=t.arc_rangeText_values;if(r!=null&&r.length){const l=t.arc_rangeText_unit==="%",c=e.getTotalDataSum(i.rendered);l&&(r=r.map(h=>c/100*h));const u=e.pie(r).map((h,g)=>(h.index=g,h));let d=s.selectAll(`.${B.arcRange}`).data(r);d.exit(),d=a(d.enter().append("text").attr("class",B.arcRange).style("text-anchor","middle").style("pointer-events","none").style("opacity","0").text(h=>{const g=l?h/c*100:h;return E(n)?n(g):`${g}${l?"%":""}`}).merge(d)),(!i.rendered||i.rendered&&!o)&&c>0&&d.attr("transform",(h,g)=>e.transformForArcLabel(u[g],!0)),d.style("opacity",h=>!o&&(h>c||c===0)?"0":null)}},transformForArcLabel(e,t=!1){var s,i,a;const n=this,{config:o,state:{radiusExpanded:r}}=n,l=n.updateAngle(e,t);let c="";if(l){if(t||n.hasMultiArcGauge()){const u=Math.sin(l.endAngle-Math.PI/2),d=o.arc_rangeText_position;let h=Math.cos(l.endAngle-Math.PI/2)*(r+(t?5:25)),g=u*(r+15-Math.abs(u*10))+3;if(t&&d){const f=o.arc_rangeText_values,p=E(d)?d(f[e.index]):d;h+=(s=p==null?void 0:p.x)!=null?s:0,g+=(i=p==null?void 0:p.y)!=null?i:0}c=`translate(${h},${g})`}else if(!n.hasType("gauge")||n.data.targets.length>1){let{outerRadius:u}=n.getRadius(e);n.hasType("polar")&&(u=n.getPolarOuterRadius(e,u));const d=this.svgArc.centroid(l),[h,g]=d.map(_=>isNaN(_)?0:_),f=Math.sqrt(h*h+g*g);let p=(a=["donut","gauge","pie","polar"].filter(n.hasType.bind(n)).map(_=>o[`${_}_label_ratio`]))==null?void 0:a[0];p?p=E(p)?p.bind(n.api)(e,u,f):p:p=u&&(f?(36/u>.375?1.175-36/u:.8)*u/f:0),c=`translate(${h*p},${g*p})`}}return c},convertToArcData(e){return this.addName({id:"data"in e?e.data.id:e.id,value:e.value,ratio:this.getRatio("arc",e),index:e.index})},textForArcLabel(e){const t=this,s=t.hasType("gauge");t.shouldShowArcLabel()&&e.style("fill",t.updateTextColor.bind(t)).attr("filter",t.updateTextBackgroundColor.bind(t)).each(function(i){var a;const n=(0,S.select)(this),o=t.updateAngle(i),r=t.getRatio("arc",o);if(t.meetsLabelThreshold(r,(a=["donut","gauge","pie","polar"].filter(t.hasType.bind(t)))==null?void 0:a[0])){const{value:c}=o||i,u=(t.getArcLabelFormat()||t.defaultArcValueFormat)(c,r,i.data.id).toString();ee(n,u,[-1,1],s)}else n.text("")})},expandArc(e){const t=this,{state:{transiting:s},$el:i}=t;if(s){const n=setInterval(()=>{s||(clearInterval(n),i.legend.selectAll(`.${H.legendItemFocused}`).size()>0&&t.expandArc(e))},10);return}const a=t.mapToTargetIds(e);i.svg.selectAll(t.selectorTargets(a,`.${B.chartArc}`)).each(function(n){if(!t.shouldExpand(n.data.id))return;const o=t.getExpandConfig(n.data.id,"duration"),r=t.getSvgArcExpanded(t.getExpandConfig(n.data.id,"rate"));(0,S.select)(this).selectAll("path").transition().duration(o).attrTween("d",Ne(t.svgArcExpanded.bind(t))).transition().duration(o*2).attrTween("d",Ne(r.bind(t)))})},unexpandArc(e){const t=this,{state:{transiting:s},$el:{svg:i}}=t;if(s)return;const a=t.mapToTargetIds(e);i.selectAll(t.selectorTargets(a,`.${B.chartArc}`)).selectAll("path").transition().duration(n=>t.getExpandConfig(n.data.id,"duration")).attrTween("d",Ne(t.svgArc.bind(t))),i.selectAll(`${B.arc}`).style("opacity",null)},getExpandConfig(e,t){const s=this,{config:i}=s,a={duration:50,rate:.98};let n;return s.isDonutType(e)?n="donut":s.isGaugeType(e)?n="gauge":s.isPieType(e)&&(n="pie"),n?i[`${n}_expand_${t}`]:a[t]},shouldExpand(e){const t=this,{config:s}=t;return t.isDonutType(e)&&s.donut_expand||t.isGaugeType(e)&&s.gauge_expand||t.isPieType(e)&&s.pie_expand},shouldShowArcLabel(){const e=this,{config:t}=e;return["donut","gauge","pie","polar"].some(s=>e.hasType(s)&&t[`${s}_label_show`])},getArcLabelFormat(){const e=this,{config:t}=e;let s=i=>i;return["donut","gauge","pie","polar"].filter(e.hasType.bind(e)).forEach(i=>{s=t[`${i}_label_format`]}),E(s)?s.bind(e.api):s},updateTargetsForArc(e){const t=this,{$el:s}=t,i=t.hasType("gauge"),a=t.getChartClass("Arc"),n=t.getClass("arcs",!0),o=t.classFocus.bind(t),r=s.main.select(`.${B.chartArcs}`),l=r.selectAll(`.${B.chartArc}`).data(t.pie(e)).attr("class",u=>a(u)+o(u.data)),c=l.enter().append("g").attr("class",a).call(this.setCssRule(!1,`.${B.chartArcs} text`,["pointer-events:none","text-anchor:middle"]));c.append("g").attr("class",n).merge(l),c.append("text").attr("dy",i&&!t.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor",t.getStylePropValue("middle")).style("pointer-events",t.getStylePropValue("none")),s.text=r.selectAll(`.${I.target} text`)},initArc(){const e=this,{$el:t}=e;t.arcs=t.main.select(`.${I.chart}`).append("g").attr("class",B.chartArcs).attr("transform",e.getTranslate("arc")),e.setArcTitle()},setArcTitle(e){const t=this,s=e||t.getArcTitle(),i=t.hasType("gauge");if(s){const a=i?_t.chartArcsGaugeTitle:B.chartArcsTitle;let n=t.$el.arcs.select(`.${a}`);n.empty()&&(n=t.$el.arcs.append("text").attr("class",a).style("text-anchor","middle")),i&&n.attr("dy","-0.3em"),ee(n,s,i?void 0:[-.6,1.35],!0)}},getArcTitle(){const e=this,t=e.hasType("donut")&&"donut"||e.hasType("gauge")&&"gauge";return t?e.config[`${t}_title`]:""},getArcTitleWithNeedleValue(){const e=this,{config:t,state:s}=e,i=e.getArcTitle();if(i&&e.config.arc_needle_show&&/{=[A-Z_]+}/.test(i)){let a=s.current.needle;return C(a)||(a=t.arc_needle_value),xe(i,{NEEDLE_VALUE:C(a)?a:0})}return!1},redrawArc(e,t,s){const i=this,{config:a,state:n,$el:{main:o}}=i,r=a.interaction_enabled,l=r&&a.data_selection_isselectable;let c=o.selectAll(`.${B.arcs}`).selectAll(`.${B.arc}`).data(i.arcData.bind(i));c.exit().transition().duration(t).style("opacity","0").remove(),c=c.enter().append("path").attr("class",i.getClass("arc",!0)).style("fill",u=>i.color(u.data)).style("cursor",u=>{var d;return(d=l==null?void 0:l.bind)!=null&&d.call(l,i.api)(u)?"pointer":null}).style("opacity","0").each(function(u){i.isGaugeType(u.data)&&(u.startAngle=a.gauge_startingAngle,u.endAngle=a.gauge_startingAngle),this._current=u}).merge(c),i.hasType("gauge")&&(i.updateGaugeMax(),i.hasMultiArcGauge()&&i.redrawArcGaugeLine()),c.attr("transform",u=>!i.isGaugeType(u.data)&&s?"scale(0)":"").style("opacity",function(u){return u===this._current?"0":null}).each(()=>{n.transiting=!0}).transition().duration(e).attrTween("d",function(u){const d=i.updateAngle(u);if(!d)return()=>"M 0 0";isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);const h=(0,Bs.interpolate)(this._current,d);return this._current=h(0),function(g){const f=h(g);return f.data=u.data,i.getArc(f,!0)}}).attr("transform",s?"scale(1)":"").style("fill",u=>{let d;return i.levelColor?(d=i.levelColor(u.data.values[0].value),a.data_colors[u.data.id]=d):d=i.color(u.data),d}).style("opacity",null).call(ge,function(){if(i.levelColor){const u=(0,S.select)(this),d=u.datum(this._current);i.updateLegendItemColor(d.data.id,u.style("fill"))}n.transiting=!1,W(a.onrendered,i.api)}),r&&i.bindArcEvent(c),i.hasType("polar")&&i.redrawPolar(),i.hasType("gauge")&&i.redrawBackgroundArcs(),a.arc_needle_show&&i.redrawNeedle(),i.redrawArcText(e),i.redrawArcRangeText()},redrawNeedle(){const e=this,{$el:t,config:s,state:{hiddenTargetIds:i,radius:a}}=e,n=(a-1)/100*s.arc_needle_length,o=i.length!==e.data.targets.length;let r=e.$el.arcs.select(`.${B.needle}`);const l=s.arc_needle_path,c=s.arc_needle_bottom_width/2,u=s.arc_needle_top_width/2,d=s.arc_needle_top_rx,h=s.arc_needle_top_ry,g=s.arc_needle_bottom_len,f=s.arc_needle_bottom_rx,p=s.arc_needle_bottom_ry,_=e.getNeedleAngle(),x=()=>{const m=e.getArcTitleWithNeedleValue();m&&e.setArcTitle(m)};if(x(),r.empty()&&(r=t.arcs.append("path").classed(B.needle,!0),t.needle=r,t.needle.updateHelper=(m,b=!1)=>{t.needle.style("display")!=="none"&&e.$T(t.needle).style("transform",`rotate(${e.getNeedleAngle(m)}deg)`).call(ge,()=>{b&&(s.arc_needle_value=m),x()})}),o){const m=E(l)?l.call(e,n):`M-${c} ${g} A${f} ${p} 0 0 0 ${c} ${g} L${u} -${n} A${d} ${h} 0 0 0 -${u} -${n} L-${c} ${g} Z`;e.$T(r).attr("d",m).style("fill",s.arc_needle_color).style("display",null).style("transform",`rotate(${_}deg)`)}else r.style("display","none")},getNeedleAngle(e){const t=this,{config:s,state:i}=t,a=t.getArcLength(),n=t.hasType("gauge"),o=t.getTotalDataSum(!0);let r=G(e)?e:s.arc_needle_value,l=s[`${s.data_type}_startingAngle`]||0,c=0;if(C(r)||(r=n&&t.data.targets.length===1?o:0),i.current.needle=r,n){l=t.getStartingAngle();const u=s.gauge_fullCircle?a:l*-2,{gauge_min:d,gauge_max:h}=s;c=u*((r-d)/(h-d))}else c=a*(r/o);return(l+c)*(180/Math.PI)},redrawBackgroundArcs(){const e=this,{config:t,state:s}=e,i=e.hasMultiArcGauge(),a=t.gauge_fullCircle,n=e.filterTargetsToShow(e.data.targets).length===0&&!!t.data_empty_label_text,o=e.getStartingAngle(),r=a?o+e.getArcLength():o*-1;let l=e.$el.arcs.select(`${i?"g":""}.${B.chartArcsBackground}`);if(i){let c=0;l=l.selectAll(`path.${B.chartArcsBackground}`).data(e.data.targets),l.enter().append("path").attr("class",(u,d)=>`${B.chartArcsBackground} ${B.chartArcsBackground}-${d}`).merge(l).style("fill",t.gauge_background||null).attr("d",({id:u})=>{if(n||s.hiddenTargetIds.indexOf(u)>=0)return"M 0 0";const d={data:[{value:t.gauge_max}],startAngle:o,endAngle:r,index:c++};return e.getArc(d,!0,!0)}),l.exit().remove()}else l.attr("d",n?"M 0 0":()=>{const c={data:[{value:t.gauge_max}],startAngle:o,endAngle:r};return e.getArc(c,!0,!0)})},bindArcEvent(e){const t=this,{config:s,state:i}=t,a=i.inputType==="touch",n=i.inputType==="mouse";function o(l,c,u){t.expandArc(u),t.api.focus(u),t.toggleFocusLegend(u,!0),t.showTooltip([c],l)}function r(l){const c=(l==null?void 0:l.id)||void 0;t.unexpandArc(c),t.api.revert(),t.revertLegend(),t.hideTooltip()}if(e.on("click",function(l,c,u){var d;const h=t.updateAngle(c);let g;h&&(g=t.convertToArcData(h),(d=t.toggleShape)==null||d.call(t,this,g,u),s.data_onclick.bind(t.api)(g,this))}),n&&e.on("mouseover",function(l,c){if(i.transiting)return;i.event=l;const u=t.updateAngle(c),d=u?t.convertToArcData(u):null,h=(d==null?void 0:d.id)||void 0;o(this,d,h),t.setOverOut(!0,d)}).on("mouseout",(l,c)=>{if(i.transiting)return;i.event=l;const u=t.updateAngle(c),d=u?t.convertToArcData(u):null;r(),t.setOverOut(!1,d)}).on("mousemove",function(l,c){const u=t.updateAngle(c),d=u?t.convertToArcData(u):null;i.event=l,t.showTooltip([d],this)}),a&&t.hasArcType()&&!t.radars){const l=c=>{var u,d;const{clientX:h,clientY:g}=(d=(u=c.changedTouches)==null?void 0:u[0])!=null?d:{clientX:0,clientY:0};return(0,S.select)(it.elementFromPoint(h,g))};t.$el.svg.on("touchstart touchmove",function(c){if(i.transiting)return;i.event=c;const d=l(c).datum(),h=d!=null&&d.data&&d.data.id?t.updateAngle(d):null,g=h?t.convertToArcData(h):null,f=(g==null?void 0:g.id)||void 0;t.callOverOutForTouch(g),J(f)?r():o(this,g,f)})}},redrawArcText(e){const t=this,{config:s,state:i,$el:{main:a,arcs:n}}=t,o=t.hasType("gauge"),r=t.hasMultiArcGauge();let l;if(o&&t.data.targets.length===1&&s.gauge_title||(l=a.selectAll(`.${B.chartArc}`).select("text").style("opacity","0").attr("class",c=>t.isGaugeType(c.data)?_t.gaugeValue:null).call(t.textForArcLabel.bind(t)).attr("transform",c=>t.transformForArcLabel.bind(t)(c)).style("font-size",c=>t.isGaugeType(c.data)&&t.data.targets.length===1&&!r?`${Math.round(i.radius/5)}px`:null).transition().duration(e).style("opacity",c=>t.isTargetToShow(c.data.id)&&t.isArcType(c.data)?null:"0"),r&&l.attr("dy","-.1em")),a.select(`.${B.chartArcsTitle}`).style("opacity",t.hasType("donut")||o?null:"0"),o){const c=s.gauge_fullCircle;c&&(l==null||l.attr("dy",`${r?0:Math.round(i.radius/14)}`)),s.gauge_label_show&&(n.select(`.${_t.chartArcsGaugeUnit}`).attr("dy",`${c?1.5:.75}em`).text(s.gauge_units),n.select(`.${_t.chartArcsGaugeMin}`).attr("dx",`${-1*(i.innerRadius+(i.radius-i.innerRadius)/(c?1:2))}px`).attr("dy","1.2em").text(t.textForGaugeMinMax(s.gauge_min,!1)),!c&&n.select(`.${_t.chartArcsGaugeMax}`).attr("dx",`${i.innerRadius+(i.radius-i.innerRadius)/2}px`).attr("dy","1.2em").text(t.textForGaugeMinMax(s.gauge_max,!0)))}},getArcElementByIdOrIndex(e){const t=this,{$el:{arcs:s}}=t,i=C(e)?a=>a.index===e:a=>a.data.id===e;return s==null?void 0:s.selectAll(`.${I.target} path`).filter(i)}},ne={initArea(e){const t=this,{config:s}=t;e.insert("g",`.${s.area_front?rt.circles:Rt.lines}`).attr("class",t.getClass("areas",!0))},updateAreaColor(e){const t=this;return t.config.area_linearGradient?t.getGradienColortUrl(e.id):t.color(e)},updateArea(e,t=!1){const s=this,{config:i,state:a,$el:n,$T:o}=s,r=t?n.subchart:n;i.area_linearGradient&&s.updateLinearGradient();const l=r.main.selectAll(`.${_e.areas}`).selectAll(`.${_e.area}`).data(s.lineData.bind(s));o(l.exit(),e).style("opacity","0").remove(),r.area=l.enter().append("path").attr("class",s.getClass("area",!0)).style("fill",s.updateAreaColor.bind(s)).style("opacity",function(){return a.orgAreaOpacity=(0,S.select)(this).style("opacity"),"0"}).merge(l),l.style("opacity",a.orgAreaOpacity),s.setRatioForGroupedData(r.area.data())},redrawArea(e,t,s=!1){const i=this,{area:a}=s?this.$el.subchart:this.$el,{orgAreaOpacity:n}=i.state;return[i.$T(a,t,wt()).attr("d",e).style("fill",i.updateAreaColor.bind(i)).style("opacity",o=>String(i.isAreaRangeType(o)?n/1.75:n))]},generateDrawArea(e,t){const s=this,{config:i}=s,a=i.line_connectNull,n=i.axis_rotated,o=s.generateGetAreaPoints(e,t),r=s.getYScaleById.bind(s),l=d=>(t?s.subxx:s.xx).call(s,d),c=(d,h)=>s.isGrouped(d.id)?o(d,h)[0][1]:r(d.id,t)(s.isAreaRangeType(d)?s.getRangedData(d,"high"):s.getShapeYMin(d.id)),u=(d,h)=>s.isGrouped(d.id)?o(d,h)[1][1]:r(d.id,t)(s.isAreaRangeType(d)?s.getRangedData(d,"low"):d.value);return d=>{let h=a?s.filterRemoveNull(d.values):d.values,g=0,f=0,p;if(s.isAreaType(d)){let _=(0,q.area)();_=n?_.y(l).x0(c).x1(u):_.x(l).y0(i.area_above?0:i.area_below?s.state.height:c).y1(u),a||(_=_.defined(x=>s.getBaseValue(x)!==null)),s.isStepType(d)&&(h=s.convertValuesToStep(h)),p=_.curve(s.getCurve(d))(h)}else h[0]&&(g=s.scale.x(h[0].x),f=s.getYScaleById(d.id)(h[0].value)),p=n?`M ${f} ${g}`:`M ${g} ${f}`;return p||"M 0 0"}},generateGetAreaPoints(e,t){const s=this,{config:i}=s,a=s.getShapeX(0,e,t),n=s.getShapeY(!!t),o=s.getShapeOffset(s.isAreaType,e,t),r=s.getYScaleById.bind(s);return function(l,c){const u=r.call(s,l.id,t)(s.getShapeYMin(l.id)),d=o(l,c)||u,h=a(l),g=l.value;let f=n(l);return i.axis_rotated&&(g>0&&f<u||g<0&&u<f)&&(f=u),[[h,d],[h,f-(u-d)],[h,f-(u-d)],[h,d]]}}},no={initBar(){const{$el:e,config:t,state:{clip:s}}=this;e.bar=e.main.select(`.${I.chart}`),e.bar=t.bar_front?e.bar.append("g"):e.bar.insert("g",":first-child"),e.bar.attr("class",bt.chartBars).call(this.setCssRule(!1,`.${bt.chartBars}`,["pointer-events:none"])),t.clipPath===!1&&(t.bar_radius||t.bar_radius_ratio)&&e.bar.attr("clip-path",s.pathXAxis.replace(/#[^)]*/,`#${s.id}`))},updateTargetsForBar(e){const t=this,{config:s,$el:i}=t,a=t.getChartClass("Bar"),n=t.getClass("bars",!0),o=t.classFocus.bind(t),r=s.interaction_enabled&&s.data_selection_isselectable;i.bar||t.initBar(),i.main.select(`.${bt.chartBars}`).selectAll(`.${bt.chartBar}`).data(e.filter(u=>u.values.some(d=>C(d.value)||t.isBarRangeType(d)))).attr("class",u=>a(u)+o(u)).enter().append("g").attr("class",a).style("opacity","0").style("pointer-events",t.getStylePropValue("none")).append("g").attr("class",n).style("cursor",u=>{var d;return(d=r==null?void 0:r.bind)!=null&&d.call(r,t.api)(u)?"pointer":null}).call(t.setCssRule(!0,` .${bt.bar}`,["fill"],t.color))},updateBar(e,t=!1){const s=this,{config:i,$el:a,$T:n}=s,o=t?a.subchart:a,r=s.getClass("bar",!0),l=s.initialOpacity.bind(s);i.bar_linearGradient&&s.updateLinearGradient();const c=o.main.selectAll(`.${bt.bars}`).selectAll(`.${bt.bar}`).data(s.labelishData.bind(s));n(c.exit(),e).style("opacity","0").remove(),o.bar=c.enter().append("path").attr("class",r).style("fill",s.updateBarColor.bind(s)).merge(c).style("opacity",l),s.setRatioForGroupedData(o.bar.data())},updateBarColor(e){const t=this,s=t.getStylePropValue(t.color);return t.config.bar_linearGradient?t.getGradienColortUrl(e.id):s?s(e):null},redrawBar(e,t,s=!1){const i=this,{bar:a}=s?i.$el.subchart:i.$el;return[i.$T(a,t,wt()).attr("d",n=>(C(n.value)||i.isBarRangeType(n))&&e(n)).style("fill",i.updateBarColor.bind(i)).style("opacity",null)]},generateDrawBar(e,t){const s=this,{config:i}=s,a=s.generateGetBarPoints(e,t),n=i.axis_rotated,o=i.bar_radius,r=i.bar_radius_ratio,l=C(o)&&o>0?()=>o:C(r)?c=>c*r:null;return(c,u)=>{const d=a(c,u),h=+n,g=+!h,f=c.value<0,p=i[`axis_${s.axis.getId(c.id)}_inverted`],_=!p&&f||p&&!f,x=["",""];let m=0;const b=s.isGrouped(c.id),y=l&&b?s.isStackingRadiusData(c):!1;if(l){const $=n?g:h,v=d[2][$]-d[0][$];m=!b||y?l(v):0;const A=`a${m},${m} ${_?"1 0 0":"0 0 1"} `;x[+!n]=`${A}${m},${m}`,x[+n]=`${A}${[-m,m][n?"sort":"reverse"]()}`,_&&x.reverse()}const T=n?`H${d[1][h]+(_?m:-m)} ${x[0]}V${d[2][g]-m} ${x[1]}H${d[3][h]}`:`V${d[1][g]+(_?-m:m)} ${x[0]}H${d[2][h]-m} ${x[1]}V${d[3][g]}`;return`M${d[0][h]},${d[0][g]}${T}z`}},isStackingRadiusData(e){const t=this,{$el:s,config:i,data:a,state:n}=t,{id:o,index:r,value:l}=e;if(n.hiddenTargetIds.indexOf(o)>-1){const h=s.bar.filter(g=>g.id===o&&g.value===l);return!h.empty()&&/a\d+/i.test(h.attr("d"))}const c=i.data_groups.find(h=>h.indexOf(o)>-1),d=t.orderTargets(t.filterTargetsToShow(a.targets.filter(t.isBarType,t))).filter(h=>c.indexOf(h.id)>-1).map(h=>h.values.filter(g=>g.index===r&&(C(l)&&l>0?g.value>0:g.value<0))[0]).filter(Boolean).map(h=>h.id);return l!==0&&d.indexOf(o)===d.length-1},generateGetBarPoints(e,t){const s=this,{config:i}=s,a=t?s.axis.subX:s.axis.x,n=s.getIndicesMax(e)+1,o=s.getBarW("bar",a,n),r=s.getShapeX(o,e,!!t),l=s.getShapeY(!!t),c=s.getShapeOffset(s.isBarType,e,!!t),u=s.getYScaleById.bind(s);return(d,h)=>{const{id:g}=d,f=u.call(s,g,t)(s.getShapeYMin(g)),p=c(d,h)||f,_=C(o)?o:o[d.id]||o._$width,x=i[`axis_${s.axis.getId(g)}_inverted`],m=d.value,b=r(d);let y=l(d);i.axis_rotated&&!x&&(m>0&&y<f||m<0&&f<y)&&(y=f),s.isBarRangeType(d)||(y-=f-p);const T=b+_;return[[b,p],[b,y],[T,y],[T,p]]}}},oo=Object.defineProperty,Ys=Object.getOwnPropertySymbols,ro=Object.prototype.hasOwnProperty,lo=Object.prototype.propertyIsEnumerable,js=(e,t,s)=>t in e?oo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,co=(e,t)=>{for(var s in t||(t={}))ro.call(t,s)&&js(e,s,t[s]);if(Ys)for(var s of Ys(t))lo.call(t,s)&&js(e,s,t[s]);return e},uo={initCandlestick(){const{$el:e}=this;e.candlestick=e.main.select(`.${I.chart}`).append("g").attr("class",St.chartCandlesticks)},updateTargetsForCandlestick(e){const t=this,{$el:s}=t,i=t.getChartClass("Candlestick");s.candlestick||t.initCandlestick(),t.$el.main.select(`.${St.chartCandlesticks}`).selectAll(`.${St.chartCandlestick}`).data(e).enter().append("g").attr("class",i).style("pointer-events","none")},updateCandlestick(e,t=!1){const s=this,{$el:i,$T:a}=s,n=t?i.subchart:i,o=s.getClass("candlestick",!0),r=s.initialOpacity.bind(s),l=n.main.selectAll(`.${St.chartCandlestick}`).selectAll(`.${St.candlestick}`).data(s.labelishData.bind(s));a(l.exit(),e).style("opacity","0").remove();const c=l.enter().filter(u=>u.value).append("g").attr("class",o);c.append("line"),c.append("path"),n.candlestick=l.merge(c).style("opacity",r)},generateDrawCandlestick(e,t){const s=this,{config:i}=s,a=s.generateGetCandlestickPoints(e,t),n=i.axis_rotated,o=i.candlestick_color_down;return(r,l,c)=>{const u=a(r,l),d=s.getCandlestickData(r),h=d==null?void 0:d._isUp,g=+n,f=+!g;c.classed&&c.classed(St[h?"valueUp":"valueDown"],!0);const p=n?`H${u[1][1]} V${u[1][0]} H${u[0][1]}`:`V${u[1][1]} H${u[1][0]} V${u[0][1]}`;c.select("path").attr("d",`M${u[0][g]},${u[0][f]}${p}z`).style("fill",m=>(h?s.color(m):F(o)?o[m.id]:o)||s.color(m));const _=c.select("line"),x=n?{x1:u[2][1],x2:u[2][2],y1:u[2][0],y2:u[2][0]}:{x1:u[2][0],x2:u[2][0],y1:u[2][1],y2:u[2][2]};for(const m in x)_.attr(m,x[m])}},generateGetCandlestickPoints(e,t=!1){const s=this,i=t?s.axis.subX:s.axis.x,a=s.getIndicesMax(e)+1,n=s.getBarW("candlestick",i,a),o=s.getShapeX(n,e,!!t),r=s.getShapeY(!!t),l=s.getShapeOffset(s.isBarType,e,!!t),c=s.getYScaleById.bind(s);return(u,d)=>{const h=c.call(s,u.id,t)(s.getShapeYMin(u.id)),g=l(u,d)||h,f=C(n)?n:n[u.id]||n._$width,p=s.getCandlestickData(u);let _;if(p&&C(p.open)&&C(p.close)){const x={start:o(u),end:0};x.end=x.start+f;const m={start:r(p.open),end:r(p.close)},b={x:x.start+f/2,high:r(p.high),low:r(p.low)};m.start-=h-g,_=[[x.start,m.start],[x.end,m.end],[b.x,b.low,b.high]]}else _=[[0,0],[0,0],[0,0,0]];return _}},redrawCandlestick(e,t,s=!1){const i=this,{$el:a,$T:n}=i,{candlestick:o}=s?a.subchart:a,r=wt(!0);return[o.each(function(l,c){const u=n((0,S.select)(this),t,r);e(l,c,u)}).style("opacity",null)]},getCandlestickData({value:e}){let t;if(M(e)){const[s,i,a,n,o=!1]=e;t={open:s,high:i,low:a,close:n},o!==!1&&(t.volume=o)}else F(e)&&(t=co({},e));return t&&(t._isUp=t.close>=t.open),t||null}},ho={initGauge(){const e=this,{config:t,$el:{arcs:s}}=e,i=(a=null,n="")=>{s.append("text").attr("class",a).style("text-anchor","middle").style("pointer-events","none").text(n)};if(e.hasType("gauge")){const a=e.hasMultiArcGauge();s.append(a?"g":"path").attr("class",B.chartArcsBackground).style("fill",!a&&t.gauge_background||null),t.gauge_units&&i(_t.chartArcsGaugeUnit),t.gauge_label_show&&(i(_t.chartArcsGaugeMin),!t.gauge_fullCircle&&i(_t.chartArcsGaugeMax))}},updateGaugeMax(){const e=this,{config:t,state:s}=e,a=e.hasMultiArcGauge()?e.getMinMaxData().max[0].value:e.getTotalDataSum(s.rendered);!t.gauge_enforceMinMax&&a+t.gauge_min*(t.gauge_min>0?-1:1)>t.gauge_max&&(t.gauge_max=a-t.gauge_min)},redrawArcGaugeLine(){const e=this,{config:t,state:s,$el:i}=e,{hiddenTargetIds:a}=e.state,n=i.main.selectAll(`.${B.arcs}`).selectAll(`.${B.arcLabelLine}`).data(e.arcData.bind(e));n.enter().append("rect").attr("class",r=>`${B.arcLabelLine} ${I.target} ${I.target}-${r.data.id}`).merge(n).style("fill",r=>e.levelColor?e.levelColor(r.data.values[0].value):e.color(r.data)).style("display",t.gauge_label_show?null:"none").each(function(r){let l=0;const c=2;let u=0,d=0,h="";if(a.indexOf(r.data.id)<0){const g=e.updateAngle(r),f=s.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length*(g.index+1),p=g.endAngle-Math.PI/2,_=s.radius-f,x=p-(_===0?0:1/_);l=s.radiusExpanded-s.radius+f,u=Math.cos(x)*_,d=Math.sin(x)*_,h=`rotate(${p*180/Math.PI}, ${u}, ${d})`}(0,S.select)(this).attr("x",u).attr("y",d).attr("width",l).attr("height",c).attr("transform",h).style("stroke-dasharray",`0, ${l+c}, 0`)})},textForGaugeMinMax(e,t){const s=this,{config:i}=s,a=i.gauge_label_extents;return E(a)?a.bind(s.api)(e,t):e},getGaugeLabelHeight(){const{config:e}=this;return this.config.gauge_label_show&&!e.gauge_fullCircle?20:0},getPaddingBottomForGauge(){const e=this;return e.getGaugeLabelHeight()*(e.config.gauge_label_show?2:2.5)}},go={initBubble(){const e=this,{config:t}=e;e.hasType("bubble")&&(t.point_show=!0,t.point_type="circle")},getBaseLength(){const e=this,{width:t,height:s}=e.state,i=gt.bubbleBaseLength;let a=e.cache.get(i);return a||e.cache.add(i,a=yt("min",[t,s])),a},getBubbleR(e){const t=this;let s=t.config.bubble_maxR;E(s)?s=s.bind(t.api)(e):C(s)||(s=t.getBaseLength()/(t.getMaxDataCount()*2)+12);const i=yt("max",t.getMinMaxData().max.map(o=>t.isBubbleZType(o)?t.getBubbleZData(o.value,"y"):F(o.value)?o.value.mid:o.value)),a=s*s*Math.PI,n=(t.isBubbleZType(e)?t.getBubbleZData(e.value,"z"):e.value)*(a/i);return Math.sqrt(n/Math.PI)},getBubbleZData(e,t){return F(e)?e[t]:e[t==="y"?0:1]}},fo={initLine(){const{$el:e}=this;e.line=e.main.select(`.${I.chart}`).append("g").attr("class",Rt.chartLines).call(this.setCssRule(!1,`.${Rt.chartLines}`,["pointer-events:none"]))},updateTargetsForLine(e){const t=this,{$el:{area:s,line:i,main:a}}=t,n=t.getChartClass("Line"),o=t.getClass("lines",!0),r=t.classFocus.bind(t);i||t.initLine();const l=e.filter(d=>!(t.isScatterType(d)||t.isBubbleType(d))),c=a.select(`.${Rt.chartLines}`).selectAll(`.${Rt.chartLine}`).data(l).attr("class",d=>n(d)+r(d)),u=c.enter().append("g").attr("class",n).style("opacity","0").style("pointer-events",t.getStylePropValue("none"));if(u.append("g").attr("class",o),t.hasTypeOf("Area")){const d=(!s&&u.empty()?c:u).filter(t.isAreaType.bind(t));t.initArea(d)}t.updateTargetForCircle(l,u)},updateLine(e,t=!1){const s=this,{format:{extraLineClasses:i},$el:a,$T:n}=s,o=t?a.subchart:a,r=o.main.selectAll(`.${Rt.lines}`).selectAll(`.${Rt.line}`).data(s.lineData.bind(s));n(r.exit(),e).style("opacity","0").remove(),o.line=r.enter().append("path").attr("class",l=>`${s.getClass("line",!0)(l)} ${i(l)||""}`).style("stroke",s.color).merge(r).style("opacity",s.initialOpacity.bind(s)).attr("transform",null)},redrawLine(e,t,s=!1){const i=this,{$el:a,$T:n}=i,{line:o}=s?a.subchart:a;return[n(o,t,wt()).attr("d",e).style("stroke",this.color).style("opacity",null)]},getCurve(e){const t=this;return t.config.axis_rotated&&t.isStepType(e)?i=>{const a=t.getInterpolate(e)(i);return a.orgPoint=a.point,a.pointRotated=function(n,o){this._point===1&&(this._point=2);const r=this._y*(1-this._t)+o*this._t;this._context.lineTo(this._x,r),this._context.lineTo(n,r),this._x=n,this._y=o},a.point=function(n,o){this._point===0?this.orgPoint(n,o):this.pointRotated(n,o)},a}:t.getInterpolate(e)},generateDrawLine(e,t){const s=this,{config:i,scale:a}=s,n=i.line_connectNull,o=i.axis_rotated,r=s.generateGetLinePoints(e,t),l=s.getYScaleById.bind(s),c=g=>(t?s.subxx:s.xx).call(s,g),u=(g,f)=>s.isGrouped(g.id)?r(g,f)[0][1]:l(g.id,t)(s.getBaseValue(g));let d=(0,q.line)();d=o?d.x(u).y(c):d.x(c).y(u),n||(d=d.defined(g=>s.getBaseValue(g)!==null));const h=t?a.subX:a.x;return g=>{const f=l(g.id,t);let p=n?s.filterRemoveNull(g.values):g.values,_=0,x=0,m;if(s.isLineType(g)){const b=i.data_regions[g.id];b?m=s.lineWithRegions(p,a.zoom||h,f,b):(s.isStepType(g)&&(p=s.convertValuesToStep(p)),m=d.curve(s.getCurve(g))(p))}else p[0]&&(_=h(p[0].x),x=f(p[0].value)),m=o?`M ${x} ${_}`:`M ${_} ${x}`;return m||"M 0 0"}},lineWithRegions(e,t,s,i){const a=this,{config:n}=a,o=n.axis_rotated,r=a.axis.isTimeSeries(),l=[],c="2 2";let u,d,h,g;if(G(i)){const y=(T,$)=>J(T)?$:r?xt.call(a,T):T;for(let T=0,$;$=i[T];T++){const v=y($.start,e[0].x),A=y($.end,e[e.length-1].x),L=$.style||{dasharray:c};l[T]={start:v,end:A,style:L}}}const f=o?y=>s(y.value):y=>t(y.x),p=o?y=>t(y.x):y=>s(y.value),_=y=>`M${y[0][0]},${y[0][1]}L${y[1][0]},${y[1][1]}`,x=r?(y,T,$,v)=>{const A=y.x.getTime(),L=T.x-y.x,w=new Date(A+L*$),z=new Date(A+L*($+v)),R=o?[[s(d($)),t(w)],[s(d($+h)),t(z)]]:[[t(w),s(d($))],[t(z),s(d($+h))]];return _(R)}:(y,T,$,v)=>{const A=o?[[s(d($),!0),t(u($))],[s(d($+v),!0),t(u($+v))]]:[[t(u($),!0),s(d($))],[t(u($+v),!0),s(d($+v))]];return _(A)},m={x:a.axis.getAxisType("x"),y:a.axis.getAxisType("y")};let b="";for(let y=0,T;T=e[y];y++){const $=e[y-1],v=$&&D($.value);let A=a.isWithinRegions(T.x,l);if(D(T.value)){if(J(l)||!A||!v)b+=`${y&&v?"L":"M"}${f(T)},${p(T)}`;else if(v){try{A=A.dasharray.split(" ")}catch(R){A=c.split(" ")}u=Nt(m.x,$.x,T.x),d=Nt(m.y,$.value,T.value);const L=t(T.x)-t($.x),w=s(T.value)-s($.value),z=Math.sqrt(Math.pow(L,2)+Math.pow(w,2));h=A[0]/z,g=h*A[1];for(let R=h;R<=1;R+=g)b+=x($,T,R,h),R+g>=1&&(b+=x($,T,1,0))}}}return b},isWithinRegions(e,t){for(let s=0,i;i=t[s];s++)if(i.start<e&&e<=i.end)return i.style;return!1},isWithinStep(e,t){return Math.abs(t-$t(this.state.event,e)[1])<30},shouldDrawPointsForLine(e){const t=this.config.line_point;return t===!0||M(t)&&t.indexOf(e.id)!==-1}};function po(e){return Tt(e)&&E(e.create)&&E(e.update)}function xo(e,t){var s;const i=this,a=(l,c)=>{const u=l.attributes;for(let d=0,h;h=u[d];d++)h=h.name,c.setAttribute(h,l.getAttribute(h))},o=new DOMParser().parseFromString(e,"image/svg+xml").documentElement,r=it.createElementNS(S.namespaces.svg,o.nodeName.toLowerCase());if(r.id=t,r.style.fill="inherit",r.style.stroke="inherit",a(o,r),(s=o.childNodes)!=null&&s.length){const l=(0,S.select)(r);"innerHTML"in r?l.html(o.innerHTML):Ft(o.childNodes).forEach(c=>{a(c,l.append(c.tagName).node())})}i.$el.defs.node().appendChild(r)}var qt={hasValidPointType(e){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(e||this.config.point_type)},hasLegendDefsPoint(){var e;const{config:t}=this;return t.legend_show&&((e=t.point_pattern)==null?void 0:e.length)&&t.legend_usePoint},getDefsPointId(e){const{state:{datetimeId:t}}=this;return`${t}-point${e}`},generatePoint(){const e=this,{$el:t,config:s}=e,i=[],a=Q(s.point_pattern)?s.point_pattern:[s.point_type];return function(n,o,...r){return function(l){var c,u,d,h;const g=e.getTargetSelectorSuffix(l.id||((c=l.data)==null?void 0:c.id)||l),f=(0,S.select)(this);i.indexOf(g)<0&&i.push(g);let p=a[i.indexOf(g)%a.length];if(e.hasValidPointType(p))p=e[p];else if(!po(p||s.point_type)){const _=e.getDefsPointId(g);if(t.defs.select(`#${_}`).size()<1&&xo.bind(e)(p,_),n==="create")return(u=e.custom)==null?void 0:u.create.bind(o)(f,_,...r);if(n==="update")return(d=e.custom)==null?void 0:d.update.bind(o)(f,...r)}return(h=p[n])==null?void 0:h.bind(o)(f,...r)}}}};const Kt=()=>wt();var be={initialOpacityForCircle(e){const{config:t,state:{withoutFadeIn:s}}=this;let i=t.point_opacity;return J(i)&&(i=this.getBaseValue(e)!==null&&s[e.id]?this.opacityForCircle(e):"0"),i},opacityForCircle(e){var t;const{config:s}=this;let i=s.point_opacity;return J(i)&&(i=s.point_show&&!((t=this.isPointFocusOnly)!=null&&t.call(this))?null:"0",i=D(this.getBaseValue(e))?this.isBubbleType(e)||this.isScatterType(e)?"0.5":i:"0"),i},initCircle(){const e=this,{$el:{main:t}}=e;e.point=e.generatePoint(),(e.hasType("bubble")||e.hasType("scatter"))&&t.select(`.${rt.chartCircles}`).empty()&&t.select(`.${I.chart}`).append("g").attr("class",rt.chartCircles)},updateTargetForCircle(e,t){const s=this,{config:i,data:a,$el:n}=s,o=i.interaction_enabled&&i.data_selection_enabled,r=o&&i.data_selection_isselectable,l=s.getClass("circles",!0);if(!i.point_show)return;!n.circle&&s.initCircle();let c=e,u=t;if(!c){c=a.targets.filter(h=>this.isScatterType(h)||this.isBubbleType(h));const d=n.main.select(`.${rt.chartCircles}`).style("pointer-events","none").selectAll(`.${rt.circles}`).data(c);d.exit().remove(),u=d.enter()}o&&u.append("g").attr("class",d=>s.generateClass(Z.selectedCircles,d.id)),u.append("g").attr("class",l).call(d=>{s.setCssRule(!0,`.${rt.circles}`,["cursor:pointer"],r)(d),s.setCssRule(!0,` .${rt.circle}`,["fill","stroke"],s.color)(d)}).style("opacity",function(){return(0,S.select)(this.parentNode).attr("class").indexOf(rt.chartCircles)>-1?"0":null}),o&&c.forEach(d=>{n.main.selectAll(`.${Z.selectedCircles}${s.getTargetSelectorSuffix(d.id)}`).selectAll(`${Z.selectedCircle}`).each(h=>{h.value=d.values[h.index].value})})},updateCircle(e=!1){const t=this,{config:s,state:i,$el:a}=t,n=t.isPointFocusOnly(),o=e?a.subchart:a;if(s.point_show&&!i.toggling){s.point_radialGradient&&t.updateLinearGradient();const r=o.main.selectAll(`.${rt.circles}`).selectAll(`.${rt.circle}`).data(l=>t.isLineType(l)&&t.shouldDrawPointsForLine(l)||t.isBubbleType(l)||t.isRadarType(l)||t.isScatterType(l)?n?[l.values[0]]:l.values:[]);r.exit().remove(),r.enter().filter(Boolean).append(t.point("create",this,t.pointR.bind(t),t.updateCircleColor.bind(t))),o.circle=o.main.selectAll(`.${rt.circles} .${rt.circle}`).style("stroke",t.getStylePropValue(t.color)).style("opacity",t.initialOpacityForCircle.bind(t))}},updateCircleColor(e){const t=this,s=t.getStylePropValue(t.color);return t.config.point_radialGradient?t.getGradienColortUrl(e.id):s?s(e):null},redrawCircle(e,t,s,i,a=!1){const n=this,{state:{rendered:o},$el:r,$T:l}=n,c=a?r.subchart:r,u=c.main.selectAll(`.${Z.selectedCircle}`);if(!n.config.point_show)return[];const d=n.point("update",n,e,t,n.updateCircleColor.bind(n),s,i,u),h=n.isCirclePoint()?"c":"",g=wt(),f=n.opacityForCircle.bind(n),p=[];return c.circle.each(function(_){let x=d.bind(this)(_);x=l(x,s||!o,g).style("opacity",f),p.push(x)}),[p,l(u,s).attr(`${h}x`,e).attr(`${h}y`,t)]},showCircleFocus(e){const t=this,{state:{hasRadar:s,resizing:i,toggling:a,transiting:n},$el:o}=t;let{circle:r}=o;if(n===!1&&r&&t.isPointFocusOnly()){const l=(s?t.radarCircleX:t.circleX).bind(t),c=(s?t.radarCircleY:t.circleY).bind(t),u=a||J(e),d=t.point("update",t,l,c,t.getStylePropValue(t.color),i?!1:u);e&&(r=r.filter(function(h){var g;const f=(g=e.filter)==null?void 0:g.call(e,p=>p.id===h.id);return f.length?(0,S.select)(this).datum(f[0]):!1})),r.attr("class",this.updatePointClass.bind(this)).style("opacity",null).each(function(h){const{id:g,index:f,value:p}=h;let _="hidden";D(p)&&(d.bind(this)(h),t.expandCircles(f,g),_=""),this.style.visibility=_})}},hideCircleFocus(){const e=this,{$el:{circle:t}}=e;e.isPointFocusOnly()&&t&&(e.unexpandCircles(),t.style("visibility","hidden"))},circleX(e){return this.xx(e)},updateCircleY(e=!1){const t=this,s=t.generateGetLinePoints(t.getShapeIndices(t.isLineType),e);return(i,a)=>{const n=i.id;return t.isGrouped(n)?s(i,a)[0][1]:t.getYScaleById(n,e)(t.getBaseValue(i))}},expandCircles(e,t,s){const i=this,a=i.pointExpandedR.bind(i);s&&i.unexpandCircles();const n=i.getShapeByIndex("circle",e,t).classed(I.EXPANDED,!0),o=a(n)/i.config.point_r,r=1-o;i.isCirclePoint()?n.attr("r",a):n.each(function(){const l=(0,S.select)(this);if(this.tagName==="circle")l.attr("r",a);else{const{width:c,height:u}=this.getBBox(),d=r*(+l.attr("x")+c/2),h=r*(+l.attr("y")+u/2);l.attr("transform",`translate(${d} ${h}) scale(${o})`)}})},unexpandCircles(e){const t=this,s=t.pointR.bind(t),i=t.getShapeByIndex("circle",e).filter(function(){return(0,S.select)(this).classed(I.EXPANDED)}).classed(I.EXPANDED,!1);if(i.attr("r",s),!t.isCirclePoint()){const a=s(i)/t.config.point_r;i.attr("transform",a!==1?`scale(${a})`:null)}},pointR(e){const t=this,{config:s}=t,i=s.point_r;let a=i;return t.isBubbleType(e)?a=t.getBubbleR(e):E(i)&&(a=i.bind(t.api)(e)),e.r=a,a},pointExpandedR(e){const t=this,{config:s}=t,i=t.isBubbleType(e)?1.15:1.75;return s.point_focus_expand_enabled?s.point_focus_expand_r||t.pointR(e)*i:t.pointR(e)},pointSelectR(e){const t=this,s=t.config.point_select_r;return E(s)?s(e):s||t.pointR(e)*4},isPointFocusOnly(){const e=this;return e.config.point_focus_only&&!e.hasType("bubble")&&!e.hasType("scatter")&&!e.hasArcType(null,["radar"])},isWithinCircle(e,t){const{config:s,state:i}=this,a=$t(i.event,e),n=(0,S.select)(e),o=this.isCirclePoint(e)?"c":"",r=s.point_sensitivity==="radius"?e.getAttribute("r"):s.point_sensitivity;let l=+n.attr(`${o}x`),c=+n.attr(`${o}y`);if(!(l||c)&&e.nodeType===1){const{x:u,y:d}=fe(e);l=u,c=d}return Math.sqrt(Math.pow(l-a[0],2)+Math.pow(c-a[1],2))<(t||r)},getPointSensitivity(e){const t=this;let s=t.config.point_sensitivity;return E(s)?s=s.call(t.api,e):s==="radius"&&(s=e.r),s},updatePointClass(e){const t=this,{circle:s}=t.$el;let i=!1;return(F(e)||s)&&(i=e===!0?s.each(function(a){let n=t.getClass("circle",!0)(a);this.getAttribute("class").indexOf(I.EXPANDED)>-1&&(n+=` ${I.EXPANDED}`),this.setAttribute("class",n)}):t.getClass("circle",!0)(e)),i},generateGetLinePoints(e,t){const s=this,{config:i}=s,a=s.getShapeX(0,e,t),n=s.getShapeY(t),o=s.getShapeOffset(s.isLineType,e,t),r=s.getYScaleById.bind(s);return(l,c)=>{const u=r.call(s,l.id,t)(s.getShapeYMin(l.id)),d=o(l,c)||u,h=a(l);let g=n(l);i.axis_rotated&&(l.value>0&&g<u||l.value<0&&u<g)&&(g=u);const f=[h,g-(u-d)];return[f,f,f,f]}},custom:{create(e,t,s){return e.append("use").attr("xlink:href",`#${t}`).attr("class",this.updatePointClass.bind(this)).style("fill",s).node()},update(e,t,s,i,a,n,o){const r=this,{width:l,height:c}=e.node().getBBox(),u=g=>D(g.value)?t(g)-l/2:0,d=g=>D(g.value)?s(g)-c/2:0;let h=e;return a&&(n&&h.attr("x",u),h=r.$T(h,a,Kt()),o&&r.$T(o,a,Kt())),h.attr("x",u).attr("y",d).style("fill",i)}},circle:{create(e,t,s){return e.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",t).style("fill",s).node()},update(e,t,s,i,a,n,o){const r=this;let l=e;return r.hasType("bubble")&&l.attr("r",r.pointR.bind(r)),a&&(n&&l.attr("cx",t),l.attr("cx")&&(l=r.$T(l,a,Kt())),o&&r.$T(l,a,Kt())),l.attr("cx",t).attr("cy",s).style("fill",i)}},rectangle:{create(e,t,s){const i=a=>t(a)*2;return e.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",i).attr("height",i).style("fill",s).node()},update(e,t,s,i,a,n,o){const r=this,l=r.config.point_r,c=h=>t(h)-l,u=h=>s(h)-l;let d=e;return a&&(n&&d.attr("x",c),d=r.$T(d,a,Kt()),o&&r.$T(o,a,Kt())),d.attr("x",c).attr("y",u).style("fill",i)}}};function Ws(e){const t=e.config.polar_level_max;let s=e.getMinMaxData().max[0].value;return t&&t>s&&(s=t),s}var _o={initPolar(){const e=this,{$el:{arcs:t},config:s}=e,i=s.polar_level_text_show,a=s.polar_level_text_backgroundColor;t.levels=t.append("g").attr("class",Pt.levels),i&&a&&e.generateDataLabelBackgroundColorFilter(a)},getPolarOuterRadius(e,t){var s;const i=Ws(this);return((s=e==null?void 0:e.data.values[0].value)!=null?s:0)/i*t},updateTargetsForPolar(e){this.updateTargetsForArc(e)},redrawPolar(){const e=this,{config:t}=e;t.polar_level_show&&e.updatePolarLevel()},updatePolarLevel(){const e=this,{config:t,state:s,$el:{arcs:{levels:i}}}=e,a=t.polar_level_depth,n=Ws(e),o=pe(0,a),r=s.radius,l=o.map(h=>r*((h+1)/a)),c=(t.polar_level_text_format||function(){}).bind(e.api),u=i.selectAll(`.${Pt.level}`).data(o);u.exit().remove();const d=u.enter().append("g").attr("class",(h,g)=>`${Pt.level} ${Pt.level}-${g}`);if(d.append("circle"),d.merge(u).selectAll("circle").style("visibility",t.polar_level_show?null:"hidden").attr("cx",0).attr("cy",0).attr("r",h=>l[h]),t.polar_level_text_show){const h=t.polar_level_text_backgroundColor,g=`#${s.datetimeId}-labels-bg${e.getTargetSelectorSuffix(h)}`;d.append("text").style("text-anchor","middle"),d.merge(u).selectAll("text").attr("dy",f=>-l[f]+5).attr("filter",h?`url(${g})`:null).text(f=>c(n/o.length*(f+1)))}}};function mo(e,t,s,i,a,n){const o=e&&i>0?s-i:i,r=2*Math.PI;return a*(1-n*(t==="x"?Math.sin:Math.cos)(o*r/s))}const Jt=gt.radarPoints,Hs=gt.radarTextWidth;var $o={initRadar(){const e=this,{config:t,state:{current:s},$el:i}=e;e.hasType("radar")&&(i.radar=i.main.select(`.${I.chart}`).append("g").attr("class",rs.chartRadars),i.radar.levels=i.radar.append("g").attr("class",Pt.levels),i.radar.axes=i.radar.append("g").attr("class",et.axis),i.radar.shapes=i.radar.append("g").attr("class",st.shapes),s.dataMax=t.radar_axis_max||e.getMinMaxData().max[0].value,t.radar_axis_text_show&&(t.interaction_enabled&&e.bindRadarEvent(),e.updateRadarLevel(),e.updateRadarAxes()))},getRadarSize(){const e=this,{config:t,state:{arcWidth:s,arcHeight:i}}=e,a=t.axis_x_categories.length<4?-20:10,n=(Math.min(s,i)-a)/2;return[n,n]},updateTargetsForRadar(e){const t=this,{config:s}=t;mt(s.axis_x_categories)&&(s.axis_x_categories=pe(0,yt("max",e.map(i=>i.values.length)))),t.generateRadarPoints()},getRadarPosition(e,t,s,i){const a=this,{config:n}=a,[o,r]=a.getRadarSize(),l=n.axis_x_categories.length,c=n.radar_direction_clockwise,u=Ft(e).map(d=>mo(c,d,l,t,G(s)?s:e==="x"?o:r,C(i)?i:n.radar_size_ratio));return u.length===1?u[0]:u},generateRadarPoints(){const e=this,t=e.data.targets,[s,i]=e.getRadarSize(),a=e.cache.get(Jt)||{},n=a._size;(!n||n.width!==s&&n.height!==i)&&(t.forEach(o=>{a[o.id]=o.values.map((r,l)=>e.getRadarPosition(["x","y"],l,void 0,e.getRatio("radar",r)))}),a._size={width:s,height:i},e.cache.add(Jt,a))},redrawRadar(){const e=this,{radar:t,main:s}=e.$el,i=e.getTranslate("radar");i&&(t.attr("transform",i),s.select(`.${ut.chartTexts}`).attr("transform",i),e.generateRadarPoints(),e.updateRadarLevel(),e.updateRadarAxes(),e.updateRadarShape())},generateGetRadarPoints(){const e=this.cache.get(Jt);return(t,s)=>{const i=e[t.id][s];return[i,i,i,i]}},updateRadarLevel(){const e=this,{config:t,state:s,$el:{radar:i}}=e,[a,n]=e.getRadarSize(),o=t.radar_level_depth,r=t.axis_x_categories.length,l=t.radar_level_text_show,c=i.levels,u=pe(0,o),d=t.radar_size_ratio*Math.min(a,n),h=u.map(x=>d*((x+1)/o)),g=(t.radar_level_text_format||function(){}).bind(e.api),f=u.map(x=>{const m=h[x];return pe(0,r).map(y=>e.getRadarPosition(["x","y"],y,m,1).join(",")).join(" ")}),p=c.selectAll(`.${Pt.level}`).data(u);p.exit().remove();const _=p.enter().append("g").attr("class",(x,m)=>`${Pt.level} ${Pt.level}-${m}`);_.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),l&&(c.select("text").empty()&&c.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(()=>g(0)),_.append("text").attr("dx","-.5em").style("text-anchor","end").text(x=>g(s.current.dataMax/u.length*(x+1)))),_.merge(p).attr("transform",x=>`translate(${a-h[x]}, ${n-h[x]})`).selectAll("polygon").attr("points",x=>f[x]),l&&c.selectAll("text").attr("x",x=>J(x)?a:f[x].split(",")[0]).attr("y",x=>J(x)?n:0)},updateRadarAxes(){const e=this,{config:t,$el:{radar:s}}=e,[i,a]=e.getRadarSize(),n=t.axis_x_categories;let o=s.axes.selectAll("g").data(n);o.exit().remove();const r=o.enter().append("g").attr("class",(l,c)=>`${et.axis}-${c}`);if(t.radar_axis_line_show&&r.append("line"),t.radar_axis_text_show&&r.append("text"),o=r.merge(o),t.radar_axis_line_show&&o.select("line").attr("x1",i).attr("y1",a).attr("x2",(l,c)=>e.getRadarPosition("x",c)).attr("y2",(l,c)=>e.getRadarPosition("y",c)),t.radar_axis_text_show){const{x:l=0,y:c=0}=t.radar_axis_text_position,u=e.cache.get(Hs)||0;if(o.select("text").style("text-anchor","middle").attr("dy",".5em").call(d=>{d.each(function(h){ee((0,S.select)(this),String(h),[-.6,1.2])})}).datum((d,h)=>({index:h})).attr("transform",function(d){J(this.width)&&(this.width=this.getBoundingClientRect().width/2);let h=e.getRadarPosition("x",d.index,void 0,1),g=Math.round(e.getRadarPosition("y",d.index,void 0,1));return h>i?h+=this.width+l:Math.round(h)<i&&(h-=this.width+l),g>a?(g/2===a&&this.firstChild.tagName==="tspan"&&this.firstChild.setAttribute("dy","0em"),g+=c):g<a&&(g-=c),`translate(${h} ${g})`}),!u){const d=[s.axes,s.levels].map(h=>Qe(h.node()).width);d.every(h=>h>0)&&e.cache.add(Hs,d[0]-d[1])}}},bindRadarEvent(){const e=this,{state:t,$el:{radar:s,svg:i}}=e,a=e.isPointFocusOnly(),{inputType:n,transiting:o}=t,r=n==="mouse",l=c=>{t.event=c;const u=e.getDataIndexFromEvent(c),d=J(u);(r||d)&&(e.hideTooltip(),a?e.hideCircleFocus():e.unexpandCircles(),r?e.setOverOut(!1,u):d&&e.callOverOutForTouch())};s.axes.on(r?"mouseover ":"touchstart",c=>{if(o)return;t.event=c;const u=e.getDataIndexFromEvent(c);e.selectRectForSingle(i.node(),u),r?e.setOverOut(!0,u):e.callOverOutForTouch(u)}).on("mouseout",r?l:null),r||i.on("touchstart",l)},updateRadarShape(){const e=this,t=e.data.targets.filter(n=>e.isRadarType(n)),s=e.cache.get(Jt),i=e.$el.radar.shapes.selectAll("polygon").data(t),a=i.enter().append("g").attr("class",e.getChartClass("Radar"));e.$T(i.exit()).remove(),a.append("polygon").merge(i).style("fill",e.color).style("stroke",e.color).attr("points",n=>s[n.id].join(" ")),e.updateTargetForCircle(t,a)},radarCircleX(e){return this.cache.get(Jt)[e.id][e.index][0]},radarCircleY(e){return this.cache.get(Jt)[e.id][e.index][1]}},kt=Y(13);function yo(e,t){const s=this,{scale:{x:i,y:a},state:{width:n}}=s;e.selectAll("g").attr("transform",o=>`translate(${o===t?"0,0":`${i(o.x0)},${a(o.y0)}`})`).select("rect").attr("width",o=>o===t?n:i(o.x1)-i(o.x0)).attr("height",o=>o===t?0:a(o.y1)-a(o.y0))}function bo(e){const t=this;return e.map(s=>{const{id:i,values:a}=s,{value:n}=a[0];return{name:i,id:i,value:n,ratio:t.getRatio("treemap",a[0])}})}var vo={initTreemap(){const e=this,{$el:t,state:{current:{width:s,height:i},clip:a,datetimeId:n}}=e;a.id=`${n}-clip`,e.treemap=(0,kt.treemap)().tile(e.getTreemapTile()),e.treemapFn=o=>{const r=(0,kt.hierarchy)(o).sum(c=>c.value),l=e.getSortCompareFn(!0);return e.treemap(l?r.sort(l):r)},t.defs.append("clipPath").attr("id",a.id).append("rect").attr("width",s).attr("height",i),t.treemap=t.main.select(`.${I.chart}`).attr("clip-path",`url(#${a.id})`).append("g").classed(Ee.chartTreemaps,!0),e.bindTreemapEvent()},bindTreemapEvent(){const e=this,{$el:t,config:s,state:i}=e,a=n=>{var o;const r=n.isTrusted?n.target:(o=i.eventReceiver.rect)==null?void 0:o.node();let l;return/^rect$/i.test(r.tagName)&&(i.event=n,l=(0,S.select)(r).datum()),l==null?void 0:l.data};if(s.interaction_enabled){const n=i.inputType==="touch";t.treemap.on(n?"touchstart":"mouseover mousemove",o=>{const r=a(o);r&&(e.showTooltip([r],o.currentTarget),/^(touchstart|mouseover)$/.test(o.type)&&e.setOverOut(!0,r))}).on(n?"touchend":"mouseout",o=>{const r=a(o);e.hideTooltip(),e.setOverOut(!1,r)})}},getTreemapTile(){var e,t;const s=this,{config:i,state:{current:{width:a,height:n}}}=s,o=(t={binary:kt.treemapBinary,dice:kt.treemapDice,slice:kt.treemapSlice,sliceDice:kt.treemapSliceDice,squarify:kt.treemapSquarify,resquarify:kt.treemapResquarify}[(e=i.treemap_tile)!=null?e:"binary"])!=null?t:kt.treemapBinary;return(r,l,c,u,d)=>{o(r,0,0,a,n);for(const h of r.children)h.x0=l+h.x0/a*(u-l),h.x1=l+h.x1/a*(u-l),h.y0=c+h.y0/n*(d-c),h.y1=c+h.y1/n*(d-c)}},getTreemapData(e){const t=this;return{name:"root",children:bo.bind(t)(t.filterTargetsToShow(e.filter(t.isTreemapType,t)))}},updateTargetsForTreemap(e){const t=this,{$el:{treemap:s}}=t,i=t.treemapFn(t.getTreemapData(e!=null?e:t.data.targets));s.data(i)},updateTreemap(e){const t=this,{$el:s,$T:i}=t,a=s.treemap.datum(),n=t.getChartClass("Treemap"),o=s.treemap.selectAll("g").data(a.children);i(o.exit(),e).style("opacity","0").remove(),o.enter().append("g").append("rect"),s.treemap.selectAll("g").attr("class",n).select("rect").attr("fill",r=>t.color(r.data.name))},generateGetTreemapPoints(){const e=this,{$el:t,scale:{x:s,y:i}}=e,a={};return t.treemap.selectAll("g").each(n=>{a[n.data.name]=[[s(n.x0),i(n.y0)],[s(n.x1),i(n.y1)]]}),n=>a[n.id]},redrawTreemap(e){const t=this,{$el:s,state:{current:{width:i,height:a}}}=t;return s.defs.select("rect").attr("width",i).attr("height",a),[t.$T(s.treemap,e,wt()).call(yo.bind(t),s.treemap.datum())]},treemapDataLabelFormat(e){const t=this,{config:s}=t,{id:i,value:a}=e,n=s.treemap_label_format,o=t.getRatio("treemap",e),r=(o*100).toFixed(2),l=s.treemap_label_show&&t.meetsLabelThreshold(o,"treemap")?null:"0";return function(c){return c.style("opacity",l),E(n)?n.bind(t.api)(a,o,i):`${i}
${r}%`}}},Gt={point_show:!0,point_r:2.5,point_radialGradient:!1,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},oe={area_above:!1,area_below:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},To={bar_front:!1,bar_indices_removeNull:!1,bar_label_threshold:0,bar_linearGradient:!1,bar_overlap:!1,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},Ao={bubble_maxR:35,bubble_zerobased:!1},wo={candlestick_width:void 0,candlestick_width_ratio:.6,candlestick_width_max:void 0,candlestick_color_down:"red"},So={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0},Ro={scatter_zerobased:!1},Ve={spline_interpolation_type:"cardinal"},ve={arc_cornerRadius:0,arc_cornerRadius_ratio:0,arc_needle_show:!1,arc_needle_color:void 0,arc_needle_value:void 0,arc_needle_path:void 0,arc_needle_length:100,arc_needle_top_rx:0,arc_needle_top_ry:0,arc_needle_top_width:0,arc_needle_bottom_rx:1,arc_needle_bottom_ry:1,arc_needle_bottom_width:15,arc_needle_bottom_len:0,arc_rangeText_values:void 0,arc_rangeText_unit:"absolute",arc_rangeText_fixed:!1,arc_rangeText_format:void 0,arc_rangeText_position:void 0},Co={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},ko={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_extents:void 0,gauge_label_format:void 0,gauge_label_ratio:void 0,gauge_label_threshold:0,gauge_enforceMinMax:!1,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},Eo={pie_label_show:!0,pie_label_format:void 0,pie_label_ratio:void 0,pie_label_threshold:.05,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},Lo={polar_label_show:!0,polar_label_format:void 0,polar_label_threshold:.05,polar_label_ratio:void 0,polar_level_depth:3,polar_level_max:void 0,polar_level_show:!0,polar_level_text_backgroundColor:"#fff",polar_level_text_format:e=>e%1===0?e:e.toFixed(2),polar_level_text_show:!0,polar_padAngle:0,polar_padding:0,polar_startingAngle:0},Po={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:e=>e%1===0?e:e.toFixed(2),radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1},Oo={treemap_tile:"binary",treemap_label_format:void 0,treemap_label_threshold:.05,treemap_label_show:!0};function Qt(e,t){at(Vt.prototype,Object.values(Fs).concat(e)),at(It.prototype,qn),Bt.setOptions(Object.values(Xs).concat(t||[]))}function Dt(e,t){Qt([qt,be,fo].concat(e||[])),Bt.setOptions([Gt,So].concat(t||[]))}function re(e,t){at(Vt.prototype,[ao,qt].concat(e||[])),Bt.setOptions([Gt].concat(t||[]))}let Us=()=>(Dt(ne,[oe]),(Us=()=>k.AREA)()),Zs=()=>(Dt(ne,[oe]),(Zs=()=>k.AREA_LINE_RANGE)()),qs=()=>(Dt(ne,[oe,Ve]),(qs=()=>k.AREA_SPLINE)()),Ks=()=>(Dt(ne,[oe,Ve]),(Ks=()=>k.AREA_SPLINE_RANGE)()),Js=()=>(Dt(ne,[oe]),(Js=()=>k.AREA_STEP)()),Qs=()=>(Dt(),(Qs=()=>k.LINE)()),ti=()=>(Dt(void 0,[Ve]),(ti=()=>k.SPLINE)()),ei=()=>(Dt(),(ei=()=>k.STEP)()),si=()=>(re(void 0,[ve,Co]),(si=()=>k.DONUT)()),ii=()=>(re([ho],[ve,ko]),(ii=()=>k.GAUGE)()),ai=()=>(re(void 0,[ve,Eo]),(ai=()=>k.PIE)()),ni=()=>(re([_o],[ve,Lo]),(ni=()=>k.POLAR)()),oi=()=>(re([Fs.eventrect,be,$o],[Gt,Po,{axis_x_categories:Xs.optAxis.axis_x_categories}]),(oi=()=>k.RADAR)()),ri=()=>(Qt([no,qt],[To,Gt]),(ri=()=>k.BAR)()),li=()=>(Qt([qt,be,go],[Ao,Gt]),(li=()=>k.BUBBLE)()),ci=()=>(Qt([uo,qt],[wo,Gt]),(ci=()=>k.CANDLESTICK)()),di=()=>(Qt([qt,be],[Gt,Ro]),(di=()=>k.SCATTER)()),ui=()=>(Qt([vo],[Oo]),(ui=()=>k.TREEMAP)());function hi(e=!1,t,s,i){const a=this,{config:n,$el:{main:o}}=a,r=n.data_selection_grouped,l=n.data_selection_isselectable.bind(a.api);n.data_selection_enabled&&o.selectAll(`.${st.shapes}`).selectAll(`.${st.shape}`).each(function(c){const u=(0,S.select)(this),{id:d,index:h}=c.data?c.data:c,g=a.getToggle(this,c).bind(a),f=r||!t||t.indexOf(d)>=0,p=!s||s.indexOf(h)>=0,_=u.classed(Z.SELECTED);u.classed(Rt.line)||u.classed(_e.area)||(e?f&&p&&l(c)&&!_?g(!0,u.classed(Z.SELECTED,!0),c,h):G(i)&&i&&_&&g(!1,u.classed(Z.SELECTED,!1),c,h):f&&p&&l(c)&&_&&g(!1,u.classed(Z.SELECTED,!1),c,h))})}var Io={selected(e){const t=this.internal,s=[];return t.$el.main.selectAll(`.${st.shapes+t.getTargetSelectorSuffix(e)}`).selectAll(`.${st.shape}`).filter(function(){return(0,S.select)(this).classed(Z.SELECTED)}).each(i=>s.push(i)),s},select(e,t,s){const i=this.internal;hi.bind(i)(!0,e,t,s)},unselect(e,t){const s=this.internal;hi.bind(s)(!1,e,t)}};const gi=function(e){var t;const s=this.internal,{axis:i,brush:a,config:n,scale:{x:o,subX:r},state:l}=s;let c;return n.subchart_show&&(c=e,Array.isArray(c)?(i.isTimeSeries()&&(c=c.map(d=>xt.bind(s)(d))),s.withinRange(c,s.getZoomDomain("subX",!0),s.getZoomDomain("subX"))&&(l.domain=c,a.move(a.getSelection(),c.map(r)))):c=(t=l.domain)!=null?t:o.orgDomain()),c};at(gi,{show(){var e,t;const s=this.internal,{$el:{subchart:i},config:a}=s,n=a.subchart_show;if(!n){s.unbindZoomEvent(),a.subchart_show=!n,!i.main&&s.initSubchart();let o=i.main.selectAll(`.${I.target}`);s.data.targets.length!==o.size()&&(s.updateSizes(),s.updateTargetsForSubchart(s.data.targets),o=(e=i.main)==null?void 0:e.selectAll(`.${I.target}`)),o==null||o.style("opacity",null),(t=i.main)==null||t.style("display",null),this.resize()}},hide(){const e=this.internal,{$el:{subchart:{main:t}},config:s}=e;s.subchart_show&&(t==null?void 0:t.style("display"))!=="none"&&(s.subchart_show=!1,t.style("display","none"),this.resize())},toggle(){const e=this.internal,{config:t}=e;this.subchart[t.subchart_show?"hide":"show"]()},reset(){const e=this.internal,{brush:t}=e;t.clear(t.getSelection())}});var Do={subchart:gi},At=Y(14);const fi=function(e){var t;const s=this.internal,{axis:i,config:a,org:n,scale:o,state:r}=s,l=i.isCategorized();let c;if(a.zoom_enabled)if(c=e,Array.isArray(c)){if(i.isTimeSeries()&&(c=c.map(d=>xt.bind(s)(d))),s.withinRange(c,s.getZoomDomain("zoom",!0),s.getZoomDomain("zoom"))){if(r.domain=c,c=s.getZoomDomainValue(c),s.api.tooltip.hide(),a.subchart_show){const d=o.zoom||o.x;s.brush.getSelection().call(s.brush.move,c.map(d))}else{const d=l?o.x.orgScale():n.xScale||o.x;s.updateCurrentZoomTransform(d,c)}s.setZoomResetButton()}}else c=s.zoom.getDomain();return(t=r.domain)!=null?t:c};at(fi,{enable(e){const t=this.internal,{config:s}=t;/^(drag|wheel)$/.test(e)&&(s.zoom_type=e),s.zoom_enabled=!!e,t.zoom?e===!1&&t.bindZoomEvent(!1):(t.initZoom(),t.bindZoomEvent()),t.updateAndRedraw()},max(e){const t=this.internal,{config:s,org:{xDomain:i}}=t;return(e===0||e)&&(s.zoom_x_max=yt("max",[i[1],e])),s.zoom_x_max},min(e){const t=this.internal,{config:s,org:{xDomain:i}}=t;return(e===0||e)&&(s.zoom_x_min=yt("min",[i[0],e])),s.zoom_x_min},range(e){const t=this.zoom;if(F(e)){const{min:s,max:i}=e;G(s)&&t.min(s),G(i)&&t.max(i)}return{min:t.min(),max:t.max()}}});var zo={zoom:fi,unzoom(){const e=this.internal,{config:t,$el:{eventRect:s,zoomResetBtn:i},scale:{zoom:a},state:n}=e;a&&(t.subchart_show?e.brush.getSelection().call(e.brush.move,null):e.zoom.updateTransformScale(At.zoomIdentity),e.updateZoom(!0),i==null||i.style("display","none"),(0,At.zoomTransform)(s.node())!==At.zoomIdentity&&e.zoom.transform(s,At.zoomIdentity),n.domain=void 0)}},Mo={drag(e){const t=this,{config:s,state:i,$el:{main:a}}=t,n=s.data_selection_grouped,o=s.interaction_enabled&&s.data_selection_isselectable;if(t.hasArcType()||!s.data_selection_enabled||s.zoom_enabled&&!t.zoom.altDomain||!s.data_selection_multiple)return;const[r,l]=i.dragStart||[0,0],[c,u]=e,d=Math.min(r,c),h=Math.max(r,c),g=n?i.margin.top:Math.min(l,u),f=n?i.height:Math.max(l,u);a.select(`.${Xt.dragarea}`).attr("x",d).attr("y",g).attr("width",h-d).attr("height",f-g),a.selectAll(`.${st.shapes}`).selectAll(`.${st.shape}`).filter(p=>o==null?void 0:o.bind(t.api)(p)).each(function(p,_){const x=(0,S.select)(this),m=x.classed(Z.SELECTED),b=x.classed(Xt.INCLUDED);let y=!1,T;if(x.classed(rt.circle)){const $=+x.attr("cx")*1,v=+x.attr("cy")*1;T=t.togglePoint,y=d<$&&$<h&&g<v&&v<f}else if(x.classed(bt.bar)){const{x:$,y:v,width:A,height:L}=Qe(this);T=t.togglePath,y=!(h<$||$+A<d)&&!(f<v||v+L<g)}else return;y^b&&(x.classed(Xt.INCLUDED,!b),x.classed(Z.SELECTED,!m),T.call(t,!m,x,p,_))})},dragstart(e){const t=this,{config:s,state:i,$el:{main:a}}=t;t.hasArcType()||!s.data_selection_enabled||(i.dragStart=e,a.select(`.${I.chart}`).append("rect").attr("class",Xt.dragarea).style("opacity","0.1"),t.setDragStatus(!0))},dragend(){const e=this,{config:t,$el:{main:s},$T:i}=e;e.hasArcType()||!t.data_selection_enabled||(i(s.select(`.${Xt.dragarea}`)).style("opacity","0").remove(),s.selectAll(`.${st.shape}`).classed(Xt.INCLUDED,!1),e.setDragStatus(!1))}},Fo=Object.defineProperty,Xo=Object.defineProperties,Bo=Object.getOwnPropertyDescriptors,pi=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,Vo=Object.prototype.propertyIsEnumerable,xi=(e,t,s)=>t in e?Fo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Go=(e,t)=>{for(var s in t||(t={}))No.call(t,s)&&xi(e,s,t[s]);if(pi)for(var s of pi(t))Vo.call(t,s)&&xi(e,s,t[s]);return e},Yo=(e,t)=>Xo(e,Bo(t)),jo=Yo(Go({},Mo),{selectPoint(e,t,s){const i=this,{config:a,$el:{main:n},$T:o}=i,r=a.axis_rotated,l=(r?i.circleY:i.circleX).bind(i),c=(r?i.circleX:i.circleY).bind(i),u=i.pointSelectR.bind(i);W(a.data_onselected,i.api,t,e.node()),o(n.select(`.${Z.selectedCircles}${i.getTargetSelectorSuffix(t.id)}`).selectAll(`.${Z.selectedCircle}-${s}`).data([t]).enter().append("circle").attr("class",()=>i.generateClass(Z.selectedCircle,s)).attr("cx",l).attr("cy",c).attr("stroke",i.color).attr("r",d=>i.pointSelectR(d)*1.4)).attr("r",u)},unselectPoint(e,t,s){const i=this,{config:a,$el:{main:n},$T:o}=i;W(a.data_onunselected,i.api,t,e==null?void 0:e.node()),o(n.select(`.${Z.selectedCircles}${i.getTargetSelectorSuffix(t.id)}`).selectAll(`.${Z.selectedCircle}-${s}`)).attr("r",0).remove()},togglePoint(e,t,s,i){this[`${e?"":"un"}selectPoint`](t,s,i)},selectPath(e,t){const s=this,{config:i}=s;W(i.data_onselected,s.api,t,e.node()),i.interaction_brighten&&e.style("filter","brightness(1.25)")},unselectPath(e,t){const s=this,{config:i}=s;W(i.data_onunselected,s.api,t,e.node()),i.interaction_brighten&&e.style("filter",null)},togglePath(e,t,s,i){this[`${e?"":"un"}selectPath`](t,s,i)},getToggle(e,t){const s=this;return e.nodeName==="path"?s.togglePath:s.isStepType(t)?()=>{}:s.togglePoint},toggleShape(e,t,s){var i;const a=this,{config:n,$el:{main:o}}=a;if(n.data_selection_enabled&&n.data_selection_isselectable.bind(a.api)(t)){const r=(0,S.select)(e),l=r.classed(Z.SELECTED),c=a.getToggle(e,t).bind(a);let u;if(!n.data_selection_multiple){const d=(i=a.isPointFocusOnly)==null?void 0:i.call(a);let h=`.${d?Z.selectedCircles:st.shapes}`;n.data_selection_grouped&&(h+=a.getTargetSelectorSuffix(t.id)),o.selectAll(h).selectAll(d?`.${Z.selectedCircle}`:`.${st.shape}.${Z.SELECTED}`).classed(Z.SELECTED,!1).each(function(g){const f=(0,S.select)(this);u=f,c(!1,f,g,g.index)})}(!u||u.node()!==r.node())&&(r.classed(Z.SELECTED,!l),c(!l,r,t,s))}}}),Wo={initBrush(){const e=this,{config:t,scale:s,$el:{subchart:i},state:a}=e,n=t.axis_rotated,o=t.subchart_size_height;let r,l,c;e.brush=(n?(0,ue.brushY)():(0,ue.brushX)()).handleSize(5),e.brush.on("start brush end",u=>{const{selection:d,sourceEvent:h,target:g,type:f}=u;f==="start"&&(e.state.inputType==="touch"&&e.hideTooltip(),l=h?d:null),/(start|brush)/.test(f)&&(f==="brush"&&h&&a.domain&&(l==null||l.forEach((p,_)=>{p!==d[_]&&(a.domain[_]=s.x.orgDomain()[_])})),e.redrawForBrush(f!=="start")),f==="end"&&(r=s.x.orgDomain()),g!=null&&g.handle&&(d===null?e.brush.handle.attr("display","none"):e.brush.handle.attr("display",null).attr("transform",(p,_)=>{const x=[d[_],o/2];return`translate(${n?x.reverse():x})`}))}),e.brush.updateResize=function(){c&&clearTimeout(c),c=setTimeout(()=>{const u=this.getSelection();r&&(0,ue.brushSelection)(u.node())&&this.move(u,r.map(s.subX.orgScale()))},0)},e.brush.update=function(){var u;return this.extent()()[1].filter(h=>isNaN(h)).length===0&&((u=i.main)==null||u.select(`.${X.brush}`).call(this)),this},e.brush.scale=function(u){const d=t.subchart_size_height;let h=e.getExtent();!h&&u.range?h=[[0,0],[u.range()[1],d]]:M(h)&&(h=h.map((g,f)=>[g,f>0?d:f])),n&&h[1].reverse(),this.extent(h),this.update()},e.brush.getSelection=()=>i.main?i.main.select(`.${X.brush}`):(0,S.select)([])},initSubchart(){const e=this,{config:t,state:{clip:s,hasAxis:i},$el:{defs:a,svg:n,subchart:o,axis:r}}=e;if(!i)return;const l=t.subchart_show?null:"hidden",c=`${s.id}-subchart`,u=e.getClipPath(c);s.idSubchart=c,e.appendClip(a,c),e.initBrush(),o.main=n.append("g").classed(X.subchart,!0).attr("transform",e.getTranslate("context"));const{main:d}=o;d.style("visibility",l),d.append("g").attr("clip-path",u).attr("class",X.chart),["bar","line","bubble","candlestick","scatter"].forEach(g=>{const f=ht(/^(bubble|scatter)$/.test(g)?"circle":g);if(e.hasType(g)||e.hasTypeOf(f)){const p=d.select(`.${X.chart}`),_=X[`chart${f}s`];p.select(`.${_}`).empty()&&p.append("g").attr("class",_)}});const h=d.append("g").attr("clip-path",u).attr("class",X.brush).call(e.brush);t.subchart_showHandle&&e.addBrushHandle(h),r.subX=d.append("g").attr("class",X.axisX).attr("transform",e.getTranslate("subX")).attr("clip-path",t.axis_rotated?"":s.pathXAxis).style("visibility",t.subchart_axis_x_show?l:"hidden")},addBrushHandle(e){const t=this,{config:s}=t,i=s.axis_rotated,a=s.subchart_init_range,n="handle--custom",o=i?["M8.5 0 a6 6 0 0 0 -6 -6.5 H-2.5 a 6 6 0 0 0 -6 6.5 z m-5 -2 H-3.5 m7 -2 H-3.5z","M8.5 0 a6 -6 0 0 1 -6 6.5 H-2.5 a 6 -6 0 0 1 -6 -6.5z m-5 2 H-3.5 m7 2 H-3.5z"]:["M0 -8.5 A6 6 0 0 0 -6.5 -3.5 V2.5 A6 6 0 0 0 0 8.5 Z M-2 -3.5 V3.5 M-4 -3.5 V3.5z","M0 -8.5 A6 6 0 0 1 6.5 -3.5 V2.5 A6 6 0 0 1 0 8.5 Z M2 -3.5 V3.5 M4 -3.5 V3.5z"];t.brush.handle=e.selectAll(`.${n}`).data(i?[{type:"n"},{type:"s"}]:[{type:"w"},{type:"e"}]).enter().append("path").attr("class",n).attr("cursor",`${i?"ns":"ew"}-resize`).attr("d",r=>o[+/[se]/.test(r.type)]).attr("display",a?null:"none")},updateTargetsForSubchart(e){const t=this,{config:s,state:i,$el:{subchart:{main:a}}}=t;s.subchart_show&&(["bar","line","bubble","candlestick","scatter"].filter(n=>t.hasType(n)||t.hasTypeOf(ht(n))).forEach(n=>{const o=/^(bubble|scatter)$/.test(n),r=ht(o?"circle":n),l=t.getChartClass(r,!0),c=t.getClass(o?"circles":`${n}s`,!0),u=a.select(`.${X[`chart${`${r}s`}`]}`);if(o){const d=u.selectAll(`.${X.circles}`).data(e.filter(t[`is${ht(n)}Type`].bind(t))).attr("class",c);d.exit().remove(),d.enter().append("g").attr("class",c)}else{const d=u.selectAll(`.${X[`chart${r}`]}`).attr("class",l).data(e.filter(t[`is${r}Type`].bind(t))),h=d.enter().append("g").style("opacity","0").attr("class",l).append("g").attr("class",c);d.exit().remove(),n==="line"&&t.hasTypeOf("Area")&&h.append("g").attr("class",t.getClass("areas",!0))}}),a.selectAll(`.${X.brush} rect`).attr(s.axis_rotated?"width":"height",s.axis_rotated?i.width2:i.height2))},redrawSubchart(e,t,s){var i;const a=this,{config:n,$el:{subchart:{main:o}},state:r}=a,l=!!t;if(o.style("visibility",n.subchart_show?null:"hidden"),n.subchart_show&&(((i=r.event)==null?void 0:i.type)==="zoom"&&a.brush.update(),e)){const c=n.subchart_init_range;if(!es(a)&&a.brush.update(),Object.keys(s.type).forEach(u=>{const d=ht(u),h=a[`generateDraw${d}`](s.indices[u],!0);a[`update${d}`](l,!0),a[`redraw${d}`](h,l,!0)}),a.hasType("bubble")||a.hasType("scatter")){const{cx:u}=s.pos,d=a.updateCircleY(!0);a.updateCircle(!0),a.redrawCircle(u,d,l,void 0,!0)}!r.rendered&&c&&(r.domain=c,a.brush.move(a.brush.getSelection(),c.map(a.scale.x)))}},redrawForBrush(e=!0){var t;const s=this,{config:{subchart_onbrush:i,zoom_rescale:a},scale:n,state:o}=s;s.redraw({withTransition:!1,withY:a,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e&&o.rendered&&i.bind(s.api)((t=o.domain)!=null?t:n.x.orgDomain())},transformContext(e,t){const s=this,{$el:{subchart:i},$T:a}=s,n=t!=null&&t.axisSubX?t.axisSubX:a(i.main.select(`.${X.axisX}`),e);i.main.attr("transform",s.getTranslate("context")),n.attr("transform",s.getTranslate("subX"))},getExtent(){const e=this,{config:t,scale:s}=e;let i=t.axis_x_extent;if(i){if(E(i))i=i.bind(e.api)(e.getXDomain(e.data.targets),s.subX);else if(e.axis.isTimeSeries()&&i.every(isNaN)){const a=xt.bind(e);i=i.map(n=>s.subX(a(n)))}}return i}},Ho={initZoom(){const e=this;e.scale.zoom=null,e.generateZoom(),e.initZoomBehaviour()},bindZoomEvent(e=!0){const t=this,{config:s}=t;s.zoom_enabled&&e?!s.subchart_show&&t.bindZoomOnEventRect():e===!1&&(t.api.unzoom(),t.unbindZoomEvent())},generateZoom(){const e=this,{config:t,org:s,scale:i}=e,a=(0,At.zoom)().duration(0).on("start",e.onZoomStart.bind(e)).on("zoom",e.onZoom.bind(e)).on("end",e.onZoomEnd.bind(e));a.orgScaleExtent=()=>{const n=t.zoom_extent||[1,10];return[n[0],Math.max(e.getMaxDataCount()/n[1],n[1])]},a.updateScaleExtent=function(){const n=Mt(e.scale.x.orgDomain())/Mt(e.getZoomDomain()),o=this.orgScaleExtent();return this.scaleExtent([o[0]*n,o[1]*n]),this},a.updateTransformScale=(n,o)=>{var r;const l=t.axis_rotated;(r=s.xScale)==null||r.range(i.x.range());const c=n[l?"rescaleY":"rescaleX"](s.xScale||i.x),u=e.trimXDomain(c.domain()),d=t.zoom_rescale;if(c.domain(u,s.xDomain),o){const h=c(i.x.domain()[0]),g=l?n.x:h,f=l?h:n.y;e.$el.eventRect.property("__zoom",At.zoomIdentity.translate(g,f).scale(n.k))}e.state.xTickOffset||(e.state.xTickOffset=e.axis.x.tickOffset()),i.zoom=e.getCustomizedXScale(c),e.axis.x.scale(i.zoom),d?(!s.xScale&&(s.xScale=i.x.copy()),i.x.domain(u)):s.xScale&&(i.x.domain(s.xScale.domain()),s.xScale=null)},a.getDomain=()=>{const n=i[i.zoom?"zoom":"subX"].domain();return e.axis.isCategorized()&&(n[1]-=2),n},e.zoom=a},onZoomStart(e){const t=this,{sourceEvent:s}=e;s&&(t.zoom.startEvent=s,t.state.zooming=!0,W(t.config.zoom_onzoomstart,t.api,e))},onZoom(e){var t;const s=this,{config:i,scale:a,state:n,org:o}=s,{sourceEvent:r}=e,l=(e==null?void 0:e.transform)===At.zoomIdentity;if(!i.zoom_enabled||s.filterTargetsToShow(s.data.targets).length===0||!a.zoom&&(r==null?void 0:r.type.indexOf("touch"))>-1&&(r==null?void 0:r.touches.length)===1)return;e.sourceEvent&&(n.zooming=!0,n.domain=void 0);const c=(r==null?void 0:r.type)==="mousemove",u=(r==null?void 0:r.wheelDelta)<0,{transform:d}=e;!c&&u&&a.x.domain().every((g,f)=>g!==o.xDomain[f])&&a.x.domain(o.xDomain),s.zoom.updateTransformScale(d,i.zoom_type==="wheel"&&r);const h=i.transition_duration>0&&!i.subchart_show&&(n.dragging||l||!e.sourceEvent);s.redraw({withTransition:h,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),s.state.cancelClick=c,!l&&W(i.zoom_onzoom,s.api,(t=s.state.domain)!=null?t:s.zoom.getDomain())},onZoomEnd(e){var t,s;const i=this,{config:a,state:n}=i;let{startEvent:o}=i.zoom,r=e==null?void 0:e.sourceEvent;const l=(e==null?void 0:e.transform)===At.zoomIdentity;(o==null?void 0:o.type.indexOf("touch"))>-1&&(o=o.changedTouches[0],r=(t=r==null?void 0:r.changedTouches)==null?void 0:t[0]),!(a.zoom_type==="drag"&&r&&o.clientX===r.clientX&&o.clientY===r.clientY)&&(n.zooming=!1,i.redrawEventRect(),i.updateZoom(),!l&&(r||n.dragging)&&W(a.zoom_onzoomend,i.api,(s=i.state.domain)!=null?s:i.zoom.getDomain()))},updateZoom(e){const t=this,{subX:s,x:i,zoom:a}=t.scale;if(a){const n=a.domain(),o=s.domain(),r=.015,l=t.config.axis_x_inverted?(n[0]>=o[0]||n[0]+r>=o[0])&&(o[1]>=n[1]||o[1]>=n[1]+r):(n[0]<=o[0]||n[0]-r<=o[0])&&(o[1]<=n[1]||o[1]<=n[1]-r);(e||l)&&(t.axis.x.scale(s),i.domain(s.orgDomain()),t.scale.zoom=null)}},updateCurrentZoomTransform(e,t){const s=this,{$el:{eventRect:i},config:a}=s,n=a.axis_rotated,o=[-e(t[0]),0],r=At.zoomIdentity.scale(e.range()[1]/(e(t[1])-e(t[0]))).translate(...n?o.reverse():o);i.call(s.zoom.transform,r)},bindZoomOnEventRect(){const e=this,{config:t,$el:{eventRect:s}}=e,i=t.zoom_type==="drag"?e.zoomBehaviour:e.zoom;e.$el.svg.on("wheel",()=>{}),s==null||s.call(i).on("dblclick.zoom",null)},initZoomBehaviour(){const e=this,{config:t,state:s}=e,i=t.axis_rotated;let a=0,n=0,o;const r={axis:i?"y":"x",attr:i?"height":"width",index:i?1:0};e.zoomBehaviour=(0,ms.drag)().clickDistance(4).on("start",function(l){s.event=l,e.setDragStatus(!0),e.unselectRect(),o||(o=e.$el.main.append("rect").attr("clip-path",s.clip.path).attr("class",Le.zoomBrush).attr("width",i?s.width:0).attr("height",i?0:s.height)),a=$t(l,this)[r.index],n=a,o.attr(r.axis,a).attr(r.attr,0),e.onZoomStart(l)}).on("drag",function(l){n=$t(l,this)[r.index],o.attr(r.axis,Math.min(a,n)).attr(r.attr,Math.abs(n-a))}).on("end",l=>{const c=e.scale.zoom||e.scale.x;s.event=l,o.attr(r.axis,0).attr(r.attr,0),a>n&&([a,n]=[n,a]),a<0&&(n+=Math.abs(a),a=0),a!==n&&e.api.zoom([a,n].map(u=>c.invert(u))),e.setDragStatus(!1)})},setZoomResetButton(){const e=this,{config:t,$el:s}=e,i=t.zoom_resetButton;i&&t.zoom_type==="drag"&&(s.zoomResetBtn?s.zoomResetBtn.style("display",null):s.zoomResetBtn=e.$el.chart.append("div").classed(I.button,!0).append("span").on("click",function(){E(i.onclick)&&i.onclick.bind(e.api)(this),e.api.unzoom()}).classed(Le.buttonZoomReset,!0).text(i.text||"Reset Zoom"))},getZoomTransform(){const e=this,{$el:{eventRect:t}}=e;return t!=null&&t.node()?(0,At.zoomTransform)(t.node()):{k:1}}},Uo={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:()=>!0,data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:()=>{},data_onunselected:()=>{}},Zo={subchart_show:!1,subchart_showHandle:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_format:void 0,subchart_axis_x_tick_text_show:!0,subchart_init_range:void 0,subchart_onbrush:()=>{}},qo={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0};let _i=()=>(at(Vt.prototype,jo),at(It.prototype,Io),Bt.setOptions([Uo]),(_i=()=>!0)()),mi=()=>(at(Vt.prototype,Wo),at(It.prototype,Do),Bt.setOptions([Zo]),(mi=()=>!0)()),$i=()=>(at(Vt.prototype,Ho),at(It.prototype,zo),Bt.setOptions([qo]),($i=()=>!0)()),Ge={};const yi={version:"3.11.3-nightly-20240320004559",generate(e){const t=Ht({},Ge,e),s=new It(t);return s.internal.charts=this.instance,this.instance.push(s),s},defaults(e){return F(e)&&(Ge=e),Ge},instance:[],plugin:{}};Object.keys(P).forEach(e=>P[e]()),Object.keys(ft).forEach(e=>ft[e]())}(),Te}()});
